function ArrayBox(){const i=this;function u(t){return t?t.length:0}function a(t,e){return t==e?0:t<e?-1:1}this.size=u,this.empty=function(t){return u(t)<1},this.find=function(t,e){return t?t.find(e):null},this.ifind=function(t,e){return t?t.findIndex(e):-1},this.indexOf=function(t,e){return t?t.indexOf(e):-1},this.intersect=function(t,e){return e?t.filter(function(t){return-1<e.indexOf(t)}):[]},this.shuffle=function(t){return t.sort(function(){return.5-Math.random()})},this.unique=function(e,t){return t?e.concat(t.filter(t=>e.indexOf(t)<0)):e},this.distinct=function(n,r){return r?n.filter((e,t)=>n.findIndex(t=>e[r]===t[r])==t):n},this.swap=function(t,e,n){var r=t[e];return t[e]=t[n],t[n]=r,i},this.eq=function(t,n){return t&&n&&t.every((t,e)=>n[e]==t)},this.push=function(t,e){return t&&t.push(e),i},this.pushAt=function(t,e,n){return t&&t.splice(n,0,e),i},this.pop=function(t){return t&&t.pop(),i},this.popAt=function(t,e){return t&&t.splice(e,1),i},this.remove=function(t,e,n){return t&&t.splice(e,n),i},this.reset=function(t){return t&&t.splice(0),i},this.get=function(t,e){return t?t[e]:null},this.last=function(t){return i.get(t,u(t)-1)},this.clone=function(t){return t?t.slice():[]},this.sort=function(t,e){return t&&t.sort(e||a)},this.sortBy=function(t,n,r,e){return r=r||a,t&&n?t.sort("desc"==e?function(t,e){return r(e[n],t[n])}:function(t,e){return r(t[n],e[n])}):t},this.multisort=function(t,o,s){return s=s||[],t.sort(function t(e,n,r){var i=o[r=r||0],i="desc"==s[r]?a(n[field],e[field]):a(e[i],n[i]);return 0==i&&++r<o.length?t(e,n,r):i}),i},this.each=function(e,n){var r=u(e);for(let t=0;t<r;t++)n(e[t],t);return i},this.reverse=function(e,n){for(let t=u(e)-1;-1<t;t--)n(e[t],t);return i},this.extract=function(e,n){var r=u(e);for(let t=0;t<r;t++)n(e[t],t)&&e.splice(t--,1);return i},this.flush=function(t,e){e=i.ifind(t,e);return-1<e&&t.splice(e,1),i},this.format=function(t,e,o){(o=o||{}).separator=o.separator||"",o.empty=o.empty||"";const s={size:u(t)};return t&&e&&t.map((r,i)=>(s.index=i,s.count=i+1,e.replace(/@(\w+);/g,function(t,e){let n=o[e];return(n?n(r[e],r,i):r[e]??s[e])??o.empty}))).join(o.separator)},this.parse=function(t){return t?JSON.parse(t):null},this.read=function(t){return i.parse(window.sessionStorage.getItem(t))},this.stringify=function(t){return"string"==typeof(e=t)||e instanceof String?t:JSON.stringify(t);var e},this.ss=function(t,e){return e&&window.sessionStorage.setItem(t,i.stringify(e)),i},this.ls=function(t,e){return e&&window.localStorage.setItem(t,i.stringify(e)),i}}function DateBox(){const a=this,e="",o=new Date,n=/^\d.+$/,r=/\D+/g,i=[31,28,31,30,31,30,31,31,30,31,30,31];function s(t){return t&&t[0]}function u(t){return t&&n.test(t)}function l(t){return t.split(r)}function c(t){return t<10?"0"+t:t}function d(t){var e=t[2];return t[2]=t[0],t[0]=e,t}function f(t,e,n){return Math.min(Math.max(t||0,e),n)}function h(t){return f(t,0,59)}function m(t){return t<100?+(e+parseInt(o.getFullYear()/100)+c(t)):t}function g(t){return 0==(3&t)&&(t%25!=0||0==(15&t))}function p(t,e){return i[e]+(1==e&&g(t))}function v(t){return t&&t.getTime&&!isNaN(t.getTime())}function b(t){return t[0]=m(+t[0]||0),t[1]=f(t[1],1,12),t[2]=f(t[2],1,p(t[0],t[1]-1)),t}function T(t,e,n,r,i){return t.setHours(f(e,0,23),h(n),h(r),i||0),isNaN(t.getTime())?null:t}function y(t){let e=new Date;return t=b(t),e.setFullYear(t[0],t[1]-1,t[2]),T(e,t[3],t[4],t[5],t[6])}function x(t){return s(t)?y(t):null}function I(t){return c(t.getHours())+":"+c(t.getMinutes())}function E(t){return I(t)+":"+c(t.getSeconds())}function D(t){return t.getFullYear()+"-"+c(t.getMonth()+1)+"-"+c(t.getDate())}function A(t){return c(t.getDate())+"/"+c(t.getMonth()+1)+"/"+t.getFullYear()}this.build=y,this.isValid=v,this.sysdate=function(){return o},this.isLeap=function(t){return t&&g(t.getFullYear())},this.getDays=function(t,e){return Math.round(Math.abs((t-e)/864e5))},this.daysInMonth=function(t){return t?p(t.getFullYear(),t.getMonth()):0},this.toArray=function(t){return t?[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]:[]},this.addDate=function(t,e){return t&&t.setDate(t.getDate()+e),a},this.addHours=function(t,e){return t&&t.setHours(t.getHours()+e),a},this.addMs=function(t,e){return t&&t.setMilliseconds(t.getMilliseconds()+e),a},this.reset=function(t){return t&&t.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()),a},this.toISODateString=function(t){return(t||o).toISOString().substring(0,10)},this.trunc=function(t){return t&&t.setHours(0,0,0,0),a},this.clone=function(t){return new Date((t||o).getTime())},this.randTime=function(t,e){return Math.floor(Math.random()*(e.getTime()-t.getTime())+t.getTime())},this.randDate=function(t,e){return new Date(a.randTime(t,e))},this.getWeek=function(t){t=t||o;var e=new Date(t.getFullYear(),0,1);return Math.ceil((t.getDay()+1+a.getDays(t,e))/7)},this.week=function(t,e){e=e||1;const n=new Date(t,0,1);t=(n.getDay()+6)%7;return n.setDate(n.getDate()+7*e-t),n},this.toWeek=function(t){return t?a.week(+t.substr(0,4),+t.substr(6)):null},this.isoWeek=function(t){return t?t.getFullYear()+"-W"+c(a.getWeek(t)):null},this.toObject=function(t,e){var n=(t=t||o).getDay();let r=t.getFullYear().toString();const i={yyyy:+r,y:+r.substr(0,2),yy:+r.substr(2,2),m:t.getMonth(),d:t.getDate()};return i.mmm=e.monthNamesShort[i.m],i.mmmm=e.monthNames[i.m],i.mm=c(++i.m),i.ddd=e.dayNamesShort[n],i.dddd=e.dayNames[n],i.dd=c(i.d),i.h=t.getHours(),i.hh=c(i.h),i.M=t.getMinutes(),i.MM=c(i.M),i.s=t.getSeconds(),i.ss=c(i.s),i.ms=t.getMilliseconds(),i.t=i.h<12?"a":"p",i.tt=i.t+"m",i},this.diff=function(t,e){if((e=e||o)<t)return a.diff(e,t);const r=a.toArray(e);const i=[0,12,a.daysInMonth(e)-e.getDate()+t.getDate(),24,60,60,1e3];return a.toArray(t).forEach(function t(e,n){r[n]-=e,r[n]<0&&(r[n]+=i[n],t(1,n-1))}),r},this.interval=function(t,e,n,r,i){let o=a.clone(t);i=i||1e3;const s=new Date(o.getTime()+e),u=setInterval(function(){a.addMs(o,i),(!n(o,s)||s<=o)&&(clearInterval(u),r&&r())},i);return a},this.lt=function(t,e){return v(t)&&v(e)&&t.getTime()<e.getTime()},this.le=function(t,e){return v(t)&&v(e)&&t.getTime()<=e.getTime()},this.eq=function(t,e){return v(t)&&v(e)&&t.getTime()==e.getTime()},this.ge=function(t,e){return v(t)&&v(e)&&t.getTime()>=e.getTime()},this.gt=function(t,e){return v(t)&&v(e)&&t.getTime()>e.getTime()},this.cmp=function(t,e){return v(t)&&v(e)?t.getTime()-e.getTime():v(t)?-1:1},this.inYear=function(t,e){return t&&e&&t.getFullYear()==e.getFullYear()},this.inMonth=function(t,e){return a.inYear(t,e)&&t.getMonth()==e.getMonth()},this.inDay=function(t,e){return a.inMonth(t,e)&&t.getDate()==e.getDate()},this.inHour=function(t,e){return a.inDay(t,e)&&t.getHours()==e.getHours()},this.past=function(t){return v(t)&&t.getTime()<o.getTime()?t:null},this.future=function(t){return v(t)&&t.getTime()>o.getTime()?t:null},this.between=function(t,e,n){return v(t)?(e=(v(e)?e:t).getTime(),n=(v(n)?n:t).getTime(),e<=t.getTime()&&t.getTime()<=n?t:null):null},this.minTime=function(t){return t?I(t):null},this.isoTime=function(t){return t?E(t):null},this.acTime=function(t){return t&&t.replace(/(\d\d)(\d+)$/g,"$1:$2").replace(/[^\d\:]/g,e)},this.toTime=function(t){t=t&&l(t);return s(t)?T(new Date,t[0],t[1],t[2],t[3]):null},this.fmtTime=function(t){let e=t&&l(t);return s(e)?(e[0]=f(e[0],0,23),e[1]=h(e[1]),e[2]&&(e[2]=h(e[2])),e.map(c).join(":")):null},this.enDate=function(t){return t?x(l(t)):null},this.isoEnDate=function(t){return v(t)?D(t):null},this.isoEnDateTime=function(t){return v(t)?D(t)+" "+E(t):null},this.fmtEnDate=function(t){return u(t)?b(l(t)).map(c).join("-"):null},this.acEnDate=function(t){return t&&t.replace(/^(\d{4})(\d+)$/g,"$1-$2").replace(/^(\d{4}\-\d\d)(\d+)$/g,"$1-$2").replace(/[^\d\-]/g,e)},this.esDate=function(t){return t?x(d(l(t))):null},this.isoEsDate=function(t){return v(t)?A(t):null},this.isoEsDateTime=function(t){return v(t)?A(t)+" "+E(t):null},this.fmtEsDate=function(t){return u(t)?d(b(d(l(t)))).map(c).join("/"):null},this.acEsDate=function(t){return t&&t.replace(/^(\d\d)(\d+)$/g,"$1/$2").replace(/^(\d\d\/\d\d)(\d+)$/g,"$1/$2").replace(/[^\d\/]/g,e)}}function DomBox(){const o=this,r="hide",n=document.createElement("div"),e=document.createElement("textarea");let i;function t(t){console.log("Log:",t)}function s(t){return t?t.length:0}function u(t){return t&&1===t.nodeType}function a(t){return t?t.split(/\s+/):[]}function l(t,e,n){t.matches(e)&&n.push(t)}function c(t,e){return u(e)?e:s(e)?e[t]:null}this.get=function(t,e){return(e||document).querySelector(t)},this.getAll=function(t,e){return(e||document).querySelectorAll(t)},this.closest=function(t,e){return e&&e.closest(t)},this.toArray=function(){return i?Array.from(i):[]},this.set=function(t){return delete i,i=t,o},this.load=function(t,e){return t?"string"==typeof t||t instanceof String?o.set(o.getAll(t,e)):o.set(t):o},this.getNavLang=function(){return navigator.language||navigator.userLanguage},this.getLang=function(){return document.documentElement.getAttribute("lang")||o.getNavLang()},this.redir=function(t,e){return t&&window.open(t,e||"_blank"),o},this.unescape=function(t){return e.innerHTML=t,e.value},this.escape=function(t){return n.innerHTML=t,n.innerHTML},this.buildPath=function(t,e){e=e||window.location.pathname;let n=new URLSearchParams(t),r=new URLSearchParams(window.location.search);return n.forEach((t,e)=>r.set(e,t)),e+"?"+r.toString()},this.scroll=function(t,e){return e=e||window,(t=t||e.document.body).scrollIntoView({behavior:"smooth"}),o},this.fetch=function(r){return(r=r||{}).headers=r.headers||{},r.reject=r.reject||t,r.resolve=r.resolve||t,r.headers["x-requested-with"]="XMLHttpRequest",r.headers.Authorization="Bearer "+window.localStorage.getItem("jwt"),window.fetch(r.action,r).then(t=>{let e=t.headers.get("content-type")||"",n=-1<e.indexOf("application/json")?t.json():t.text();return n.then(t.ok?r.resolve:r.reject)})},this.each=function(e,n){if(u(n=n||i))e(n,0);else{var r=s(n);for(let t=0;t<r;t++)e(n[t],t,n)}return o},this.forEach=function(t,e){return o.each(e,o.getAll(t))},this.reverse=function(e,n){if(u(n=n||i))e(n,0);else for(let t=s(n)-1;-1<t;t--)e(n[t],t,n);return o},this.inverse=function(t,e){return o.reverse(e,o.getAll(t))},this.first=function(t){return c(0,t||i)},this.elem=function(t,e){return c(t,e||i)},this.last=function(t){return c(s(t=t||i)-1,t)},this.findIndex=function(e,n){if(u(n=n||i))return n.matches(e)?0:-1;var r=s(n);for(let t=0;t<r;t++)if(n[t].matches(e))return t;return-1},this.find=function(t,e){return u(e=e||i)?e.matches(t)?e:null:e[o.findIndex(t,e)]},this.filter=function(e,t){let n=[];return o.each(t=>l(t,e,n),t),n};function d(t){return t.offsetWidth||t.offsetHeight||t.getClientRects().length}function f(e,n,r){for(let t=e.previousElementSibling;t;t=t.previousElementSibling)l(t,n,r)}function h(e,n,r){for(let t=e.nextElementSibling;t;t=t.nextElementSibling)l(t,n,r)}function m(e,n){for(let t=e.previousElementSibling;t;t=t.previousElementSibling)n.push(t)}function g(e,n){for(let t=e.nextElementSibling;t;t=t.nextElementSibling)n.push(t)}function p(t,e){return"SELECT"===t.tagName?(e=e||t.getAttribute("value"),t.selectedIndex=e?o.findIndex("[value='"+e+"']",t.options):0):t.value=e,o}this.inputs=function(t){return o.getAll("input,textarea,select",t)},this.focus=function(t){return t&&t.focus(),o},this.setFocus=function(t){return o.reverse(t=>{d(t)&&t.matches(":not([type=hidden],[readonly],[disabled],[tabindex='-1'])")&&t.focus()},o.inputs(t))},this.prev=function(e,t){let n=[];return e?o.each(t=>f(t,e,n),t):o.each(t=>m(t,n),t),n},this.next=function(e,t){let n=[];return e?o.each(t=>h(t,e,n),t):o.each(t=>g(t,n),t),n},this.siblings=function(e,t){let n=[];return e?o.each(t=>function(t,e,n){f(t,e,n),h(t,e,n)}(t,e,n),t):o.each(t=>function(t,e){m(t,e),g(t,e)}(t,n),t),n},this.getValue=function(t){return t&&t.value},this.findValue=function(t,e){return o.getValue(o.get(t,e))},this.val=function(e,t){return o.each(t=>p(t,e),t)},this.setValue=function(t,e,n){return o.val(e,o.getAll(t,n))},this.getAttr=function(t,e){return t&&t.getAttribute(e)},this.attr=function(e,n,t){return o.each(t=>t.setAttribute(e,n),t)},this.setAttr=function(t,e,n,r){return o.attr(e,n,o.getAll(t,r))},this.getText=function(t){return t&&t.innerText},this.findText=function(t,e){return o.getText(o.get(t,e))},this.text=function(e,t){return e=e||"",o.each(t=>{t.innerText=e},t)},this.setText=function(t,e,n){return o.text(e,o.getAll(t,n))},this.getHtml=function(t){return t&&t.innerHTML},this.findHtml=function(t,e){return o.getHtml(o.get(t,e))},this.html=function(e,t){return e=e||"",o.each(t=>{t.innerHTML=e},t)},this.setHtml=function(t,e,n){return o.html(e,o.getAll(t,n))},this.replace=function(e,t){return o.each(t=>{t.outerHTML=e},t)},this.empty=function(t){return!t.innerHTML||""===t.innerHTML.trim()},this.add=function(e,t){return o.each(t=>e.appendChild(t),t)},this.append=function(t,e){return n.innerHTML=t,o.each(t=>o.add(t,n.childNodes),e||document.body)},this.mask=function(n,r,t){return o.each((t,e)=>t.classList.toggle(n,r>>e&1),t)},this.optText=function(t){return t?o.getText(t.options[t.selectedIndex]):null},this.select=function(n,t){return o.each(t=>{var e=o.mask(r,~n,t.options).get("[value='"+t.value+"']",t);o.hasClass(r,e)&&(t.selectedIndex=o.findIndex(":not(.hide)",t.options))},t)},this.import=function(t,r,i){return i=i||{},r?o.each((t,e)=>{let n=i[t.name];n?t.value=n(r[t.name],r,e):p(t,r[t.name]??t.value)},t):o.val("",t)},this.export=function(t,r,i){return r=r||{},i=i||{},o.each((t,e)=>{let n=i[t.name];r[t.name]=n?n(t.value,r,e):t.value},t),delete r.undefined,r};const v={};function b(t,e,n,r){return e.addEventListener(t,t=>r(e,n,t)||t.preventDefault()),o}this.render=function(t,e){return t.id=t.id||"_"+Math.random().toString(36).substr(2,9),v[t.id]=v[t.id]||t.innerHTML,t.innerHTML=e(v[t.id]),t.classList.toggle(r,!t.innerHTML),o},this.format=function(t,e){return o.each(o.render,e)},this.reformat=function(t,e){return o.format(e,o.getAll(t))},this.isVisible=function(t){return t&&d(t)},this.visible=function(t,e){return o.isVisible(dom.get(t,e))},this.show=function(t,e){return e=e||"block",o.each(t=>{t.style.display=e},t)},this.hide=function(t){return o.each(t=>{t.style.display="none"},t)},this.hasClass=function(t,e){const n=o.first(e);return n&&a(t).some(t=>n.classList.contains(t))},this.setClass=function(e,t){return o.each(t=>{t.className=e},t)},this.addClass=function(t,e){const n=a(t);return o.each(function(e){n.forEach(t=>e.classList.add(t))},e)},this.addStyle=function(t,e,n){return o.addClass(e,o.getAll(t,n))},this.removeClass=function(t,e){const n=a(t);return o.each(function(e){n.forEach(t=>e.classList.remove(t))},e)},this.removeStyle=function(t,e,n){return o.removeClass(e,o.getAll(t,n))},this.toggle=function(t,n,e){const r=a(t);return o.each(e=>r.forEach(t=>e.classList.toggle(t,n)),e)},this.toggleClass=function(t,e,n,r){return o.toggle(e,n,o.getAll(t,r))},this.toggleHide=function(t,e,n){return o.toggleClass(t,r,e,n)},this.swap=function(t,e){const n=a(t);return o.each(e=>n.forEach(t=>e.classList.toggle(t)),e)},this.swapClass=function(t,e,n){return o.swap(e,o.getAll(t,n))},this.swapHide=function(t,e){return o.swapClass(t,r,e)},this.css=function(t,e,n){const r=t.replace(/(-[a-z])/,t=>t.replace("-","").toUpperCase());return o.each(t=>{t.style[r]=e},n)},this.event=function(n,r,t){return o.each((t,e)=>b(n,t,e,r),t)},this.addEvent=function(t,e,n){return o.event(t,n,o.getAll(e))},this.ready=function(t){return b("DOMContentLoaded",document,0,t)},this.click=function(n,t){return o.each((t,e)=>b("click",t,e,n),t)},this.onclick=function(t,e){return o.click(e,o.getAll(t))},this.change=function(n,t){return o.each((t,e)=>b("change",t,e,n),t)},this.onchange=function(t,e){return o.change(e,o.getAll(t))},this.keyup=function(n,t){return o.each((t,e)=>b("keyup",t,e,n),t)},this.onkeyup=function(t,e){return o.keyup(e,o.getAll(t))},this.keydown=function(n,t){return o.each((t,e)=>b("keydown",t,e,n),t)},this.onkeydown=function(t,e){return o.keydown(e,o.getAll(t))},this.submit=function(n,t){return o.each((t,e)=>b("submit",t,e,n),t)},this.onsubmit=function(t,e){return o.submit(e,o.getAll(t))},this.trigger=function(e,t){return o.each(t=>t.dispatchEvent(new Event(e)),t)}}function GraphBox(){const u=[];this.graph=function(e,n){return n=Object.assign({id:0,level:0,childnodes:[]},n),u.slice(0),pkName=n.pk||"id",fkName=n.fk||"parent",fnGroup=n.onGroup||fnTrue,n.data=e.filter(t=>!t[fkName]),n.data.forEach(t=>{!function e(n,t,r){if(!(-1<u.indexOf(r))){u.push(r);var i=newNode(t,n.filter(t=>t[fkName]==r),r);return i&&i.data.forEach(t=>{e(n,i,t[pkName])}),i}}(e,n,t[pkName])}),n},this.bfs=function(r,i){u.slice(0),u.push(r.id);for(var t=[r];0<t.length;){let n=t.shift();t=n.childnodes.filter((t,e)=>{return u.indexOf(t.id)<0&&i(r,n,t,e)?u.push(t.id):0}).concat(t)}return r},this.findVertex=function(t,e){return u.slice(0),function e(n,r,i){if(-1<u.indexOf(r.id))return null;u.push(r.id);for(let t=0;!s&&t<r.childnodes.length;t++)var o=r.childnodes[t],s=i(n,r,o,t)?o:e(n,o,i);return s}(t,t,e)}}function I18nBox(){const s=this,i={web:{en:{},es:{}},test:{en:{},es:{}}},o={en:{lang:"en",errForm:"Form validation failed",errRequired:"Required field!",errMinlength8:"The minimum required length is 8 characters",errMaxlength:"Max length exceded",errNif:"Wrong ID format",errCorreo:"Wrong Mail format",errDate:"Wrong date format",errDateLe:"Date must be less or equals than current",errDateGe:"Date must be greater or equals than current",errNumber:"Wrong number format",errGt0:"Price must be great than 0.00 &euro;",errRegex:"Wrong format",errReclave:"Passwords typed do not match",errRange:"Value out of allowed range",errRefCircular:"Circular reference",remove:"Are you sure to delete element?",removeOk:"Element removed successfully!",cancel:"Are you sure to cancel element?",cancelOk:"Element canceled successfully!",unlink:"Are you sure to unlink those elements?",unlinkOk:"Elements unlinked successfully!",linkOk:"Elements linked successfully!",closeText:"close",prevText:"prev",nextText:"next",currentText:"current",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dateFormat:"yy-mm-dd",firstDay:0,toDate:dt.enDate,isoDate:dt.isoEnDate,isoDateTime:dt.isoEnDateTime,fmtDate:dt.fmtEnDate,acDate:dt.acEnDate,toTime:dt.toTime,minTime:dt.minTime,isoTime:dt.isoTime,fmtTime:dt.fmtTime,acTime:dt.acTime,toInt:nb.toInt,isoInt:function(t){return nb.isoInt(t,",")},fmtInt:function(t){return nb.fmtInt(t,",")},toFloat:function(t){return nb.toFloat(t,".")},isoFloat:function(t,e){return nb.isoFloat(t,",",".",e)},fmtFloat:function(t,e){return nb.fmtFloat(t,",",".",e)},fmtBool:function(t){return nb.boolval(t)?"Yes":"No"},val:function(t,e){return t[e+"_en"]||t[e]}},es:{lang:"es",errForm:"Error al validar los campos del formulario",errRequired:"¡Campo obligatorio!",errMinlength8:"La longitud mínima requerida es de 8 caracteres",errMaxlength:"Longitud máxima excedida",errNif:"Formato de NIF / CIF incorrecto",errCorreo:"Formato de E-Mail incorrecto",errDate:"Formato de fecha incorrecto",errDateLe:"La fecha debe ser menor o igual a la actual",errDateGe:"La fecha debe ser mayor o igual a la actual",errNumber:"Valor no numérico",errGt0:"El importe debe ser mayor de 0,00 &euro;",errRegex:"Formato incorrecto",errReclave:"Las claves introducidas no coinciden",errRange:"Valor fuera del rango permitido",errRefCircular:"Referencia circular",remove:"¿Confirma que desea eliminar este registro?",removeOk:"Registro eliminado correctamente.",cancel:"¿Confirma que desea cancelar este registro?",cancelOk:"Elemento cancelado correctamente.",unlink:"¿Confirma que desea desasociar estos registros?",unlinkOk:"Registros desasociados correctamente",linkOk:"Registros asociados correctamente.",closeText:"cerrar",prevText:"prev.",nextText:"sig.",currentText:"hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],dateFormat:"dd/mm/yy",firstDay:1,toDate:dt.esDate,isoDate:dt.isoEsDate,isoDateTime:dt.isoEsDateTime,fmtDate:dt.fmtEsDate,acDate:dt.acEsDate,toTime:dt.toTime,minTime:dt.minTime,isoTime:dt.isoTime,fmtTime:dt.fmtTime,acTime:dt.acTime,toInt:nb.toInt,isoInt:function(t){return nb.isoInt(t,".")},fmtInt:function(t){return nb.fmtInt(t,".")},toFloat:function(t){return nb.toFloat(t,",")},isoFloat:function(t,e){return nb.isoFloat(t,".",",",e)},fmtFloat:function(t,e){return nb.fmtFloat(t,".",",",e)},fmtBool:function(t){return nb.boolval(t)?"Sí":"No"},val:function(t,e){return t[e]}}},u=new Map,n=new Map,e="msgError";let a=o.es;this.getLangs=function(t){return i[t]||o},this.getLang=function(t,e){return s.getLangs(e)[t]||a},this.getI18n=function(t,e){e=s.getLangs(e);return t&&(e[t]||e[t.substr(0,2)])||a},this.setI18n=function(t,e){return a=s.getI18n(t,e),s},this.get=t=>a[t],this.set=function(t,e){return a[t]=e,s},this.format=(t,e)=>sb.format(a,t,e),this.addLang=function(e,n,r){if(r){let t=i[r]=i[r]||{};t[e]=Object.assign(t[e]||{},o[e],n)}else o[e]=Object.assign(o[e]||{},n);return s},this.addLangs=function(t,e){for(const n in t)s.addLang(n,t[n],e);return s},this.toInt=t=>a.toInt(t),this.isoInt=t=>a.isoInt(t),this.fmtInt=t=>a.fmtInt(t),this.toFloat=t=>a.toFloat(t),this.isoFloat1=t=>a.isoFloat(t,1),this.isoFloat=t=>a.isoFloat(t),this.isoFloat3=t=>a.isoFloat(t,3),this.fmtFloat=t=>a.fmtFloat(t),this.toDate=t=>a.toDate(t),this.isoDate=t=>a.isoDate(t),this.fmtDate=t=>a.fmtDate(t),this.acDate=t=>a.acDate(t),this.toTime=t=>a.toTime(t),this.minTime=t=>a.minTime(t),this.isoTime=t=>a.isoTime(t),this.fmtTime=t=>a.fmtTime(t),this.acTime=t=>a.acTime(t),this.fmtBool=t=>a.fmtBool(t),this.confirm=t=>confirm(a[t]),this.val=(t,e)=>a.val(t,e),this.arrval=function(t,e){t=a[t];return t&&t[e]||"-"},this.getMsgs=()=>n,this.getMsg=t=>n.get(t),this.setMsg=(t,e)=>(n.set(t,e),s),this.setOk=t=>s.setMsg("msgOk",t),this.setInfo=t=>s.setMsg("msgInfo",t),this.setWarn=t=>s.setMsg("msgWarn",t),this.getError=t=>t?n.get(t):n.get(e),this.setMsgError=t=>s.setMsg(e,s.get(t)||t),this.setError=(t,e,n)=>s.setMsgError(e).setMsg(t,s.get(n)||n),this.getNumErrors=()=>n.size,this.getData=t=>t?u.get(t):u,this.toData=()=>Object.fromEntries(u),this.toMsgs=()=>Object.fromEntries(n),this.start=function(t,e){return u.clear(),n.clear(),s.setI18n(t,e)},this.valid=function(t,e,n,r){return sb.isset(e)?(u.set(t,e),!0):(s.setError(t,n,r),!1)},this.isOk=()=>!n.has(e),this.isError=t=>t?n.has(t):n.has(e),this.intval=(t,e,n,r,i,o)=>s.valid(t,valid.intval(e,n,r),i,o),this.irange=(t,e,n,r,i,o)=>s.valid(t,valid.range(a.toInt(e),n,r),i,o),this.range=(t,e,n,r,i,o)=>s.valid(t,valid.range(a.toFloat(e),n,r),i,o),this.size=(t,e,n,r,i,o)=>s.valid(t,valid.size(e,n,r),i,o),this.text=(t,e,n,r,i,o)=>s.valid(t,valid.text(e,n,r),i,o),this.gt0=(t,e,n,r)=>s.valid(t,valid.gt0(a.toFloat(e)),n,r),this.required=(t,e,n,r)=>s.valid(t,valid.required(e),n,r),this.regex=(t,e,n,r)=>s.valid(t,valid.regex(e),n,r),this.login=(t,e,n,r)=>s.valid(t,valid.login(e),n,r),this.digits=(t,e,n,r)=>s.valid(t,valid.digits(e),n,r),this.idlist=(t,e,n,r)=>s.valid(t,valid.idlist(e),n,r),this.email=(t,e,n,r)=>s.valid(t,valid.email(e),n,r),this.isDate=(t,e,n,r)=>s.valid(t,a.toDate(e),n,r),this.past=(t,e,n,r)=>s.valid(t,valid.past(a.toDate(e)),n,r),this.future=(t,e,n,r)=>s.valid(t,valid.future(a.toDate(e)),n,r),this.between=(t,e,n,r,i,o)=>s.valid(t,valid.between(e,n,r),i,o),this.geToday=function(t,e,n,r){e=a.toDate(e);return s.valid(t,dt.inDay(dt.sysdate(),e)?e:valid.future(e),n,r)},this.dni=(t,e,n,r)=>s.valid(t,valid.dni(e),n,r),this.cif=(t,e,n,r)=>s.valid(t,valid.cif(e),n,r),this.nie=(t,e,n,r)=>s.valid(t,valid.nie(e),n,r),this.idES=(t,e,n,r)=>s.valid(t,valid.idES(e),n,r),this.iban=(t,e,n,r)=>s.valid(t,valid.iban(e),n,r),this.creditCardNumber=(t,e,n,r)=>s.valid(t,valid.creditCardNumber(e),n,r)}function NumberBox(){const i=this,a=/\D+/g;function o(t){return null!=t}function l(t,e){for(var n=[],r=t.length;e<r;r-=e)n.unshift(t.substr(r-e,e));return 0<r&&n.unshift(t.substr(0,r)),n}function n(t,e){var n="-"==t.charAt(0)?"-":"",t=t.replace(a,"").replace(/^0+(\d+)/,"$1");return t?n+l(t,3).join(e):null}function s(e,n,r,i,o){i=isNaN(i)?2:i;var s=e.lastIndexOf(o),o="-"==e.charAt(0)?"-":"";let u=0<s?e.substr(0,s):e;if(u=0==s?"0":u.replace(a,"").replace(/^0+(\d+)/,"$1"),u){let t=s<0?"0":e.substr(s+1,i);return o+l(u,3).join(n)+r+(s<0?"0".repeat(i):t.padEnd(i,"0"))}return null}this.lt0=function(t){return o(t)&&t<0},this.le0=function(t){return o(t)&&t<=0},this.gt0=function(t){return o(t)&&0<t},this.cmp=function(t,e){return isNaN(t)||isNaN(e)?isNaN(e)?-1:1:t-e},this.round=function(t,e){return e=o(e)?e:2,+(Math.round(t+"e"+e)+"e-"+e)},this.eq2=function(t,e){return o(t)&&i.round(t)==i.round(e)},this.eq3=function(t,e){return o(t)&&i.round(t,3)==i.round(e,3)},this.rand=function(t,e){return Math.random()*(e-t)+t},this.randInt=function(t,e){return Math.floor(i.rand(t,e))},this.toInt=function(t){if(!t)return null;var e="-"==t.charAt(0)?"-":"",t=parseInt(e+t.replace(a,""));return isNaN(t)?null:t},this.isoInt=function(t,e){return o(t)?n(""+t,e):null},this.fmtInt=function(t,e){return t&&n(t,e)},this.intval=function(t){return parseInt(t)||0},this.toFloat=function(t,e){if(!t)return null;var n=t.lastIndexOf(e),e="-"==t.charAt(0)?"-":"";let r=n<0?t:t.substr(0,n);n=n<0?"":"."+t.substr(n+1),n=parseFloat(e+r.replace(a,"")+n);return isNaN(n)?null:n},this.isoFloat=function(t,e,n,r){return o(t)?s(""+i.round(t,r),e,n,r,"."):null},this.fmtFloat=function(t,e,n,r){return t&&s(t,e,n,r,n)},this.floatval=function(t){return parseFloat(t)||0},this.boolval=function(t){return t&&"false"!==t&&"0"!==t}}function StringBox(){const o=this,e=/"|'|&|<|>|\\/g,n={'"':"&#34;","'":"&#39;","&":"&#38;","<":"&#60;",">":"&#62;","\\":"&#92;"};function r(t){return"string"==typeof t||t instanceof String}function s(t){return r(t)?t.trim():t}function u(t){return t?t.length:0}function i(t){for(var e="",n=u(s(t)),r=0;r<n;r++){var i=t.charAt(r),o="àáâãäåāăąÀÁÂÃÄÅĀĂĄÆßèéêëēĕėęěÈÉĒĔĖĘĚìíîïìĩīĭÌÍÎÏÌĨĪĬòóôõöōŏőøÒÓÔÕÖŌŎŐØùúûüũūŭůÙÚÛÜŨŪŬŮçÇñÑþÐŔŕÿÝ".indexOf(i);e+=o<0?i:"aaaaaaaaaAAAAAAAAAABeeeeeeeeeEEEEEEEiiiiiiiiIIIIIIIIoooooooooOOOOOOOOOuuuuuuuuUUUUUUUUcCnNdDRryY".charAt(o)}return e.toLowerCase()}this.isset=function(t){return null!=t},this.isstr=r,this.trim=s,this.size=u,this.eq=function(t,e){return i(t)==i(e)},this.iiOf=function(t,e){return i(t).indexOf(i(e))},this.substr=function(t,e,n){return t&&t.substr(e,n)},this.indexOf=function(t,e){return t?t.indexOf(e):-1},this.lastIndexOf=function(t,e){return t?t.lastIndexOf(e):-1},this.prevIndexOf=function(t,e,n){return t?t.substr(0,n).lastIndexOf(e):-1},this.starts=function(t,e){return t&&t.startsWith(e)},this.ends=function(t,e){return t&&t.endsWith(e)},this.prefix=function(t,e){return o.starts(t,e)?t:e+t},this.suffix=function(t,e){return o.ends(t,e)?t:t+e},this.trunc=function(t,e){return u(t)>e?t.substr(0,e).trim()+"...":t},this.itrunc=function(t,e){var n=u(t)>e?o.prevIndexOf(t," ",e):-1;return o.trunc(t,n<0?e:n)},this.escape=function(t){return t&&t.replace(e,t=>n[t])},this.unescape=function(t){return t&&t.replace(/&#(\d+);/g,(t,e)=>String.fromCharCode(e))},this.removeAt=function(t,e,n){return e<0?t:t.substr(0,e)+t.substr(e+n)},this.insertAt=function(t,e,n){return t?t.substr(0,n)+e+t.substr(n):e},this.replaceAt=function(t,e,n,r){return n<0?t:t.substr(0,n)+e+t.substr(n+r)},this.replaceLast=function(t,e,n){return t?o.replaceAt(t,n,t.lastIndexOf(e),e.length):n},this.wrapAt=function(t,e,n,r,i){return e<0?t:o.insertAt(o.insertAt(t,r,e),i,e+r.length+n)},this.iwrap=function(t,e,n,r){return e&&o.wrapAt(t,o.iiOf(t,e),e.length,n||"<u><b>",r||"</b></u>")},this.rand=function(t){return Math.random().toString(36).substr(2,t||8)},this.lopd=function(t){return t&&"***"+t.substr(3,4)+"**"},this.toDate=function(t){return t?new Date(t):null},this.split=function(t,e){return t?t.trim().split(e||","):[]},this.minify=function(t){return t&&t.trim().replace(/\s{2}/g,"")},this.lines=function(t){return o.split(t,/[\n\r]+/)},this.words=function(t){return o.split(t,/\s+/)},this.ilike=function(t,e){return-1<o.iiOf(t,e)},this.olike=function(e,t,n){return t.some(function(t){return o.ilike(e[t],n)})},this.alike=function(e,n,t){return o.words(t).some(function(t){return o.olike(e,n,t)})},this.between=function(t,e,n){return n=n??t,(e=e??t)<=t&&t<=n},this.ltr=function(t,e){for(var n=[],r=u(t);e<r;r-=e)n.unshift(t.substr(r-e,e));return 0<r&&n.unshift(t.substr(0,r)),n},this.rtl=function(t,e){for(var n=[],r=u(t),i=0;i<r;i+=e)n.push(t.substr(i,e));return n},this.slices=function(e,n){var r=0,i=[],o=u(e);for(let t=0;r<o&&t<n.length;t++){var s=n[t];i.push(e.substr(r,s)),r+=s}return r<o&&i.push(e.substr(r)),i},this.format=function(r,t,i){return(i=i||{}).empty=i.empty||"",r&&t&&t.replace(/@(\w+);/g,function(t,e){let n=i[e];return(n?n(r[e],r):r[e])??i.empty})}}function TreeBox(){const a=this;var o,s,u;function l(){return!0}function c(t,e){return t.push(e),e}function d(t,e,n){e={id:n,data:e,childnodes:[]};return e.level=t.level+1,u(t,e)?c(t.childnodes,e):null}this.preorder=function(t,e,n){return function e(n,r,i,o){var s=r.childnodes.length;for(let t=0;t<s;t++){var u=r.childnodes[t];i(n,r,u,t)&&e(n,u,i,o),t=o(n,r,u,t)?t:s}return a}(t,t,e,n||l)},this.resume=function(e,t){u=t||l;var n,r=e.length,i=[];0<r&&(n=c(i,e[0]));for(let t=1;t<r;t++){var o=e[t];u(n,o,t,i)&&(n=c(i,o))}return i},this.group=function(t,e,n){return n=Object.assign({id:0,level:0,childnodes:[]},n),u=n.onGroup||l,(n.data=t).forEach(function(r,t){var i=n;e.forEach(function(e,t){var n=r[e];i=i.childnodes.find(t=>t.id==n)||d(i,i.data.filter(t=>t[e]==n),n)||i})}),n},this.tree=function(e,n){return n=Object.assign({id:0,level:0,childnodes:[]},n),o=n.pk||"id",s=n.fk||"parent",u=n.onGroup||l,n.data=e.filter(t=>!t[s]),n.data.forEach(t=>function e(n,t,r){var i=d(t,n.filter(t=>t[s]==r),r);return i&&i.data.forEach(t=>e(n,i,t[o])),i}(e,n,t[o])),n}}function ValidatorBox(){const r=this,s="",e=new Date,n=/"|'|&|<|>|\\/g,i={'"':"&#34;","'":"&#39;","&":"&#38;","<":"&#60;",">":"&#62;","\\":"&#92;"},o=/^\d+$/,u=/^\d+(,\d+)*$/,a=/\w+[^\s@]+@[^\s@]+\.[^\s@]+/,l=/^[\w#@&°!§%;:=\^\/\(\)\?\*\+\~\.\,\-\$]{8,}$/;const c=/^(\d{8})([A-Z])$/,d=/^([ABCDEFGHJKLMNPQRSUVW])(\d{7})([0-9A-J])$/,f=/^[XYZ]\d{7,8}[A-Z]$/;function h(t){return t?t.length:0}function m(t){return t&&t.trim()}function g(t){return t&&t.trim().replace(/\W+/g,s).toUpperCase()}function p(t){return null!=t}function v(t,e,n){return e<=t&&t<=n}function b(t,e){try{return e&&t.test(e)?e:null}catch(t){}return null}function T(t){return t&&t.getTime&&!isNaN(t.getTime())}function y(t){return"TRWAGMYFPDXBNJZSQVHLCKE".charAt(parseInt(t,10)%23)==t.charAt(8)?t:null}this.unescape=function(t){return t?t.replace(/&#(\d+);/g,(t,e)=>String.fromCharCode(e)):null},this.escape=function(t){return t?t.trim().replace(n,t=>i[t]):null},this.text=function(t,e,n){return v(r.escape(t),e,n)?t:null},this.intval=function(t,e,n){return p(t)&&v(parseInt(t)||0,e,n)?t:null},this.range=function(t,e,n){return p(t)&&v(t,e,n)?t:null},this.size=function(t,e,n){return v(h(t=m(t)),e,n)?t:null},this.gt0=function(t){return r.range(t,.001,1e9)},this.required=function(t){return r.size(t,1,1e4)},this.regex=function(t,e){return b(t,m(e))},this.login=function(t){return r.regex(l,t)},this.digits=function(t){return r.regex(o,t)},this.idlist=function(t){return r.regex(u,t)},this.email=function(t){return(t=r.regex(a,t))&&t.toLowerCase()},this.isDate=function(t){return T(t)?t:null},this.past=function(t){return T(t)&&t.getTime()<e.getTime()?t:null},this.future=function(t){return T(t)&&t.getTime()>e.getTime()?t:null},this.between=function(t,e,n){return T(t)&&v(t.getTime(),e.getTime(),n.getTime())?t:null},this.sysdate=function(){return e},this.dni=function(t){return(t=b(c,g(t)))&&y(t)},this.cif=function(t){if(!(t=b(d,g(t))))return null;for(var e=t.match(d),n=e[1],r=e[2],i=e[3],o=0,s=0;s<r.length;s++){var u=parseInt(r[s],10);o+=u=s%2==0?(u*=2)<10?u:parseInt(u/10)+u%10:u}var a=0!==(o%=10)?10-o:o,e="JABCDEFGHI".substr(a,1);return(n.match(/[ABEH]/)?i==a:!n.match(/[KPQS]/)&&i==a||i==e)?t:null},this.nie=function(t){if(!(t=b(f,g(t))))return null;var e=t.charAt(0);return y(("X"==e?0:"Y"==e?1:"Z"==e?2:e)+t.substr(1))},this.idES=function(t){return r.dni(t)||r.cif(t)||r.nie(t)},this.iban=function(t){var e=(t=g(t))&&t.match(/^([A-Z]{2})(\d{2})([A-Z\d]+)$/);if(!e||h(t)!=={AD:24,AE:23,AT:20,AZ:28,BA:20,BE:16,BG:22,BH:22,BR:29,CH:21,CR:22,CY:28,CZ:24,DE:22,DK:18,DO:28,EE:20,ES:24,FI:18,FO:18,FR:27,GB:22,GI:23,GL:18,GR:27,GT:28,HR:21,HU:28,IE:22,IL:23,IS:26,IT:27,JO:30,KW:30,KZ:20,LB:28,LI:21,LT:20,LU:20,LV:21,MC:27,MD:24,ME:22,MK:19,MR:27,MT:31,MU:30,NL:18,NO:15,PK:24,PL:28,PS:29,PT:25,QA:29,RO:24,RS:22,SA:24,SE:24,SI:19,SK:24,SM:27,TN:24,TR:26,AL:28,BY:28,EG:29,GE:22,IQ:23,LC:32,SC:31,ST:25,SV:28,TL:23,UA:29,VA:22,VG:24,XK:20}[e[1]])return null;let n=(e[3]+e[1]+e[2]).replace(/[A-Z]/g,t=>t.charCodeAt(0)-55);var r;s;let i=n.toString(),o=i.slice(0,2);for(let t=2;t<i.length;t+=7)r=o+i.substring(t,t+7),o=parseInt(r,10)%97;return 1===o?t:null},this.getEntidad=function(t){return(t=g(t))?{2080:"Abanca",1544:"Andbank España","0182":"BBVA",9e3:"Banco de España","0186":"Banco Mediolanum","0081":"Banco Sabadell","0049":"Banco Santander","0128":"Bankinter","0065":"Barclays Bank","0058":"BNP Paribas España",2100:"Caixabank","0122":"Citibank España","0154":"Credit Agricole","0019":"Deutsche Bank","0239":"Evo Banco","0162":"HSBC Bank",2085:"Ibercaja Banco",1465:"ING",1e3:"Instituto de crédito oficial",2095:"Kutxabank","0073":"Openbank",2103:"Unicaja Banco",3058:"Cajamar",3085:"Caja Rural",3146:"Novanca","0238":"Banco Pastor"}[t.substr(4,4)]:null},this.creditCardNumber=function(n){if(16!=h(n=g(n)))return null;let r=0,i=!1;for(let e=15;0<=e;e--){let t=+n[e];i&&(t*=2,t-=9<t?9:0),r+=t,i=!i}return r%10==0?n:null},this.generatePassword=function(t,e){return e=e||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_#@&°!§%;:=^/()?*+~.,-$",Array.apply(null,Array(t||10)).map(function(){return e.charAt(Math.random()*e.length)}).join(s)},this.testPassword=function(t){var e=0;return e+=/[A-Z]+/.test(t)?1:0,e+=/[a-z]+/.test(t)?1:0,e+=/[0-9]+/.test(t)?1:0,e+=/[\W]+/.test(t)?1:0,e+=2<e&&8<h(t)}}const ab=new ArrayBox,dt=new DateBox,gb=new GraphBox,nb=new NumberBox,sb=new StringBox,tb=new TreeBox,valid=new ValidatorBox,i18n=new I18nBox,dom=new DomBox;dom.ready(function(){i18n.setI18n(dom.getLang()),dom.animate=function(e,o){return new Promise((r,t)=>{const i="animate__animated animate__"+e;dom.addClass(i,o).event("animationend",function(t,e,n){dom.removeClass(i,o),n.stopPropagation(),r(t)},o)})},dom.cssAnimate=function(t,e){return dom.animate(e,dom.getAll(t))};const t=document.body.lastElementChild;window.onscroll=function(){dom.toggle("hide",this.pageYOffset<80,t)},dom.click(()=>!dom.scroll(),t);const e=t.previousElementSibling;dom.loading=()=>dom.removeClass("hide",e).closeAlerts(),dom.working=()=>dom.animate("fadeOut",e).then(t=>dom.addClass("hide",t));const n=dom.inputs();dom.getInput=t=>dom.find(t,n),dom.getInputs=t=>dom.filter(t,n),dom.moveFocus=t=>dom.focus(dom.getInput(t)),dom.findValue=t=>dom.getValue(dom.getInput(t)),dom.setValue=(t,e)=>dom.val(e,dom.getInputs(t)),dom.setAttr=(t,e,n)=>dom.attr(e,n,dom.getInputs(t)),dom.setDateRange=t=>dom.attr("max",t.value,dom.getInput(".ui-min-"+t.id)).attr("min",t.value,dom.getInput(".ui-max-"+t.id)),dom.setDates=(t,e)=>dom.val(t,e).each(dom.setDateRange,e),dom.setDate=(t,e)=>dom.setDates(e,dom.getInputs(t)),dom.onChangeInput=(t,e)=>dom.change(e,dom.getInputs(t));var r=e.previousElementSibling;const i=dom.getAll(".alert-text",r);function o(t){return dom.removeClass("hide",t.parentNode).animate("fadeIn",t.parentNode)}function s(t){return dom.animate("fadeOut",t.parentNode).then(t=>dom.addClass("hide",t))}function u(t,e){return e?o(t).html(e,t).scroll():dom}function a(t){dom.setText("#counter-"+t.id,Math.abs(t.getAttribute("maxlength")-sb.size(t.value)),t.parentNode)}dom.isOk=i18n.isOk,dom.isError=i18n.isError,dom.showOk=t=>u(i[0],t),dom.showInfo=t=>u(i[1],t),dom.showWarn=t=>u(i[2],t),dom.showError=t=>u(i[3],t),dom.showAlerts=function(t){return t?dom.showOk(t.msgOk).showInfo(t.msgInfo).showWarn(t.msgWarn).showError(t.msgError):dom},dom.closeAlerts=function(){i18n.start();var t=dom.siblings(".ui-errtip",n);return dom.each(s,i).removeClass("ui-error",n).html("",t).addClass("hide",t)},dom.each(t=>{t.firstChild&&o(t)},i).click(s,dom.getAll(".alert-close",r)),dom.setError=function(t){var e=dom.siblings(".ui-errtip",t);return dom.showError(i18n.getError()).addClass("ui-error",t).focus(t).html(i18n.getMsg(t.name),e).removeClass("hide",e)},dom.addError=function(t,e,n){t=dom.getInput(t);return i18n.setError(t.name,e,n),dom.setError(t)},dom.setErrors=function(t){dom.closeAlerts();for(const e in t)dom.addError("[name='"+e+"']",null,t[e]);return dom.showAlerts(t)},dom.each(t=>{t.value=i18n.fmtBool(t.value)},dom.getInputs(".ui-bool")),dom.onChangeInput(".ui-integer",t=>{t.value=i18n.fmtInt(t.value),dom.toggle("texterr",sb.starts(t.value,"-"),t)}),dom.onChangeInput(".ui-float",t=>{t.value=i18n.fmtFloat(t.value),dom.toggle("texterr",sb.starts(t.value,"-"),t)}),dom.onChangeInput(".ui-date",dom.setDateRange),dom.set(dom.getInputs("textarea.counter")).attr("maxlength","600").keyup(a).each(a).set(),dom.isRequired=(t,e,n)=>i18n.required(t.name,t.value,e,n)?dom:dom.setError(t),dom.required=(t,e,n)=>dom.isRequired(dom.getInput(t),e,n),dom.isIntval=(t,e,n,r,i)=>i18n.intval(t.name,t.value,e,n,r,i)?dom:dom.setError(t),dom.intval=(t,e,n,r,i)=>dom.isIntval(dom.getInput(t),e,n,r,i),dom.isIrange=(t,e,n,r,i)=>i18n.irange(t.name,t.value,e,n,r,i)?dom:dom.setError(t),dom.irange=(t,e,n,r,i)=>dom.isIrange(dom.getInput(t),e,n,r,i),dom.isRange=(t,e,n,r,i)=>i18n.range(t.name,t.value,e,n,r,i)?dom:dom.setError(t),dom.range=(t,e,n,r,i)=>dom.isRange(dom.getInput(t),e,n,r,i),dom.isGt0=(t,e,n)=>i18n.gt0(t.name,t.value,e,n)?dom:dom.setError(t),dom.gt0=(t,e,n)=>dom.isGt0(dom.getInput(t),e,n),dom.isGeToday=(t,e,n)=>i18n.geToday(t.name,t.value,e,n)?dom:dom.setError(t),dom.geToday=(t,e,n)=>dom.isGeToday(dom.getInput(t),e,n),dom.onclick(".show-info",t=>!dom.swapClass("i.fas","fa-chevron-double-down fa-chevron-double-up",t).toggleHide(".extra-info-"+t.id));let l=dom.getAll(".tab-content.tab-active"),c=dom.findIndex(".active",l);dom.setFocus(l[c]),dom.getTab=function(t){return c=Math.min(Math.max(t,0),l.length-1),l[c]},dom.setTabs=()=>(l=dom.getAll(".tab-content.tab-active"),dom),dom.goTab=t=>dom.removeClass("active",l).addClass("active",t).setFocus(t).scroll(),dom.showTab=t=>dom.goTab(dom.getTab(t)),dom.viewTab=t=>dom.showTab(dom.findIndex("#tab-"+t,l)),dom.prevTab=()=>dom.showTab(c-1),dom.nextTab=()=>dom.showTab(c+1),dom.progressbar=function(t){const e="step-"+t;return dom.forEach("ul#progressbar li",t=>dom.toggle("active",t.id<=e,t))},dom.onclick("a[href='#prev-tab']",dom.prevTab),dom.onclick("a[href='#next-tab']",dom.nextTab),dom.onclick("a[href^='#tab-']",t=>{t=t.href.substr(t.href.lastIndexOf("-")+1);return!dom.progressbar(t).viewTab(t)});const d=dom.getAll("table.tb-xeco");function f(t){var e=dom.get("tr.tb-data",t);dom.toggle("hide",!e,t.tBodies[0]).toggle("hide",e,t.tBodies[1])}dom.getTable=t=>dom.find(t,d),dom.getTables=t=>dom.filter(t,d),dom.reloadTable=function(t,e,n,r){return n.size=e.length,dom.each(t=>{dom.render(t.tFoot,t=>sb.format(n,t,r)).render(t.tBodies[0],t=>ab.format(e,t,r)),f(t);t=dom.getAll(".sort",t.tHead);dom.removeClass("sort-asc sort-desc",t).addClass("sort-none",t).swap("sort-none sort-"+n.sortDir,dom.find(".sort-"+n.sortBy,t))},dom.getTables(t))},dom.each(f,d),dom.tr=function(t,n){t=dom.getAll(t);return i18n.set("size",t.length),dom.each((t,e)=>{i18n.set("index",e).set("count",e+1),dom.render(t,t=>i18n.format(t,n))},t)},dom.ajax=function(t,e,n){return dom.loading().fetch({action:t,resolve:e||dom.showOk,reject:n||dom.showError}).catch(dom.showError).finally(dom.working)},dom.autocomplete=function(t,r){t=dom.getInputs(t);let i=!1;function e(){return!1}function n(t){return dom.siblings("[type=hidden]",t)}return(r=r||{}).action=r.action||"#",r.minLength=r.minLength||3,r.maxResults=r.maxResults||10,r.delay=r.delay||500,r.open=r.open||e,r.focus=r.focus||e,r.load=r.load||e,r.sort=r.sort||function(t){return t},r.remove=r.remove||e,r.render=r.render||function(){return"-"},r.search=function(t,e){return i},r.select=function(t,e){return r.load(e.item,this,n(this)),!1},r.source=function(n,e){this.element.autocomplete("instance")._renderItem=function(t,e){e=sb.iwrap(r.render(e),n.term);return $("<li>").append("<div>"+e+"</div>").appendTo(t)},dom.ajax(r.action+"?term="+n.term,t=>{e(r.sort(t).slice(0,r.maxResults))})},r.change=function(t,e){e.item||(dom.val("",this).val("",n(this)),r.remove(this))},$(t).autocomplete(r),dom.keydown((t,e,n)=>{i=8==n.keyCode||sb.between(n.keyCode,46,111)||sb.between(n.keyCode,160,223)},t)};const h=dom.get("ul.menu"),m=Array.from(h.children);m.sort((t,e)=>+t.dataset.orden-+e.dataset.orden),m.forEach(t=>{var n=t.dataset.padre;let r=t.dataset.mask??4;if(n){let e=dom.get("li[id='"+n+"']",h);e&&((n=e.dataset.children||0)||(e.innerHTML+='<ul class="sub-menu"></ul>',e.firstElementChild.innerHTML+='<b class="nav-tri"></b>',dom.click(t=>!dom.swap("active",e),e.firstElementChild)),r&=e.dataset.mask??4,e.dataset.children=n+1,e.lastElementChild.appendChild(t))}else h.appendChild(t);dom.toggle("disabled",!(4&r),t.firstElementChild)}),dom.onclick(".sidebar-toggle",t=>!dom.swap("active",h)).removeClass("hide",h)});