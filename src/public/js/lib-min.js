function ArrayBox(){const r=this;function i(){}function l(t,e){return t[e]}function d(t){return t?t.length:0}this.size=d,this.empty=t=>d(t)<1,this.find=(t,e)=>t?t.find(e):null,this.findIndex=(t,e)=>t?t.findIndex(e):-1,this.indexOf=(t,e)=>t?t.indexOf(e):-1,this.intersect=(t,e)=>e?t.filter(t=>-1<e.indexOf(t)):[],this.shuffle=t=>t.sort(()=>.5-Math.random()),this.unique=(e,t)=>t?e.concat(t.filter(t=>e.indexOf(t)<0)):e,this.distinct=(n,i)=>i?n.filter((e,t)=>n.findIndex(t=>e[i]===t[i])==t):n,this.swap=(t,e,n)=>{var i=t[e];return t[e]=t[n],t[n]=i,r},this.eq=(t,n)=>t&&n&&t.every((t,e)=>n[e]==t),this.push=(t,e)=>(t&&t.push(e),r),this.pushAt=(t,e,n)=>(t&&t.splice(n,0,e),r),this.pop=t=>(t&&t.pop(),r),this.popAt=(t,e)=>(t&&t.splice(e,1),r),this.remove=(t,e,n)=>(t&&t.splice(e,n),r),this.reset=t=>(t&&t.splice(0),r),this.get=(t,e)=>t?t[e]:null,this.last=t=>r.get(t,d(t)-1),this.clone=t=>t?t.slice():[],this.sort=function(t,e,n){return t.sort("desc"==e?function(t,e){return n(e,t)}:function(t,e){return n(t,e)}),r},this.each=function(e,n){var i=d(e);for(let t=0;t<i;t++)n(e[t],t,e);return r},this.reverse=function(e,n){for(let t=d(e)-1;-1<t;t--)n(e[t],t,e);return r},this.extract=function(e,n){var i=d(e);for(let t=0;t<i;t++)n(e[t],t)&&e.splice(t--,1);return r},this.flush=function(t,e){e=r.findIndex(t,e);return-1<e&&t.splice(e,1),r},this.toObject=function(t,n){const i={};return t.forEach((t,e)=>{i[t]=n[e]}),i},this.format=function(t,e,s){(s=s||{}).separator=s.separator||"",s.empty=s.empty||"",s.start&&s.start();const n=s.update||i,o=s.getValue||l,a={size:d(t)};t=t.map((i,r)=>(n(i,r),a.index=r,a.count=r+1,e.replace(/@(\w+);/g,function(t,e){const n=s[e];return(n?n(i[e],i,r):o(i,e)??a[e])??s.empty}))).join(s.separator);return s.end&&s.end(),t},this.parse=(t,e)=>t?JSON.parse(t,e):null,this.read=(t,e)=>r.parse(window.sessionStorage.getItem(t),e),this.stringify=t=>function(t){return"string"==typeof t||t instanceof String}(t)?t:JSON.stringify(t),this.ss=function(t,e){return e&&window.sessionStorage.setItem(t,r.stringify(e)),r},this.ls=function(t,e){return e&&window.localStorage.setItem(t,r.stringify(e)),r}}function DateBox(){const l=this,e="",s=new Date,n=/^\d.+$/,i=/\D+/g,r=[31,28,31,30,31,30,31,31,30,31,30,31];function o(t){return t&&t[0]}function a(t){return t&&n.test(t)}function d(t){return t.split(i)}function u(t){return t<10?"0"+t:t}function c(t){var e=t[2];return t[2]=t[0],t[0]=e,t}function h(t,e,n){return Math.min(Math.max(t||0,e),n)}function m(t){return h(t,0,59)}function f(t){return t<100?+(e+parseInt(s.getFullYear()/100)+u(t)):t}function g(t){return 0==(3&t)&&(t%25!=0||0==(15&t))}function p(t,e){return r[e]+(1==e&&g(t))}function v(t){return t&&t.getTime&&!isNaN(t.getTime())}function b(t){return t[0]=f(+t[0]||0),t[1]=h(t[1],1,12),t[2]=h(t[2],1,p(t[0],t[1]-1)),t}function T(t,e,n,i,r){return t.setHours(h(e,0,23),m(n),m(i),r||0),isNaN(t.getTime())?null:t}function I(t){let e=new Date;return t=b(t),e.setFullYear(t[0],t[1]-1,t[2]),T(e,t[3],t[4],t[5],t[6])}function E(t){return o(t)?I(t):null}function x(t){return u(t.getHours())+":"+u(t.getMinutes())}function y(t){return x(t)+":"+u(t.getSeconds())}function w(t){return t.getFullYear()+"-"+u(t.getMonth()+1)+"-"+u(t.getDate())}function D(t){return u(t.getDate())+"/"+u(t.getMonth()+1)+"/"+t.getFullYear()}this.build=I,this.isValid=v,this.sysdate=()=>s,this.toDate=t=>t?new Date(t):null,this.isLeap=t=>t&&g(t.getFullYear()),this.getDays=(t,e)=>Math.round(Math.abs((t-e)/864e5)),this.daysInMonth=t=>t?p(t.getFullYear(),t.getMonth()):0,this.toArray=t=>t?[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]:[],this.addDate=function(t,e){return t&&t.setDate(t.getDate()+e),l},this.addHours=function(t,e){return t&&t.setHours(t.getHours()+e),l},this.addMs=function(t,e){return t&&t.setMilliseconds(t.getMilliseconds()+e),l},this.reset=function(t){return t&&t.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),l},this.toISODateString=t=>(t||s).toISOString().substring(0,10),this.trunc=function(t){return t&&t.setHours(0,0,0,0),l},this.clone=function(t){return new Date((t||s).getTime())},this.randTime=(t,e)=>Math.floor(Math.random()*(e.getTime()-t.getTime())+t.getTime()),this.randDate=(t,e)=>new Date(l.randTime(t,e)),this.getWeek=function(t){t=t||s;var e=new Date(t.getFullYear(),0,1);return Math.ceil((t.getDay()+1+l.getDays(t,e))/7)},this.week=function(t,e){e=e||1;const n=new Date(t,0,1);t=(n.getDay()+6)%7;return n.setDate(n.getDate()+7*e-t),n},this.toWeek=function(t){return t?l.week(+t.substr(0,4),+t.substr(6)):null},this.isoWeek=function(t){return t?t.getFullYear()+"-W"+u(l.getWeek(t)):null},this.toObject=function(t,e){var n=(t=t||s).getDay();let i=t.getFullYear().toString();const r={yyyy:+i,y:+i.substr(0,2),yy:+i.substr(2,2),m:t.getMonth(),d:t.getDate()};return r.mmm=e.monthNamesShort[r.m],r.mmmm=e.monthNames[r.m],r.mm=u(++r.m),r.ddd=e.dayNamesShort[n],r.dddd=e.dayNames[n],r.dd=u(r.d),r.h=t.getHours(),r.hh=u(r.h),r.M=t.getMinutes(),r.MM=u(r.M),r.s=t.getSeconds(),r.ss=u(r.s),r.ms=t.getMilliseconds(),r.t=r.h<12?"a":"p",r.tt=r.t+"m",r},this.diff=function(t,e){if((e=e||s)<t)return l.diff(e,t);const i=l.toArray(e);const r=[0,12,l.daysInMonth(e)-e.getDate()+t.getDate(),24,60,60,1e3];return l.toArray(t).forEach(function t(e,n){i[n]-=e,i[n]<0&&(i[n]+=r[n],t(1,n-1))}),i},this.interval=function(t,e,n,i,r){let s=l.clone(t);r=r||1e3;const o=new Date(s.getTime()+e),a=setInterval(function(){l.addMs(s,r),(!n(s,o)||o<=s)&&(clearInterval(a),i&&i())},r);return l},this.lt=(t,e)=>v(t)&&v(e)&&t.getTime()<e.getTime(),this.le=(t,e)=>v(t)&&v(e)&&t.getTime()<=e.getTime(),this.eq=(t,e)=>v(t)&&v(e)&&t.getTime()==e.getTime(),this.ge=(t,e)=>v(t)&&v(e)&&t.getTime()>=e.getTime(),this.gt=(t,e)=>v(t)&&v(e)&&t.getTime()>e.getTime(),this.cmp=function(t,e){return t&&e?t.getTime()-e.getTime():t?-1:1},this.inYear=(t,e)=>v(t)&&v(e)&&t.getFullYear()==e.getFullYear(),this.inMonth=(t,e)=>l.inYear(t,e)&&t.getMonth()==e.getMonth(),this.inDay=(t,e)=>l.inMonth(t,e)&&t.getDate()==e.getDate(),this.inHour=(t,e)=>l.inDay(t,e)&&t.getHours()==e.getHours(),this.past=t=>l.lt(t,s),this.future=t=>l.gt(t,s),this.geToday=t=>l.inDay(t,s)||l.ge(t,s),this.between=function(t,e,n){return!!v(t)&&(e=(v(e)?e:t).getTime(),n=(v(n)?n:t).getTime(),e<=t.getTime()&&t.getTime()<=n)},this.minTime=t=>t?x(t):null,this.isoTime=t=>t?y(t):null,this.acTime=t=>t&&t.replace(/(\d\d)(\d+)$/g,"$1:$2").replace(/[^\d\:]/g,e),this.toTime=function(t){t=t&&d(t);return o(t)?T(new Date,t[0],t[1],t[2],t[3]):null},this.fmtTime=function(t){let e=t&&d(t);return o(e)?(e[0]=h(e[0],0,23),e[1]=m(e[1]),e[2]&&(e[2]=m(e[2])),e.map(u).join(":")):null},this.enDate=t=>t?E(d(t)):null,this.isoEnDate=t=>v(t)?w(t):null,this.isoEnDateTime=t=>v(t)?w(t)+" "+y(t):null,this.fmtEnDate=t=>a(t)?b(d(t)).map(u).join("-"):null,this.acEnDate=t=>t&&t.replace(/^(\d{4})(\d+)$/g,"$1-$2").replace(/^(\d{4}\-\d\d)(\d+)$/g,"$1-$2").replace(/[^\d\-]/g,e),this.esDate=t=>t?E(c(d(t))):null,this.isoEsDate=t=>v(t)?D(t):null,this.isoEsDateTime=t=>v(t)?D(t)+" "+y(t):null,this.fmtEsDate=t=>a(t)?c(b(c(d(t)))).map(u).join("/"):null,this.acEsDate=t=>t&&t.replace(/^(\d\d)(\d+)$/g,"$1/$2").replace(/^(\d\d\/\d\d)(\d+)$/g,"$1/$2").replace(/[^\d\/]/g,e),Date.prototype.toJSON=function(){return w(this)+"T"+y(this)}}function DomBox(){const v=this,r="",i="hide",n=document.createElement("div"),b=document.createElement("textarea");function t(t){console.log("Log:",t)}function s(t){return t?t.split(/\s+/):[]}function o(t){return sb.isstr(t)?document.querySelectorAll(t):t}function T(t,e){return ab.each(t,e),v}function I(e,t){return t.find(t=>t.matches(e))}function E(e,t){return t.filter(t=>t.matches(e))}this.get=(t,e)=>(e||document).querySelector(t),this.getAll=(t,e)=>(e||document).querySelectorAll(t),this.closest=(t,e)=>e&&e.closest(t),this.sibling=(t,e)=>e&&v.get(t,e.parentNode),this.siblings=(t,e)=>e&&v.getAll(t,e.parentNode),this.getNavLang=()=>navigator.language||navigator.userLanguage,this.getLang=()=>document.documentElement.getAttribute("lang")||v.getNavLang(),this.redir=(t,e)=>(t&&window.open(t,e||"_blank"),v),this.unescape=t=>(b.innerHTML=t,b.value),this.escape=t=>(n.innerHTML=t,n.innerHTML),this.scroll=function(t,e){return e=e||window,(t=t||e.document.body).scrollIntoView({behavior:"smooth"}),v},this.fetch=function(i){return(i=i||{}).headers=i.headers||{},i.reject=i.reject||t,i.resolve=i.resolve||t,i.headers["x-requested-with"]="XMLHttpRequest",i.headers.Authorization="Bearer "+window.localStorage.getItem("jwt"),window.fetch(i.action,i).then(t=>{let e=t.headers.get("content-type")||r,n=-1<e.indexOf("application/json")?t.json():t.text();return n.then(t.ok?i.resolve:i.reject)})},this.copyToClipboard=function(t){return b.value=t,b.select(),document.execCommand("copy"),v},this.each=function(t,e){return t&&(1===t.nodeType?e(t,0):ab.each(o(t),e)),v},this.reverse=(t,e)=>(ab.reverse(t,e),v),this.findIndex=(e,t)=>[...t].findIndex(t=>t.matches(e)),this.find=(t,e)=>I(t,[...e]),this.filter=(t,e)=>E(t,[...e]),this.sort=(t,e)=>[...o(t)].sort(e),this.map=(t,e)=>[...o(t)].map(e),this.values=t=>v.map(t,t=>t.value);const x="input,textarea,select";function e(t){return t.offsetWidth||t.offsetHeight||t.getClientRects().length}function y(t,e){return e=e??r,"SELECT"===t.tagName?t.selectedIndex=v.findIndex("[value='"+e+"']",t.options):t.value=e,v}function a(t,e){return t.innerText=e,v}function l(t,e){return t.innerHTML=e,v}this.inputs=t=>v.getAll(x,t),this.checked=t=>v.getAll("input:checked",t),this.checks=t=>v.getAll("input[type=checkbox]",t),this.check=(t,e)=>v.each(t,t=>{t.checked=e}),this.focus=t=>(t&&t.focus(),v),this.setFocus=t=>v.refocus(v.inputs(t)),this.refocus=function(t){return v.reverse(t,t=>{e(t)&&t.matches(":not([type=hidden],[readonly],[disabled],[tabindex='-1'])")&&t.focus()})},this.getValue=t=>t&&t.value,this.setValue=(t,e)=>t?y(t,e):v,this.val=(t,e)=>v.each(t,t=>y(t,e)),this.getAttr=(t,e)=>t&&t.getAttribute(e),this.setAttr=(t,e,n)=>(t&&t.setAttribute(e,n),v),this.attr=(t,e,n)=>v.each(t,t=>t.setAttribute(e,n)),this.removeAttr=(t,e)=>v.each(t,t=>t.removeAttribute(e)),this.delAttr=(t,e)=>(t&&t.removeAttribute(e),v),this.getText=t=>t&&t.innerText,this.findText=(t,e)=>v.getText(v.get(t,e)),this.setText=(t,e)=>t?a(t,e??r):v,this.text=function(t,e){return e=e??r,v.each(t,t=>a(t,e))},this.getHtml=t=>t&&t.innerHTML,this.findHtml=(t,e)=>v.getHtml(v.get(t,e)),this.setHtml=(t,e)=>t?l(t,e??r):v,this.html=function(t,e){return e=e??r,v.each(t,t=>l(t,e))},this.mask=(t,n,i)=>v.each(t,(t,e)=>t.classList.toggle(i,n>>e&1)),this.swap=(t,e)=>v.mask(t,~e,i),this.optText=t=>t?v.getText(t.options[t.selectedIndex]):null,this.select=function(t,n){return v.each(t,t=>{var e=t.options[t.selectedIndex];v.swap(t.options,n).hasClass(e,i)&&(t.selectedIndex=v.findIndex(":not(.hide)",t.options))})},this.empty=t=>!t||!t.innerHTML||t.innerHTML.trim()===r,this.add=(e,t)=>v.each(t,t=>e.appendChild(t)),this.append=function(e,t){return t=t||document.body,v.each(t,t=>{n.innerHTML=e,v.add(t,n.childNodes)})};const d={};this.setTpl=(t,e)=>(d[t]=e,v),this.loadTemplates=()=>v.each("template[id]",t=>v.setTpl(t.id,t.innerHTML)),this.render=function(t,e){t.id=t.id||"_"+sb.rand();var n=t.dataset.tpl||t.id;return d[n]=d[n]||t.innerHTML,t.innerHTML=e(d[n]),t.classList.toggle(i,!t.innerHTML),v},this.format=(t,e)=>v.each(t,v.render),this.replace=(t,e)=>v.each(t,t=>{t.outerHTML=e}),this.parse=(t,e)=>v.each(t,t=>{t.outerHTML=e(t.outerHTML)}),this.isVisible=t=>t&&e(t),this.visible=(t,e)=>v.isVisible(v.get(t,e)),this.show=t=>v.each(t,t=>t.classList.remove(i)),this.hide=t=>v.each(t,t=>t.classList.add(i)),this.hasClass=(e,t)=>e&&s(t).some(t=>e.classList.contains(t)),this.addClass=function(t,e){const n=s(e);return v.each(t,e=>{n.forEach(t=>e.classList.add(t))})},this.removeClass=function(t,e){const n=s(e);return v.each(t,e=>{n.forEach(t=>e.classList.remove(t))})},this.toggle=function(t,e,n){const i=s(e);return v.each(t,e=>i.forEach(t=>e.classList.toggle(t,n)))},this.toggleHide=function(t,e){return v.toggle(t,i,e)},this.css=function(t,e,n){const i=e.replace(/(-[a-z])/,t=>t.replace("-",r).toUpperCase());return v.each(t,t=>{t.style[i]=n})};const w="change";function D(e,t,n,i){return e.addEventListener(t,t=>i(e,t,n)||t.preventDefault()),v}function k(t,e,n){return t?D(t,e,0,n):v}function A(t,n,i){return T(t,(t,e)=>D(t,n,e,i))}this.event=(t,n,i)=>v.each(t,(t,e)=>D(t,n,e,i)),this.trigger=(t,e)=>(t&&t.dispatchEvent(new Event(e)),v),this.ready=t=>D(document,"DOMContentLoaded",0,t),this.click=(t,n)=>v.each(t,(t,e)=>D(t,"click",e,n)),this.onClickElem=(t,e)=>k(v.get(t),"click",e),this.onclick=this.onClick=v.click,this.change=(t,n)=>v.each(t,(t,e)=>D(t,w,e,n)),this.onchange=this.onChange=v.change,this.keyup=(t,n)=>v.each(t,(t,e)=>D(t,"keyup",e,n)),this.onkeyup=this.onKeyup=v.keyup,this.keydown=(t,n)=>v.each(t,(t,e)=>D(t,"keydown",e,n)),this.onkeydown=this.onKeydown=v.keydown,this.submit=(t,n)=>v.each(t,(t,e)=>D(t,"submit",e,n)),this.onsubmit=this.onSubmit=v.submit,this.ready(function(){var t=v.getAll("table,form,"+x);const e=v.filter("table",t),n=v.filter("form",t),i=v.filter(x,t);function r(t){return sb.isstr(t)?I(t,e):t}function s(t){return sb.isstr(t)?E(t,e):t}function o(t){return sb.isstr(t)?I(t,n):t}function a(t){return sb.isstr(t)?E(t,n):t}function l(t){return sb.isstr(t)?I(t,i):t}function d(t){return sb.isstr(t)?E(t,i):t}function u(t){var e=v.get("tr.tb-data",t);return v.toggle(t.tBodies[0],"hide",!e).toggle(t.tBodies[1],"hide",e)}function c(t,e,n){v.removeClass(t,"sort-asc sort-desc").addClass(t,"sort-none").toggle(e,"sort-none sort-"+n)}function h(l){const d=nb.intval(l.dataset.pageSize),u=v.get(".pagination",l.parentNode);if(u&&0<d){l.dataset.page=nb.intval(l.dataset.page);let a=Math.ceil(l.dataset.total/d);!function n(e){let i="";function t(t,e){t=nb.range(t,0,a-1),i+='<a href="#" data-page="'+t+'">'+e+"</a>"}function r(t){t=nb.range(t,0,a-1),i+='<a href="#" data-page="'+t+'"',i+=t==e?' class="active">':">",i+=t+1+"</a>"}let s=0;t(e-1,"&laquo;"),1<a&&r(0),s=Math.max(e-3,1),2<s&&t(s-1,"...");for(var o=Math.min(e+3,a-1);s<=o;)r(s++);s<a-1&&t(s,"..."),s<a&&r(a-1),t(e+1,"&raquo;"),u.innerHTML=i,v.click(v.getAll("a",u),t=>{var e=+t.dataset.page,t={index:e*d,length:d};n(e),l.dataset.page=e,l.dispatchEvent(new CustomEvent("pagination",{detail:t}))})}(l.dataset.page)}return v}function m(t,e,n){return v.render(t.tFoot,t=>sb.format(e,t,n))}function f(r,s,o,a){return(a=a||{}).getValue=a.getValue||i18n.val,o.size=s.length,o.total=o.total??(+r.dataset.total||s.length),v.render(r.tBodies[0],t=>ab.format(s,t,a)),m(r,o,a),v.click(v.getAll("a[href='#find']",r),(t,e,n)=>{r.dispatchEvent(new CustomEvent("find",{detail:s[n]}))}),v.click(v.getAll("a[href='#select']",r),(t,e,n)=>{r.dispatchEvent(new CustomEvent("select",{detail:n}))}),v.click(v.getAll("a[href='#remove']",r),(t,e,n)=>{var i=a.remove||"remove";i18n.confirm(i)&&(o.total--,n=s.splice(n,1)[0],r.dispatchEvent(new CustomEvent("remove",{detail:n})))}),r.dispatchEvent(new Event("render")),u(r)}function g(t,e,n,i){return f(t,e,n,i),h(t)}function p(t,e,n,i){var r=n.sort||sb.cmp;return ab.sort(e,t.dataset.sortDir,r),f(t,e,n,i)}v.getTable=r,v.getTables=s,v.getForm=o,v.getForms=a,v.getInput=l,v.getInputs=t=>d(t)||i,v.moveFocus=t=>v.focus(l(t)),v.getVal=t=>v.getValue(l(t)),v.setVal=(t,e)=>v.val(d(t),e),v.setValueInput=(t,e)=>v.setValue(l(t),e),v.copyVal=(t,e)=>v.setValueInput(t,v.getVal(e)),v.getOptText=t=>v.optText(l(t)),v.setAttrInput=(t,e,n)=>v.setAttr(l(t),e,n),v.setAttrInputs=(t,e,n)=>v.attr(d(t),e,n),v.delAttrInput=(t,e)=>v.delAttr(l(t),e),v.delAttrInputs=(t,e)=>v.removeAttr(d(t),e),v.setInput=(t,e,n)=>{t=l(t);return t&&(D(t,w,0,n),y(t,e)),v},v.onChangeForm=(t,e)=>k(o(t),w,e),v.onSubmitForm=(t,e)=>k(o(t),"submit",e),v.onChangeForms=(t,e)=>A(a(t),w,e),v.onSubmitForms=(t,e)=>A(a(t),"submit",e),v.onChangeInput=(t,e)=>k(l(t),w,e),v.onChangeInputs=(t,e)=>A(d(t),w,e),v.refocus(i),v.tr=function(t,n){t=v.getAll(t);return i18n.set("size",t.length),v.each(t,(t,e)=>{i18n.set("index",e).set("count",e+1),v.render(t,t=>i18n.format(t,n))})},v.getCheckRows=t=>v.checks(r(t)),v.getCheckedRows=t=>v.checked(r(t)),v.onFindRow=(t,e)=>k(r(t),"find",e),v.onSelectRow=(t,e)=>k(r(t),"select",e),v.onRemoveRow=(t,e)=>k(r(t),"remove",e),v.onChangeTable=(t,e)=>k(r(t),w,e),v.onChangeTables=(t,e)=>A(s(t),w,e),v.onRenderTable=(t,e)=>k(r(t),"render",e),v.onRenderTables=(t,e)=>A(s(t),"render",e),v.onPaginationTable=(t,e)=>k(r(t),"pagination",e),v.tfoot=function(t,e,n){return(t=r(t))?m(t,e,n):v},v.renderTfoot=v.tfoot,v.rows=function(t,e,n,i){return(t=r(t))?f(t,e,n,i):v},v.renderRows=v.table=v.rows,v.list=function(t,e,n,i){return T(s(t),t=>f(t,e,n,i))},v.renderTable=function(t,e,n,i){return(t=r(t))?g(t,e,n,i):v},v.renderTables=function(t,e,n,i){return T(s(t),t=>g(t,e,n,i))},v.sortTable=function(t,e,n,i){return(t=r(t))?p(t,e,n,i):v},v.sortTables=function(t,e,n,i){return T(s(selector),t=>p(t,e,n,i))},ab.each(e,n=>{const i=v.getAll(".sort",n.tHead);n.dataset.sortDir&&c(i,v.find(".sort-"+n.dataset.sortBy,i),n.dataset.sortDir),v.click(i,t=>{var e=v.hasClass(t,"sort-asc")?"desc":"asc";c(i,t,e),n.dataset.sortDir=e}),u(n),h(n)}),b.style.position="absolute",b.style.left="-9999px",document.body.prepend(b)})}function GraphBox(){const a=[];this.graph=function(e,n){return n=Object.assign({id:0,level:0,childnodes:[]},n),a.slice(0),pkName=n.pk||"id",fkName=n.fk||"parent",fnGroup=n.onGroup||fnTrue,n.data=e.filter(t=>!t[fkName]),n.data.forEach(t=>{!function e(n,t,i){if(!(-1<a.indexOf(i))){a.push(i);var r=newNode(t,n.filter(t=>t[fkName]==i),i);return r&&r.data.forEach(t=>{e(n,r,t[pkName])}),r}}(e,n,t[pkName])}),n},this.bfs=function(i,r){a.slice(0),a.push(i.id);for(var t=[i];0<t.length;){let n=t.shift();t=n.childnodes.filter((t,e)=>{return a.indexOf(t.id)<0&&r(i,n,t,e)?a.push(t.id):0}).concat(t)}return i},this.findVertex=function(t,e){return a.slice(0),function e(n,i,r){if(-1<a.indexOf(i.id))return null;a.push(i.id);for(let t=0;!o&&t<i.childnodes.length;t++)var s=i.childnodes[t],o=r(n,i,s,t)?s:e(n,s,r);return o}(t,t,e)}}function I18nBox(){const r=this,s=new Map,n=new Map,e="msgError",o={},a={en:{lang:"en",errForm:"Form validation failed",errRequired:"Required field!",errMinlength8:"The minimum required length is 8 characters",errMaxlength:"Max length exceded",errNif:"Wrong ID format",errCorreo:"Wrong Mail format",errDate:"Wrong date format",errDateLe:"Date must be less or equals than current",errDateGe:"Date must be greater or equals than current",errNumber:"Wrong number format",errGt0:"Price must be great than 0.00 &euro;",errRegex:"Wrong format",errReclave:"Passwords typed do not match",errRange:"Value out of allowed range",errRefCircular:"Circular reference",remove:"Are you sure to delete this element?",removeOk:"Element removed successfully!",cancel:"Are you sure to cancel element?",cancelOk:"Element canceled successfully!",unlink:"Are you sure to unlink those elements?",unlinkOk:"Elements unlinked successfully!",linkOk:"Elements linked successfully!",closeText:"close",prevText:"prev",nextText:"next",currentText:"current",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dateFormat:"yy-mm-dd",firstDay:0,toDate:dt.enDate,isoDate:dt.isoEnDate,isoDateTime:dt.isoEnDateTime,fmtDate:dt.fmtEnDate,acDate:dt.acEnDate,toTime:dt.toTime,minTime:dt.minTime,isoTime:dt.isoTime,fmtTime:dt.fmtTime,acTime:dt.acTime,toInt:nb.toInt,isoInt:nb.enIsoInt,fmtInt:nb.enFmtInt,toFloat:nb.enFloat,isoFloat:nb.enIsoFloat,fmtFloat:nb.enFmtFloat,fmtBool:nb.enBool,val:sb.enVal},es:{lang:"es",errForm:"Error al validar los campos del formulario",errRequired:"¡Campo obligatorio!",errMinlength8:"La longitud mínima requerida es de 8 caracteres",errMaxlength:"Longitud máxima excedida",errNif:"Formato de NIF / CIF incorrecto",errCorreo:"Formato de E-Mail incorrecto",errDate:"Formato de fecha incorrecto",errDateLe:"La fecha debe ser menor o igual a la actual",errDateGe:"La fecha debe ser mayor o igual a la actual",errNumber:"Valor no numérico",errGt0:"El importe debe ser mayor de 0,00 &euro;",errRegex:"Formato incorrecto",errReclave:"Las claves introducidas no coinciden",errRange:"Valor fuera del rango permitido",errRefCircular:"Referencia circular",remove:"¿Confirma que desea eliminar este registro?",removeOk:"Registro eliminado correctamente.",cancel:"¿Confirma que desea cancelar este registro?",cancelOk:"Elemento cancelado correctamente.",unlink:"¿Confirma que desea desasociar estos registros?",unlinkOk:"Registros desasociados correctamente",linkOk:"Registros asociados correctamente.",closeText:"cerrar",prevText:"prev.",nextText:"sig.",currentText:"hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],dateFormat:"dd/mm/yy",firstDay:1,toDate:dt.esDate,isoDate:dt.isoEsDate,isoDateTime:dt.isoEsDateTime,fmtDate:dt.fmtEsDate,acDate:dt.acEsDate,toTime:dt.toTime,minTime:dt.minTime,isoTime:dt.isoTime,fmtTime:dt.fmtTime,acTime:dt.acTime,toInt:nb.toInt,isoInt:nb.esIsoInt,fmtInt:nb.esFmtInt,toFloat:nb.esFloat,isoFloat:nb.esIsoFloat,fmtFloat:nb.esFmtFloat,fmtBool:nb.esBool,val:sb.val}};let l=a.es;this.getLangs=function(t){return o[t]||a},this.getLang=function(t,e){return r.getLangs(e)[t]||l},this.getI18n=function(t,e){e=r.getLangs(e);return t&&(e[t]||e[t.substr(0,2)])||l},this.setI18n=function(t,e){return l=r.getI18n(t,e),r},this.get=t=>l[t],this.tr=t=>l[t]||t,this.set=(t,e)=>(l[t]=e,r),this.format=(t,e)=>sb.format(l,t,e),this.addLang=function(e,n,i){if(i){let t=o[i]=o[i]||{};t[e]=Object.assign(t[e]||{},a[e],n)}else a[e]=Object.assign(a[e]||{},n);return r},this.addLangs=function(t,e){for(const n in t)r.addLang(n,t[n],e);return r},this.toInt=t=>l.toInt(t),this.isoInt=t=>l.isoInt(t),this.fmtInt=t=>l.fmtInt(t),this.toFloat=t=>l.toFloat(t),this.isoFloat1=t=>l.isoFloat(t,1),this.isoFloat=t=>l.isoFloat(t),this.isoFloat3=t=>l.isoFloat(t,3),this.fmtFloat1=t=>l.fmtFloat(t,1),this.fmtFloat=t=>l.fmtFloat(t),this.fmtFloat3=t=>l.fmtFloat(t,3),this.toDate=t=>l.toDate(t),this.isoDate=t=>l.isoDate(t),this.fmtDate=t=>l.fmtDate(t),this.acDate=t=>l.acDate(t),this.toTime=t=>l.toTime(t),this.minTime=t=>l.minTime(t),this.isoTime=t=>l.isoTime(t),this.fmtTime=t=>l.fmtTime(t),this.acTime=t=>l.acTime(t),this.fmtBool=t=>l.fmtBool(t),this.confirm=t=>confirm(r.tr(t)),this.val=(t,e)=>l.val(t,e),this.arrval=function(t,e){t=l[t];return t&&t[e]||"-"},this.getMsgs=()=>n,this.getMsg=t=>n.get(t),this.setMsg=(t,e)=>(n.set(t,e),r),this.setOk=t=>r.setMsg("msgOk",r.tr(t)),this.setInfo=t=>r.setMsg("msgInfo",r.tr(t)),this.setWarn=t=>r.setMsg("msgWarn",r.tr(t)),this.getError=t=>n.get(t||e),this.setMsgError=t=>r.setMsg(e,r.tr(t)),this.setError=(t,e,n)=>r.setMsgError(e).setMsg(t,r.tr(n)),this.getNumMsgs=()=>n.size,this.getData=t=>t?s.get(t):s,this.toData=()=>Object.fromEntries(s),this.toMsgs=()=>Object.fromEntries(n),this.reset=()=>(s.clear(),n.clear(),r),this.start=(t,e)=>r.reset().setI18n(t,e),this.valid=function(t,e,n,i){return sb.isset(e)?(s.set(t,e),!0):(r.setError(t,n,i),!1)},this.isOk=()=>!n.has(e),this.isError=t=>n.has(t||e),this.required=(t,e,n,i)=>r.valid(t,valid.required(e),n,i),this.size10=(t,e,n,i)=>r.valid(t,valid.size10(e),n,i),this.size50=(t,e,n,i)=>r.valid(t,valid.size50(e),n,i),this.size200=(t,e,n,i)=>r.valid(t,valid.size200(e),n,i),this.size300=(t,e,n,i)=>r.valid(t,valid.size300(e),n,i),this.text10=(t,e,n,i)=>r.valid(t,valid.text10(e),n,i),this.text50=(t,e,n,i)=>r.valid(t,valid.text50(e),n,i),this.text200=(t,e,n,i)=>r.valid(t,valid.text200(e),n,i),this.text300=(t,e,n,i)=>r.valid(t,valid.text300(e),n,i),this.text=(t,e,n,i)=>r.valid(t,valid.text(e),n,i),this.fk=(t,e,n,i)=>r.valid(t,valid.fk(e),n,i),this.intval=(t,e,n,i)=>r.valid(t,valid.intval(e),n,i),this.intval3=(t,e,n,i)=>r.valid(t,valid.intval3(e),n,i),this.iGt0=(t,e,n,i)=>r.valid(t,valid.gt0(l.toInt(e)),n,i),this.gt0=(t,e,n,i)=>r.valid(t,valid.gt0(l.toFloat(e)),n,i),this.regex=(t,e,n,i)=>r.valid(t,valid.regex(e),n,i),this.login=(t,e,n,i)=>r.valid(t,valid.login(e),n,i),this.digits=(t,e,n,i)=>r.valid(t,valid.digits(e),n,i),this.idlist=(t,e,n,i)=>r.valid(t,valid.idlist(e),n,i),this.email=(t,e,n,i)=>r.valid(t,valid.email(e),n,i),this.isDate=(t,e,n,i)=>r.valid(t,valid.isDate(e),n,i),this.past=(t,e,n,i)=>r.valid(t,valid.past(e),n,i),this.future=(t,e,n,i)=>r.valid(t,valid.future(e),n,i),this.geToday=(t,e,n,i)=>r.valid(t,valid.geToday(e),n,i),this.dni=(t,e,n,i)=>r.valid(t,valid.dni(e),n,i),this.cif=(t,e,n,i)=>r.valid(t,valid.cif(e),n,i),this.nie=(t,e,n,i)=>r.valid(t,valid.nie(e),n,i),this.idES=(t,e,n,i)=>r.valid(t,valid.idES(e),n,i),this.user=(t,e,n,i)=>r.valid(t,valid.email(e)||valid.idES(e),n,i),this.iban=(t,e,n,i)=>r.valid(t,valid.iban(e),n,i),this.swift=(t,e,n,i)=>r.valid(t,valid.swift(e),n,i),this.creditCardNumber=(t,e,n,i)=>r.valid(t,valid.creditCardNumber(e),n,i)}function NumberBox(){const r=this,s="",o=".";function a(t){return null!=t}function l(t){return t.replace(/\D+/g,s)}function d(t){return l(t).replace(/^0+(\d+)/,"$1")}function u(t){return"-"==t.charAt(0)?"-":s}function c(t,e){for(var n=[],i=t.length;e<i;i-=e)n.unshift(t.substr(i-e,e));return 0<i&&n.unshift(t.substr(0,i)),n}function n(t,e){var n=u(t),t=d(t);return t?n+c(t,3).join(e):null}function h(e,n,i,r,s){r=isNaN(r)?2:r;var o=u(e),s=e.lastIndexOf(s);let a=0<s?e.substr(0,s):e;if(a=0==s?"0":d(a),a){let t=s<0?"0":e.substr(s+1,r);return o+c(a,3).join(n)+i+(s<0?"0".repeat(r):t.padEnd(r,"0"))}return null}this.lt0=t=>a(t)&&t<0,this.le0=t=>a(t)&&t<=0,this.gt0=t=>a(t)&&0<t,this.range=(t,e,n)=>Math.min(Math.max(t,e),n),this.dec=(t,e)=>r.range(t-1,e||0,t),this.inc=(t,e)=>r.range(t+1,0,e),this.between=(t,e,n)=>e<=t&&t<=n,this.cmp=function(t,e){return a(t)&&a(e)?t-e:a(t)?-1:1},this.round=function(t,e){return e=a(e)?e:2,+(Math.round(t+"e"+e)+"e-"+e)},this.eq2=(t,e)=>a(t)&&r.round(t)==r.round(e),this.eq3=(t,e)=>a(t)&&r.round(t,3)==r.round(e,3),this.rand=(t,e)=>Math.random()*(e-t)+t,this.randInt=(t,e)=>Math.floor(r.rand(t,e)),this.toInt=function(t){if(t){t=parseInt(u(t)+l(t));return isNaN(t)?null:t}return null},this.isoInt=(t,e)=>a(t)?n(s+t,e):null,this.enIsoInt=t=>r.isoInt(t,","),this.esIsoInt=t=>r.isoInt(t,o),this.fmtInt=function(t,e){return t&&n(t,e)},this.enFmtInt=t=>r.fmtInt(t,","),this.esFmtInt=t=>r.fmtInt(t,o),this.intval=t=>parseInt(t)||0,this.toFloat=function(t,e){if(t){var n=u(t),i=t.lastIndexOf(e),e=i<0?t:t.substr(0,i),i=i<0?s:o+t.substr(i+1),i=parseFloat(n+l(e)+i);return isNaN(i)?null:i}return null},this.enFloat=t=>r.toFloat(t,o),this.esFloat=t=>r.toFloat(t,","),this.isoFloat=(t,e,n,i)=>a(t)?h(s+r.round(t,i),e,n,i,o):null,this.enIsoFloat=(t,e)=>r.isoFloat(t,",",o,e),this.esIsoFloat=(t,e)=>r.isoFloat(t,o,",",e),this.fmtFloat=function(t,e,n,i){return t&&h(t,e,n,i,n)},this.enFmtFloat=(t,e)=>r.fmtFloat(t,",",o,e),this.esFmtFloat=(t,e)=>r.fmtFloat(t,o,",",e),this.floatval=t=>parseFloat(t)||0,this.boolval=t=>t&&"false"!==t&&"0"!==t,this.enBool=t=>r.boolval(t)?"Yes":"No",this.esBool=t=>r.boolval(t)?"Sí":"No"}function StringBox(){const l=this,e=/"|'|&|<|>|\\/g,n={'"':"&#34;","'":"&#39;","&":"&#38;","<":"&#60;",">":"&#62;","\\":"&#92;"};function i(t){return null!=t}function r(t){return"string"==typeof t||t instanceof String}function a(t){return t?t.length:0}function s(t){for(var e="",n=a(t),i=0;i<n;i++){var r=t.charAt(i),s="àáâãäåāăąÀÁÂÃÄÅĀĂĄÆßèéêëēĕėęěÈÉĒĔĖĘĚìíîïìĩīĭÌÍÎÏÌĨĪĬòóôõöōŏőøÒÓÔÕÖŌŎŐØùúûüũūŭůÙÚÛÜŨŪŬŮçÇñÑþÐŔŕÿÝ".indexOf(r);e+=s<0?r:"aaaaaaaaaAAAAAAAAAABeeeeeeeeeEEEEEEEiiiiiiiiIIIIIIIIoooooooooOOOOOOOOOuuuuuuuuUUUUUUUUcCnNdDRryY".charAt(s)}return e.toLowerCase()}this.isset=i,this.isstr=r,this.size=a,this.trim=t=>r(t)?t.trim():t,this.eq=(t,e)=>s(t)==s(e),this.iiOf=(t,e)=>s(t).indexOf(s(e)),this.upper=t=>t&&t.toUpperCase(t),this.lower=t=>t&&t.toLowerCase(t),this.substr=(t,e,n)=>t&&t.substr(e,n),this.indexOf=(t,e)=>t?t.indexOf(e):-1,this.lastIndexOf=(t,e)=>t?t.lastIndexOf(e):-1,this.prevIndexOf=(t,e,n)=>t?t.substr(0,n).lastIndexOf(e):-1,this.starts=(t,e)=>t&&t.startsWith(e),this.ends=(t,e)=>t&&t.endsWith(e),this.prefix=(t,e)=>l.starts(t,e)?t:e+t,this.suffix=(t,e)=>l.ends(t,e)?t:t+e,this.trunc=(t,e)=>a(t)>e?t.substr(0,e).trim()+"...":t,this.itrunc=function(t,e){var n=a(t)>e?l.prevIndexOf(t," ",e):-1;return l.trunc(t,n<0?e:n)},this.cmp=function(t,e){return i(t)&&i(e)?t<e?-1:e<t?1:0:i(t)?-1:1},this.escape=function(t){return t&&t.replace(e,t=>n[t])},this.unescape=function(t){return t&&t.replace(/&#(\d+);/g,(t,e)=>String.fromCharCode(e))},this.removeAt=(t,e,n)=>e<0?t:t.substr(0,e)+t.substr(e+n),this.insertAt=(t,e,n)=>t?t.substr(0,n)+e+t.substr(n):e,this.replaceAt=(t,e,n,i)=>n<0?t:t.substr(0,n)+e+t.substr(n+i),this.replaceLast=(t,e,n)=>t?l.replaceAt(t,n,t.lastIndexOf(e),e.length):n,this.wrapAt=(t,e,n,i,r)=>e<0?t:l.insertAt(l.insertAt(t,i,e),r,e+i.length+n),this.iwrap=(t,e,n,i)=>e&&l.wrapAt(t,l.iiOf(t,e),e.length,n||"<u><b>",i||"</b></u>"),this.rand=t=>Math.random().toString(36).substr(2,t||8),this.lopd=t=>t&&"***"+t.substr(3,4)+"**",this.toDate=t=>t?new Date(t):null,this.split=(t,e)=>t?t.trim().split(e||","):[],this.minify=t=>t&&t.trim().replace(/\s{2}/g,""),this.toWord=t=>t&&t.trim().replace(/\W+/g,""),this.lines=t=>l.split(t,/[\n\r]+/),this.words=t=>l.split(t,/\s+/),this.ilike=(t,e)=>-1<l.iiOf(t,e),this.olike=(e,t,n)=>t.some(t=>l.ilike(e[t],n)),this.alike=(e,n,t)=>l.words(t).some(t=>l.olike(e,n,t)),this.between=function(t,e,n){return n=n??t,(e=e??t)<=t&&t<=n},this.ltr=function(t,e){const n=[];for(var i=a(t);e<i;i-=e)n.unshift(t.substr(i-e,e));return 0<i&&n.unshift(t.substr(0,i)),n},this.rtl=function(t,e){const n=[];for(var i=a(t),r=0;r<i;r+=e)n.push(t.substr(r,e));return n},this.slices=function(e,n){const i=[];var r=0,s=a(e);for(let t=0;r<s&&t<n.length;t++){var o=n[t];i.push(e.substr(r,o)),r+=o}return r<s&&i.push(e.substr(r)),i},this.val=(t,e)=>t[e],this.enVal=(t,e)=>t[e+"_en"]||t[e],this.format=function(i,t,r){(r=r||{}).empty=r.empty||"";const s=r.getValue||l.val;return t.replace(/@(\w+);/g,(t,e)=>{const n=r[e];return(n?n(i[e],i):s(i,e))??r.empty})},this.entries=function(t,e,n){const i=(n=n||{}).getValue||l.val;let r="";for(const o in t){const a=n[o];var s=a?a(t[o],t):i(t,o);r+=e.replace("@key;",o).replace("@value;",s)}return r}}function TreeBox(){const l=this;var s,o,a;function d(){return!0}function u(t,e){return t.push(e),e}function c(t,e,n){e={id:n,data:e,childnodes:[]};return e.level=t.level+1,a(t,e)?u(t.childnodes,e):null}this.preorder=function(t,e,n){return function e(n,i,r,s){var o=i.childnodes.length;for(let t=0;t<o;t++){var a=i.childnodes[t];r(n,i,a,t)&&e(n,a,r,s),t=s(n,i,a,t)?t:o}return l}(t,t,e,n||d)},this.resume=function(e,t){a=t||d;var n,i=e.length,r=[];0<i&&(n=u(r,e[0]));for(let t=1;t<i;t++){var s=e[t];a(n,s,t,r)&&(n=u(r,s))}return r},this.group=function(t,e,n){return n=Object.assign({id:0,level:0,childnodes:[]},n),a=n.onGroup||d,(n.data=t).forEach(function(i,t){var r=n;e.forEach(function(e,t){var n=i[e];r=r.childnodes.find(t=>t.id==n)||c(r,r.data.filter(t=>t[e]==n),n)||r})}),n},this.tree=function(e,n){return n=Object.assign({id:0,level:0,childnodes:[]},n),s=n.pk||"id",o=n.fk||"parent",a=n.onGroup||d,n.data=e.filter(t=>!t[o]),n.data.forEach(t=>function e(n,t,i){var r=c(t,n.filter(t=>t[o]==i),i);return r&&r.data.forEach(t=>e(n,r,t[s])),r}(e,n,t[s])),n}}function ValidatorBox(){const i=this,e=/"|'|&|<|>|\\/g,n={'"':"&#34;","'":"&#39;","&":"&#38;","<":"&#60;",">":"&#62;","\\":"&#92;"},r=/^\d+$/,s=/^\d+(,\d+)*$/,o=/\w+[^\s@]+@[^\s@]+\.[^\s@]+/,a=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/,l=/^[\w#@&°!§%;:=\^\/\(\)\?\*\+\~\.\,\-\$]{8,}$/;const d=/^[A-Z]{6,6}[A-Z2-9][A-NP-Z0-9]([A-Z0-9]{3,3}){0,1}$/;const u=/^(\d{8})([A-Z])$/,c=/^([ABCDEFGHJKLMNPQRSUVW])(\d{7})([0-9A-J])$/,h=/^[XYZ]\d{7,8}[A-Z]$/;function m(t){return t?t.length:0}function f(t){return t&&t.trim()}function g(t){return t&&t.trim().replace(/\W+/g,"").toUpperCase()}function p(t,e){try{return e&&t.test(e)?e:null}catch(t){}return null}function v(t,e,n){return t=i.escape(t),nb.between(m(t),e,n)?t:null}function b(t){return"TRWAGMYFPDXBNJZSQVHLCKE".charAt(parseInt(t,10)%23)==t.charAt(8)?t:null}this.range=function(t,e,n){return null!=t&&nb.between(t,e,n)?t:null},this.gt0=t=>i.range(t,.001,1e9),this.intval=t=>i.range(nb.intval(t),1,9),this.intval3=t=>i.range(nb.intval(t),1,3),this.intval5=t=>i.range(nb.intval(t),1,5),this.fk=t=>i.range(nb.intval(t),1,1/0),this.size=function(t,e,n){return t=f(t),nb.between(m(t),e,n)?t:null},this.required=t=>i.size(t,1,1e3),this.size10=t=>i.size(t,0,10),this.size50=t=>i.size(t,0,50),this.size200=t=>i.size(t,0,200),this.size300=t=>i.size(t,0,300),this.unescape=t=>t?t.replace(/&#(\d+);/g,(t,e)=>String.fromCharCode(e)):null,this.escape=t=>t?t.trim().replace(e,t=>n[t]):null,this.text10=t=>v(t,0,10),this.text50=t=>v(t,0,50),this.text200=t=>v(t,0,200),this.text300=t=>v(t,0,300),this.text=t=>v(t,0,1e3),this.regex=(t,e)=>p(t,f(e)),this.date=t=>i.regex(a,t),this.login=t=>i.regex(l,t),this.digits=t=>i.regex(r,t),this.idlist=t=>i.regex(s,t),this.swift=t=>i.regex(d,t),this.email=function(t){return(t=i.regex(o,t))&&t.toLowerCase()},this.isDate=function(t){t=dt.toDate(t);return isDate(t)?t:null},this.past=function(t){t=dt.toDate(t);return dt.past(t)?t:null},this.future=function(t){t=dt.toDate(t);return dt.future(t)?t:null},this.geToday=function(t){t=dt.toDate(t);return dt.geToday(t)?t:null},this.dni=function(t){return(t=p(u,g(t)))&&b(t)},this.cif=function(t){if(!(t=p(c,g(t))))return null;for(var e=t.match(c),n=e[1],i=e[2],r=e[3],s=0,o=0;o<i.length;o++){var a=parseInt(i[o],10);s+=a=o%2==0?(a*=2)<10?a:parseInt(a/10)+a%10:a}var l=0!==(s%=10)?10-s:s,e="JABCDEFGHI".substr(l,1);return(n.match(/[ABEH]/)?r==l:!n.match(/[KPQS]/)&&r==l||r==e)?t:null},this.nie=function(t){if(!(t=p(h,g(t))))return null;var e=t.charAt(0);return b(("X"==e?0:"Y"==e?1:"Z"==e?2:e)+t.substr(1))},this.idES=function(t){return i.dni(t)||i.cif(t)||i.nie(t)},this.iban=function(t){var e=(t=g(t))&&t.match(/^([A-Z]{2})(\d{2})([A-Z\d]+)$/);if(!e||m(t)!=={AD:24,AE:23,AT:20,AZ:28,BA:20,BE:16,BG:22,BH:22,BR:29,CH:21,CR:22,CY:28,CZ:24,DE:22,DK:18,DO:28,EE:20,ES:24,FI:18,FO:18,FR:27,GB:22,GI:23,GL:18,GR:27,GT:28,HR:21,HU:28,IE:22,IL:23,IS:26,IT:27,JO:30,KW:30,KZ:20,LB:28,LI:21,LT:20,LU:20,LV:21,MC:27,MD:24,ME:22,MK:19,MR:27,MT:31,MU:30,NL:18,NO:15,PK:24,PL:28,PS:29,PT:25,QA:29,RO:24,RS:22,SA:24,SE:24,SI:19,SK:24,SM:27,TN:24,TR:26,AL:28,BY:28,EG:29,GE:22,IQ:23,LC:32,SC:31,ST:25,SV:28,TL:23,UA:29,VA:22,VG:24,XK:20}[e[1]])return null;let n=(e[3]+e[1]+e[2]).replace(/[A-Z]/g,t=>t.charCodeAt(0)-55),i=n.toString(),r=i.slice(0,2);for(let t=2;t<i.length;t+=7){var s=r+i.substring(t,t+7);r=parseInt(s,10)%97}return 1===r?t:null};const T={2080:"Abanca",1544:"Andbank España","0182":"BBVA",9e3:"Banco de España","0186":"Banco Mediolanum","0081":"Banco Sabadell","0049":"Banco Santander","0128":"Bankinter","0065":"Barclays Bank","0058":"BNP Paribas España",2100:"Caixabank","0122":"Citibank España","0154":"Credit Agricole","0019":"Deutsche Bank","0239":"Evo Banco","0162":"HSBC Bank",2085:"Ibercaja Banco",1465:"ING",1e3:"Instituto de crédito oficial",2095:"Kutxabank","0073":"Openbank",2103:"Unicaja Banco",3058:"Cajamar",3085:"Caja Rural",3146:"Novanca","0238":"Banco Pastor","0487":"Banco Mare Nostrum",2090:"Caja de Ahorros Mediterraneo","0030":"Banco Español de Crédito","0146":"Citibank"};this.getEntidades=()=>T,this.getIban1=t=>sb.substr(t,0,4),this.getIban2=t=>sb.substr(t,4,4),this.getEntidad=t=>T[i.getIban2(t)],this.getIban3=t=>sb.substr(t,8,4),this.getOficina=t=>sb.substr(t,8,4),this.getDC=t=>sb.substr(t,12,2),this.getIban4=t=>sb.substr(t,12,4),this.getIban5=t=>sb.substr(t,16,4),this.getIban6=t=>sb.substr(t,20,4),this.getIban7=t=>sb.substr(t,24,4),this.getIban8=t=>sb.substr(t,28,4),this.creditCardNumber=function(n){if(16!=m(n=g(n)))return null;let i=0,r=!1;for(let e=15;0<=e;e--){let t=+n[e];r&&(t*=2,t-=9<t?9:0),i+=t,r=!r}return i%10==0?n:null},this.generatePassword=function(t,e){return e=e||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_#@&°!§%;:=^/()?*+~.,-$",Array.apply(null,Array(t||10)).map(function(){return e.charAt(Math.random()*e.length)}).join("")},this.testPassword=function(t){var e=0;return e+=/[A-Z]+/.test(t)?1:0,e+=/[a-z]+/.test(t)?1:0,e+=/[0-9]+/.test(t)?1:0,e+=/[\W]+/.test(t)?1:0,e+=2<e&&8<m(t)}}const ab=new ArrayBox,dt=new DateBox,gb=new GraphBox,nb=new NumberBox,sb=new StringBox,tb=new TreeBox,valid=new ValidatorBox,i18n=new I18nBox,dom=new DomBox;dom.ready(function(){i18n.setI18n(dom.getLang());const e=dom.getInputs();dom.animate=function(r,e){return new Promise((n,t)=>{const i="animate__animated animate__"+e;dom.addClass(r,i).event(r,"animationend",(t,e)=>{dom.removeClass(r,i),e.stopPropagation(),n(t)})})},dom.fadeIn=t=>(dom.show(t).animate(t,"fadeIn"),dom),dom.fadeOut=t=>(dom.animate(t,"fadeOut").then(dom.hide),dom);const t=document.body.lastElementChild;window.onscroll=function(){dom.toggle(t,"hide",this.pageYOffset<80)},dom.click(t,t=>!dom.scroll());const n=t.previousElementSibling;dom.loading=()=>dom.show(n).closeAlerts(),dom.working=()=>dom.fadeOut(n);const i=n.previousElementSibling,r=dom.getAll(".alert-text",i);function s(t,e){return e?dom.fadeIn(t.parentNode).html(t,e).scroll():dom}dom.isOk=i18n.isOk,dom.isError=i18n.isError,dom.showOk=t=>s(r[0],t),dom.showInfo=t=>s(r[1],t),dom.showWarn=t=>s(r[2],t),dom.showError=t=>s(r[3],t),dom.showAlerts=function(t){return t?dom.showOk(t.msgOk).showInfo(t.msgInfo).showWarn(t.msgWarn).showError(t.msgError):dom},dom.closeAlerts=function(){i18n.start();var t=dom.getAll(".ui-errtip");return dom.hide(i.children).removeClass(e,"ui-error").html(t,"").hide(t)},dom.each(r,t=>{t.firstChild&&dom.fadeIn(t.parentNode)}).click(dom.getAll(".alert-close",i),t=>dom.fadeOut(t.parentNode)),dom.setError=function(t){var e=dom.sibling(".ui-errtip",t);return dom.showError(i18n.getError()).addClass(t,"ui-error").focus(t).html(e,i18n.getMsg(t.name)).show(e)},dom.addError=function(t,e,n){t=dom.getInput(t);return t?(i18n.setError(t.name,e,n),dom.setError(t)):dom.showError(i18n.setMsgError(e).getError()),dom},dom.setErrors=function(t){if(dom.closeAlerts(),sb.isstr(t))return dom.showError(t);for(const e in t)dom.addError("[name='"+e+"']",null,t[e]);return dom.showAlerts(t)},dom.each(dom.getInputs(".ui-bool"),t=>{t.value=i18n.fmtBool(t.value)}),dom.onChangeInputs(".ui-integer",t=>{t.value=i18n.fmtInt(t.value),dom.toggle(t,"texterr",sb.starts(t.value,"-"))}),dom.onChangeInputs(".ui-float",t=>{t.value=i18n.fmtFloat(t.value),dom.toggle(t,"texterr",sb.starts(t.value,"-"))});var o=dom.getInputs("textarea[maxlength]");function a(t){var e=Math.abs(t.getAttribute("maxlength")-sb.size(t.value));dom.text(dom.sibling(".counter",t),e)}dom.keyup(o,a).each(o,a),dom.isRequired=(t,e,n)=>!t||i18n.required(t.name,t.value,e,n)?dom:dom.setError(t),dom.required=(t,e,n)=>dom.isRequired(dom.getInput(t),e,n),dom.isLogin=(t,e,n)=>!t||i18n.login(t.name,t.value,e,n)?dom:dom.setError(t),dom.login=(t,e,n)=>dom.isLogin(dom.getInput(t),e,n),dom.isEmail=(t,e,n)=>!t||i18n.email(t.name,t.value,e,n)?dom.val(i18n.getData(t.name),t):dom.setError(t),dom.email=(t,e,n)=>dom.isEmail(dom.getInput(t),e,n),dom.isUser=(t,e,n)=>!t||i18n.user(t.name,t.value,e,n)?dom.val(i18n.getData(t.name),t):dom.setError(t),dom.user=(t,e,n)=>dom.isUser(dom.getInput(t),e,n),dom.isIntval=(t,e,n)=>!t||i18n.intval(t.name,t.value,e,n)?dom:dom.setError(t),dom.intval=(t,e,n)=>dom.isIntval(dom.getInput(t),e,n),dom.isGt0=(t,e,n)=>!t||i18n.gt0(t.name,t.value,e,n)?dom:dom.setError(t),dom.gt0=(t,e,n)=>dom.isGt0(dom.getInput(t),e,n),dom.isFk=(t,e,n)=>!t||i18n.fk(t.name,t.value,e,n)?dom:dom.setError(t),dom.fk=(t,e,n)=>dom.isFk(dom.getInput(t),e,n),dom.isPast=(t,e,n)=>!t||i18n.past(t.name,t.value,e,n)?dom:dom.setError(t),dom.past=(t,e,n)=>dom.isPast(dom.getInput(t),e,n),dom.isGeToday=(t,e,n)=>!t||i18n.geToday(t.name,t.value,e,n)?dom:dom.setError(t),dom.geToday=(t,e,n)=>dom.isGeToday(dom.getInput(t),e,n),dom.ajax=function(t,e,n){return dom.loading().fetch({action:t,resolve:e||dom.showOk,reject:n||dom.setErrors}).catch(dom.showError).finally(dom.working)},dom.send=function(t,e,n){var i=new FormData(t);return dom.loading().fetch({action:t.action,method:t.method,body:"multipart/form-data"==t.enctype?i:new URLSearchParams(i),headers:{"Content-Type":t.enctype||"application/x-www-form-urlencoded"},resolve:e||dom.showOk,reject:n||dom.setErrors}).catch(dom.showError).finally(dom.working)},dom.autocomplete=function(t,i){t=dom.getInputs(t);let n=!1;function e(){return!1}function r(t){return dom.get("[type=hidden]",t.parentNode)}return(i=i||{}).action=i.action||"#",i.minLength=i.minLength||3,i.maxResults=i.maxResults||10,i.delay=i.delay||500,i.open=i.open||e,i.focus=i.focus||e,i.load=i.load||e,i.sort=i.sort||(t=>t),i.remove=i.remove||e,i.render=i.render||(()=>"-"),i.search=(t,e)=>n,i.select=function(t,e){return i.load(e.item,this,r(this)),!1},i.source=function(n,e){this.element.autocomplete("instance")._renderItem=function(t,e){e=sb.iwrap(i.render(e),n.term);return $("<li>").append("<div>"+e+"</div>").appendTo(t)},dom.ajax(i.action+"?term="+n.term,t=>{e(i.sort(t).slice(0,i.maxResults))})},i.change=function(t,e){e.item||(dom.val("",this).val("",r(this)),i.remove(this))},$(t).autocomplete(i),dom.keydown(t,(t,e)=>{n=8==e.keyCode||sb.between(e.keyCode,46,111)||sb.between(e.keyCode,160,223)})},dom.reverse(e,t=>{var e=dom.get(".ui-errtip",t.parentNode);dom.empty(e)||dom.addClass(t,"ui-error").focus(t)})}),dom.ready(function(){let s=dom.getAll(".tab-content"),o=dom.findIndex(".active",s);function e(t){var e=s.length-1;t=nb.range(t,0,e);let n=s[o];if(0==t&&0==o)return n.dispatchEvent(new Event("exit")),dom;var i=dom.closeAlerts().getElemId(n.id,50);if(t>o?n.dispatchEvent(new Event("next-"+i)):t<o&&n.dispatchEvent(new Event("prev-"+i)),n.dispatchEvent(new Event(n.id)),dom.isOk()){n=s[t];i=dom.get("#progressbar");if(i){const r="step-"+t;dom.each(i.children,t=>dom.toggle(t,"active",t.id<=r))}o=t,dom.toggleHide("[href='#tab-0']",o<2).toggleHide("[href='#next-tab']",o>=e).toggleHide("[href='#last-tab']",o>=e-1).removeClass(s,"active").addClass(n,"active").setFocus(n).scroll()}return dom}dom.getElemId=(t,e)=>nb.range(+t.substr(t.lastIndexOf("-")+1)||0,0,e),dom.getTab=t=>s[dom.findIndex("#tab-"+t,s)],dom.getTabs=()=>s,dom.setTabs=()=>(s=dom.getAll(".tab-content"),dom),dom.onSaveTab=(t,e)=>dom.event(dom.getTab(t),"save-"+t,e),dom.onPrevTab=(t,e)=>dom.event(dom.getTab(t),"prev-"+t,e),dom.onChangeTab=(t,e)=>dom.event(dom.getTab(t),"tab-"+t,e),dom.onNextTab=(t,e)=>dom.event(dom.getTab(t),"next-"+t,e),dom.onExitTab=t=>dom.event(s[0],"exit",t),dom.isFirstTab=()=>0==o,dom.isLastTab=()=>o==s.length-1,dom.prevTab=()=>e(o-1),dom.nextTab=()=>e(o+1),dom.viewTab=t=>e(dom.findIndex("#tab-"+t,s)),dom.lastTab=()=>e(99),dom.onclick("a[href='#prev-tab']",()=>!dom.prevTab()),dom.onclick("a[href='#next-tab']",()=>!dom.nextTab()),dom.onclick("a[href='#last-tab']",()=>!dom.lastTab()),dom.onclick("a[href^='#tab-']",t=>!dom.viewTab(dom.getElemId(t.href,50))),dom.onClickElem("a[href='#save-tab']",t=>{const e=s[o];var n=dom.getElemId(e.id,50);e.dispatchEvent(new Event("save-"+n))}),dom.onclick(".toggle-angle",t=>!dom.toggle(dom.get("i.fas",t),"fa-angle-double-down fa-angle-double-up").toggleHide(".info-"+t.id)),dom.onclick(".toggle-caret",t=>!dom.toggle(dom.get("i.fas",t),"fa-caret-right fa-caret-down").toggleHide(".info-"+t.id));const r=dom.get("ul.menu"),t=dom.sort(r.children,(t,e)=>+t.dataset.orden-+e.dataset.orden);t.forEach(t=>{var n=t.dataset.padre;let i=t.dataset.mask??4;if(n){let e=dom.get("li[id='"+n+"']",r);e&&((n=+e.dataset.children||0)||(e.innerHTML+='<ul class="sub-menu"></ul>',e.firstElementChild.innerHTML+='<b class="nav-tri"></b>',dom.click(e.firstElementChild,t=>!dom.toggle(e,"active"))),i&=e.dataset.mask??4,e.dataset.children=n+1,e.lastElementChild.appendChild(t))}else r.appendChild(t);dom.toggle(t.firstElementChild,"disabled",!(4&i))}),dom.onclick(".sidebar-toggle",t=>!dom.toggle(r,"active")).show(r)});