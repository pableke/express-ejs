function ArrayBox(){const n=this,r=t=>t?t.length:0;function a(e,s,i,n){let r=0;for(let t=0;t<i.length&&0==r;t++){const a=i[t];r="desc"==n[t]?a(s,e):a(e,s)}return r}Array.prototype.update=function(e){for(let t=0;t<this.length;t++)this[t]=e(this[t],t);return this},Array.prototype.remove=function(t){t=this.findIndex(t);return t<0||this.splice(t,1),this},Array.prototype.swap=function(t,e){var s=this[t];return this[t]=this[e],this[e]=s,this},Array.prototype.stringify=function(t,e,s){t=t??",";let i=(e=e||0)<(s=s<0?this.length+s:s||this.length)?""+this[e++]:"";for(;e<s;)i+=t+this[e++];return i},Array.prototype.format=function(t,r){const a=(r=r||{}).empty||"",o=r.getValue||((t,e)=>t[e]),e=r.onRender||(()=>{}),l={size:this.length};let s="";return this.forEach((i,n)=>{e(i,n),l.index=n,l.count=n+1,s+=t.format((t,e)=>{const s=r[e];return(s?s(i[e],i,n):o(i,e)??l[e])??a})}),s},this.size=r,this.empty=t=>r(t)<1,this.swap=(t,e,s)=>(t&&t.swap(e,s),n),this.mod=(t,e)=>t?t[e%t.length]:null,this.each=function(e,s){var i=r(e);for(let t=0;t<i;t++)s(e[t],t,e);return n},this.reverse=function(e,s){for(let t=r(e)-1;-1<t;t--)s(e[t],t,e);return n},this.find=function(e,s){var i=r(e);for(let t=0;t<i;t++)if(s(e[t],t,e))return e[t];return null},this.findIndex=function(e,s){var i=r(e);for(let t=0;t<i;t++)if(s(e[t],t,e))return t;return-1},this.every=function(t,e){for(var s=r(t),i=0;i<s;i++)i=e(t[i],i)?i:s;return i==s},this.some=(t,e)=>-1<n.findIndex(t,e),this.indexOf=(t,e)=>t?t.indexOf(e):-1,this.intersect=(t,e)=>e?t.filter(t=>-1<e.indexOf(t)):[],this.shuffle=t=>t.sort(()=>.5-Math.random()),this.unique=(e,t)=>t?e.concat(t.filter(t=>e.indexOf(t)<0)):e,this.distinct=(s,i)=>i?s.filter((e,t)=>s.findIndex(t=>e[i]===t[i])==t):s,this.eq=(t,s)=>t&&s&&t.every((t,e)=>s[e]==t),this.push=(t,e)=>(t&&t.push(e),n),this.pop=t=>(t&&t.pop(),n),this.remove=(t,e)=>(t&&t.remove(e),n),this.reset=t=>(t&&t.splice(0),n),this.get=(t,e)=>t?t[e]:null,this.last=t=>n.get(t,r(t)-1),this.clone=t=>t?t.slice():[],this.sort=function(t,e,s){return t.sort("desc"==e?(t,e)=>s(e,t):s),n},this.multisort=function(t,s,i){return i=i||[],t.sort((t,e)=>a(t,e,s,i)),n},this.cmp=function(t,e,s,i){return a(t,e,s,i||[])},this.toObject=function(t,s,i){return i=i||{},t.forEach((t,e)=>{i[t]=s[e]}),i},this.merge=this.toObject,this.copy=function(e,t){let s={};return t.forEach(t=>{s[t]=e[t]}),s},this.assign=this.copy,this.flush=function(t,e){let s=Object.assign({},t);return e.forEach(t=>{delete s[t]}),s},this.clean=this.flush,this.clear=function(t){for(var e in t)delete t[e];return t},this.stringify=(t,e,s,i)=>t.stringify(e,s,i),this.format=(t,e,s)=>t.format(e,s),this.parse=(t,e)=>t?JSON.parse(t,e):null,this.read=(t,e)=>n.parse(window.sessionStorage.getItem(t),e),this.stringify=t=>(t=>"string"==typeof t||t instanceof String)(t)?t:JSON.stringify(t),this.ss=function(t,e){return e&&window.sessionStorage.setItem(t,n.stringify(e)),n},this.ls=function(t,e){return e&&window.localStorage.setItem(t,n.stringify(e)),n}}function DateBox(){const l=this,r=new Date,s=[31,28,31,30,31,30,31,31,30,31,30,31],a=t=>t<10?"0"+t:t,o=(t,e,s)=>Math.min(Math.max(t||0,e),s),h=t=>o(t,0,59),i=t=>0==(3&t)&&(t%25!=0||0==(15&t)),n=t=>t&&t.getTime&&!isNaN(t.getTime());function d(t,e,s,i,n){return t.setHours(o(e,0,23),h(s),h(i),n||0),isNaN(t.getTime())?null:t}function e(t,e,s,i,n,r,a){let o=new Date;return o.setFullYear(t,e-1,s),d(o,i,n,r,a)}function c(t,e,s){return e=(n(e)?e:t).getTime(),s=(n(s)?s:t).getTime(),e<=t.getTime()&&t.getTime()<=s}this.isValid=n,this.sysdate=()=>r,this.toDate=t=>t?new Date(t):null,this.isLeap=t=>t&&i(t.getFullYear()),this.getDays=(t,e)=>Math.round(Math.abs((t-e)/864e5)),this.daysInMonth=t=>t?((t,e)=>s[e]+(1==e&&i(t)))(t.getFullYear(),t.getMonth()):0,this.toArray=t=>t?[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]:[],this.reset=t=>(t?t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()):r.setTime(Date.now()),l),this.addDate=function(t,e){return t&&t.setDate(t.getDate()+e),l},this.addHours=function(t,e){return t&&t.setHours(t.getHours()+e),l},this.addMs=function(t,e){return t&&t.setMilliseconds(t.getMilliseconds()+e),l},this.toISODateString=t=>(t||r).toISOString().substring(0,10),this.trunc=function(t){return t&&t.setHours(0,0,0,0),l},this.endDay=function(t){return t&&t.setHours(23,59,59,999),l},this.randTime=(t,e)=>Math.floor(Math.random()*l.diffDate(e,t)+t.getTime()),this.randDate=(t,e)=>new Date(l.randTime(t,e)),this.rand=()=>l.randDate(new Date(r.getTime()-2592e6),r),this.clone=t=>new Date((t||r).getTime()),this.build=t=>t&&function(t){return e(+t[0],+t[1],+t[2],+t[3]||0,+t[4]||0,+t[5]||0,+t[6]||0)}(t.split(/\D+/)),this.getWeek=function(t){t=t||r;var e=new Date(t.getFullYear(),0,1);return Math.ceil((t.getDay()+1+l.getDays(t,e))/7)},this.week=function(t,e){e=e||1;const s=new Date(t,0,1);t=(s.getDay()+6)%7;return s.setDate(s.getDate()+7*e-t),s},this.toWeek=t=>t?l.week(+t.substr(0,4),+t.substr(6)):null,this.isoWeek=t=>t?t.getFullYear()+"-W"+a(l.getWeek(t)):null,this.toObject=function(t,e){var s=(t=t||r).getDay();let i=t.getFullYear().toString();const n={yyyy:+i,y:+i.substr(0,2),yy:+i.substr(2,2),m:t.getMonth(),d:t.getDate()};return n.mmm=e.monthNamesShort[n.m],n.mmmm=e.monthNames[n.m],n.mm=a(++n.m),n.ddd=e.dayNamesShort[s],n.dddd=e.dayNames[s],n.dd=a(n.d),n.h=t.getHours(),n.hh=a(n.h),n.M=t.getMinutes(),n.MM=a(n.M),n.s=t.getSeconds(),n.ss=a(n.s),n.ms=t.getMilliseconds(),n.t=n.h<12?"a":"p",n.tt=n.t+"m",n},this.diff=function(t,e){if((e=e||r)<t)return l.diff(e,t);const i=l.toArray(e);const n=[0,12,l.daysInMonth(e)-e.getDate()+t.getDate(),24,60,60,1e3];return l.toArray(t).forEach(function t(e,s){i[s]-=e,i[s]<0&&(i[s]+=n[s],t(1,s-1))}),i},this.interval=function(t,e,s,i,n){let r=l.clone(t);n=n||1e3;const a=new Date(r.getTime()+e),o=setInterval(function(){l.addMs(r,n),(!s(r,a)||a<=r)&&(clearInterval(o),i&&i())},n);return l},this.lt=(t,e)=>n(t)&&n(e)&&t.getTime()<e.getTime(),this.le=(t,e)=>n(t)&&n(e)&&t.getTime()<=e.getTime(),this.eq=(t,e)=>n(t)&&n(e)&&t.getTime()==e.getTime(),this.ge=(t,e)=>n(t)&&n(e)&&t.getTime()>=e.getTime(),this.gt=(t,e)=>n(t)&&n(e)&&t.getTime()>e.getTime(),this.multicmp=t=>t.map(s=>(t,e)=>l.cmp(t[s],e[s])),this.diffDate=(t,e)=>t.getTime()-e.getTime(),this.cmp=function(t,e){return t&&e?l.diffDate(t,e):t?-1:1},this.inYear=(t,e)=>n(t)&&n(e)&&t.getFullYear()==e.getFullYear(),this.inMonth=(t,e)=>l.inYear(t,e)&&t.getMonth()==e.getMonth(),this.inDay=(t,e)=>l.inMonth(t,e)&&t.getDate()==e.getDate(),this.inHour=(t,e)=>l.inDay(t,e)&&t.getHours()==e.getHours(),this.geToday=t=>l.inDay(t,r)||l.ge(t,r),this.future=t=>l.gt(t,r),this.past=t=>l.lt(t,r),this.in=(t,e,s)=>!n(t)||c(t,e,s),this.between=(t,e,s)=>n(t)&&c(t,e,s);const u=t=>a(t.getHours())+":"+a(t.getMinutes()),m=t=>u(t)+":"+a(t.getSeconds()),g=(this.minTime=t=>t?u(t):null,this.isoTime=t=>t?m(t):null,this.acTime=t=>t&&t.replace(/(\d\d)(\d+)$/g,"$1:$2").replace(/[^\d\:]/g,""),this.toTime=function(t){t=t&&t.split(/\D+/);return t?d(new Date,t[0],t[1],t[2],t[3]):null},this.fmtMinTime=t=>t&&t.substr(11,5),this.fmtTime=t=>t&&t.substr(11,8),t=>t.getFullYear()+"-"+a(t.getMonth()+1)+"-"+a(t.getDate())),f=(this.enDate=t=>t?e(t.substring(0,4),t.substring(5,7),t.substring(8,10)):null,this.isoEnDate=t=>n(t)?g(t):null,this.isoEnDateTime=t=>n(t)?g(t)+" "+m(t):null,this.fmtEnDate=t=>t&&t.substr(0,10),this.acEnDate=t=>t&&t.replace(/^(\d{4})(\d+)$/g,"$1-$2").replace(/^(\d{4}\-\d\d)(\d+)$/g,"$1-$2").replace(/[^\d\-]/g,""),t=>a(t.getDate())+"/"+a(t.getMonth()+1)+"/"+t.getFullYear());this.esDate=t=>t?e(t.substring(6,10),t.substring(3,5),t.substring(0,2)):null,this.isoEsDate=t=>n(t)?f(t):null,this.isoEsDateTime=t=>n(t)?f(t)+" "+m(t):null,this.fmtEsDate=t=>t&&t.substring(8,10)+"/"+t.substring(5,7)+"/"+t.substring(0,4),this.acEsDate=t=>t&&t.replace(/^(\d\d)(\d+)$/g,"$1/$2").replace(/^(\d\d\/\d\d)(\d+)$/g,"$1/$2").replace(/[^\d\/]/g,""),Date.prototype.toJSON=function(){return g(this)+"T"+m(this)+"."+this.getMilliseconds()}}function DomBox(t){const v=this,n="",s=document.createElement("div"),T=document.createElement("textarea"),y={classHide:"hide",classAlerts:"alerts",classAlertText:"alert-text",classAlertClose:"alert-close",classInputError:"ui-error",classTipError:"ui-errtip",classCheckList:"check-list",classCheckGroup:"check-group"},I=(Object.assign(y,t),"."+y.classTipError),x="."+y.classCheckList,k="."+y.classCheckGroup,w=()=>v,a=t=>t;const r=t=>t?t.split(/\s+/):[],i=t=>sb.isstr(t)?document.querySelector(t):t,o=t=>sb.isstr(t)?document.querySelectorAll(t):t;function l(t,e,s){const i={action:t,method:e,body:JSON.stringify(s),headers:{"Content-Type":"application/json; charset=utf-8"}};return v.fetch(i).catch(v.setErrors)}this.get=(t,e)=>(e||document).querySelector(t),this.getAll=(t,e)=>(e||document).querySelectorAll(t),this.closest=(t,e)=>e&&e.closest(t),this.getNavLang=()=>navigator.language||navigator.userLanguage,this.getLang=()=>document.documentElement.getAttribute("lang")||v.getNavLang(),this.redir=(t,e)=>(t&&window.open(t,e||"_blank"),v),this.unescape=t=>(T.innerHTML=t,T.value),this.escape=t=>(s.innerHTML=t,s.innerHTML),this.scroll=function(t,e){return e=e||window,(t=t||e.document.body).scrollIntoView({behavior:"smooth"}),v},this.copyToClipboard=function(t){return T.value=t,T.select(),document.execCommand("copy"),v},this.fetch=function(s){v.loading(),s.headers=s.headers||{},s.headers["x-requested-with"]="XMLHttpRequest";var i=window.sessionStorage.getItem(s.tokenName);return i&&(s.headers.Authorization="Bearer "+i),window.fetch(s.action,s).then(t=>{if(!t.ok)return Promise.reject("Error "+t.status+" "+t.url);(i=t.headers.get(s.tokenName))&&window.sessionStorage.setItem(s.tokenName,i);const e=t.headers.get("content-type")||n;return e.includes("application/json")?t.json():t.text()}).catch(v.showError).finally(v.working)},this.send=function(e,t,s){var i=new FormData(e);const n={action:e.action};return n.method=t||e.method,n.tokenName=s||e.dataset.tokenName,n.body="multipart/form-data"==e.enctype?i:new URLSearchParams(i),n.headers={"Content-Type":e.enctype||"application/x-www-form-urlencoded"},v.fetch(n).then(t=>v.setOk(e,t)).catch(v.setErrors)},this.api={get:t=>v.fetch({action:t}),post:(t,e)=>l(t,"POST",e),put:(t,e)=>l(t,"PUT",e),patch:(t,e)=>l(t,"PATCH",e),delete:t=>v.fetch({action:t,method:"DELETE"})};const h=(t,e)=>w(ab.each(o(t),e)),D=(this.each=function(t,e){return t&&(1==t.nodeType?e(t):h(t,e)),v},this.reverse=(t,e)=>w(ab.reverse(t,e)),this.indexOf=(e,t)=>ab.findIndex(t||e.parentNode.children,t=>e==t),this.findIndex=(e,t)=>ab.findIndex(t,t=>t.matches(e)),this.find=(e,t)=>ab.find(t,t=>t.matches(e)),this.toArray=t=>[...o(t)],this.filter=(e,t)=>[...t].filter(t=>t.matches(e)),this.apply=(s,t,i)=>h(t,(t,e)=>t.matches(s)&&i(t,e)),this.sort=(t,e)=>v.toArray(t).sort(e),this.map=(t,e)=>v.toArray(t).map(e),this.values=t=>v.map(t,t=>t.value),this.prev=(t,e)=>{for(t=t.previousElementSibling;e&&t;){if(t.matches(e))return t;t=t.previousElementSibling}return t},this.next=(t,e)=>{for(t=t.nextElementSibling;e&&t;){if(t.matches(e))return t;t=t.nextElementSibling}return t},this.sibling=(t,e)=>v.prev(t,e)||v.next(t,e),this.children=(t,e)=>t.parentNode.querySelectorAll(e),this.clear=t=>{for(;t.firstChild;)t.removeChild(t.firstChild);return v},"input,textarea,select"),e=t=>t.offsetWidth||t.offsetHeight||t.getClientRects().length,E=t=>e(t)&&t.matches("[tabindex]:not([type=hidden],[readonly],[disabled])");function d(t,e){return e=e??n,"SELECT"===t.tagName?t.selectedIndex=v.findIndex("[value='"+e+"']",t.options):"checkbox"===t.type||"radio"===t.type?t.checked=t.value==e:t.value=e,v}function c(t){var e=v.sibling(t,I);return v.showError(i18n.getError()).setHtml(e,i18n.getMsg(t.name)).show(e).addClass(t,y.classInputError).focus(t)}function u(t,i,n){return v.closeAlerts().reverse(t,t=>{const e=i[t.name]||w;var s=n[t.name]||i[t.name+"Error"];e(t.name,t.value,n.msgError,s)||c(t)}),v.isOk()?i18n.toData():null}function m(t,e){return t.classList.toggle(y.classHide,!e),v}function g(t,e){return t.innerText=e,m(t,e)}function f(t,e){return t.innerHTML=e,m(t,e)}this.inputs=t=>v.getAll(D,t),this.focus=t=>(t&&t.focus(),v),this.checked=t=>v.getAll("input:checked",t),this.checks=t=>v.getAll("input[type=checkbox]",t),this.check=(t,e)=>v.each(t,t=>{t.checked=e}),this.setReadonly=(t,e)=>v.each(t,t=>{t.readOnly=e}),this.setDisabled=(t,e)=>v.each(t,t=>{t.disabled=e}),this.getFormInputs=t=>v.filter(D,v.getForm(t).elements),this.binary=(t,s)=>v.each(t,(t,e)=>{t.checked=nb.mask(s,e)}),this.integer=t=>{let e="";return v.reverse(t,t=>{e+=t.checked?"1":"0"}),parseInt(e,2)},this.checkval=(t,e,s)=>(t.value=s||0,v.binary(e,t.value),t.checked=ab.every(e,t=>t.checked),v),this.getValue=t=>t&&t.value,this.getVal=t=>v.getValue(i(t)),this.setValue=(t,e)=>t?d(t,e):v,this.setVal=(t,e)=>v.setValue(i(t),e),this.setValues=(t,e)=>v.each(t,t=>d(t,e)),this.val=(t,e)=>v.each(t,t=>d(t,e)),this.clearInputs=t=>v.val(t).autofocus(t),this.clearForm=t=>v.clearInputs(t.elements),this.getAttribute=(t,e)=>t&&t.getAttribute(e),this.getAttr=(t,e)=>v.getAttribute(i(t),e),this.setAttribute=(t,e,s)=>t&&t.setAttribute(e,s),this.setAttr=(t,e,s)=>v.setAttribute(i(t),e,s),this.attr=(t,e,s)=>v.each(t,t=>t.setAttribute(e,s)),this.removeAttr=(t,e)=>v.each(t,t=>t.removeAttribute(e)),this.loadInputs=(t,s,i)=>(i=i||{},v.each(t,t=>{const e=i[t.name]||a;s[t.name]=e(t.value)})),this.displayInputs=(s,i,n)=>{var t=t=>sb.substring(t,0,10);const r={datetime:a,date:t,week:t,month:t};return n=n||r,v.each(s,t=>{if(t.classList.contains(y.classCheckGroup))v.checkval(t,v.filter(k+"-"+t.name,s),i[t.name]);else{const e=r[t.type]||n[t.name]||a;d(t,e(i[t.name]))}})},this.load=(t,e,s)=>v.loadInputs(v.getFormInputs(t),e,s),this.display=(t,e,s)=>v.displayInputs(v.getFormInputs(t),e,s),this.setInputError=(t,e,s,i)=>(t=v.getInput(t))?i?i(t.name,t.value,e,s)?v:c(t):(i18n.setError(e,t.name,s),c(t)):v,this.validateInputs=(t,e,s)=>(e=e||{},(s=s||{}).msgError=s.msgError||e.msgError,u(t,e,s)),this.validate=(t,e,s)=>{e=e||{},s=s||{};var i=(t=v.getForm(t)).getAttribute("id")+"FormError";return s.msgError=s[i]||e[i]||s.msgError||e.msgError,u(v.filter(D,t.elements),e,s)},this.getInnerText=t=>t&&t.innerText,this.getText=t=>v.getInnerText(i(t)),this.setInnerText=(t,e)=>t?g(t,e??n):v,this.setText=(t,e)=>v.setInnerText(i(t),e),this.text=function(t,e){return e=e??n,v.each(t,t=>g(t,e))},this.getInnerHtml=t=>t&&t.innerHTML,this.getHtml=t=>v.getInnerHtml(i(t)),this.setInnerHtml=(t,e)=>t?f(t,e??n):v,this.setHtml=(t,e)=>v.setInnerHtml(i(t),e),this.html=function(t,e){return e=e??n,v.each(t,t=>f(t,e))},this.mask=(t,s,i)=>v.each(t,(t,e)=>t.classList.toggle(i,nb.mask(s,e))),this.view=(t,e)=>v.mask(t,~e,y.classHide),this.getOptText=t=>t&&v.getText(t.options[t.selectedIndex]),this.select=function(t,s){return v.each(t,t=>{var e=t.options[t.selectedIndex];v.view(t.options,s).hasClass(e,y.classHide)&&(t.selectedIndex=v.findIndex(":not(.hide)",t.options))})},this.empty=t=>!t||!t.innerHTML||t.innerHTML.trim()===n,this.add=(e,t)=>v.each(t,t=>e.appendChild(t)),this.append=function(e,t){return t=t||document.body,v.each(t,t=>{s.innerHTML=e,v.add(t,s.childNodes)})};const p={},A=(this.getTpl=t=>p[t],this.setTpl=(t,e)=>(p[t]=e,v),this.loadTemplates=()=>v.each("template[id]",t=>v.setTpl(t.id,t.innerHTML)),this.render=function(t,e){t.id=t.id||"_"+sb.rand();var s=t.dataset.tpl||t.id;return p[s]=p[s]||t.innerHTML,f(t,e(p[s]))},this.format=(t,s,i)=>{t=o(t);return s.size=t.length,ab.each(t,(t,e)=>{s.index=e,s.count=e+1,v.render(t,t=>sb.format(s,t,i))}),v},this.tr=(t,e)=>v.format(t,i18n.getLang(),e),this.replace=(t,e)=>v.each(t,t=>{t.outerHTML=e}),this.parse=(t,e)=>v.each(t,t=>{t.outerHTML=e(t.outerHTML)}),t=>t.classList.contains(y.classHide)),b=t=>t.classList.remove(y.classHide),M=t=>t.classList.add(y.classHide);function F(e,s,i){i.once=!0,i.onstart(e),e.addEventListener("animationend",t=>{e.classList.remove(s),i.onfinish(e,t)},i),e.classList.add(s)}this.isVisible=t=>t&&e(t),this.visible=(t,e)=>v.isVisible(i(t)),this.show=t=>v.each(t,b),this.hide=t=>v.each(t,M),this.hasClass=(e,t)=>e&&r(t).some(t=>e.classList.contains(t)),this.addClass=function(t,s){return s=r(s),v.each(t,e=>s.forEach(t=>e.classList.add(t)))},this.removeClass=function(t,s){return s=r(s),v.each(t,e=>s.forEach(t=>e.classList.remove(t)))},this.toggle=function(t,s,i){return s=r(s),v.each(t,e=>s.forEach(t=>e.classList.toggle(t,i)))},this.toggleHide=(t,e)=>v.toggle(t,y.classHide,e),this.toggleLink=(t,e)=>v.toggleHide(".info-"+t.id,e).setFocus(t.parentNode),this.css=function(t,e,s){const i=e.replace(/(-[a-z])/,t=>t.replace("-",n).toUpperCase());return v.each(t,t=>{t.style[i]=s})},this.animate=function(t,e,s){return s=Object.assign({duration:1e3,onfinish:w},s),v.each(t,t=>t.animate(e,s).onfinish(s.onfinish))},this.animateClass=function(t,e,s){return s=Object.assign({onstart:w,onfinish:w},s),v.each(t,t=>F(t,e,s))},this.animateIn=function(t,e){const s={onstart:b,onfinish:w};return v.each(t,t=>F(t,e,s))},this.animateOut=function(t,e){const s={onstart:w,onfinish:M};return v.each(t,t=>{A(t)||F(t,e,s)})},this.animateToggle=function(t,e,s){const i={onstart:b,onfinish:w},n={onstart:w,onfinish:M};return v.each(t,t=>A(t)?F(t,e,i):F(t,s,n))},this.fadeIn=t=>v.animateIn(t,"fadeIn"),this.fadeOut=t=>v.animateOut(t,"fadeOut"),this.fadeToggle=t=>v.animateToggle(t,"fadeIn","fadeOut"),this.slideIn=t=>v.animateIn(t,"slideIn"),this.slideOut=t=>v.animateOut(t,"slideOut"),this.slideToggle=t=>v.animateToggle(t,"slideIn","slideOut");const C=(e,t,s,i,n)=>w(e.addEventListener(t,t=>i(e,t,s)||t.preventDefault(),n)),S=(t,e,s,i)=>t?C(t,e,0,s,i):v;this.event=(t,e,s)=>S(i(t),e,s),this.events=(t,s,i)=>v.each(t,(t,e)=>C(t,s,e,i)),this.ready=t=>C(document,"DOMContentLoaded",0,t),this.trigger=function(t,e,s){return t.dispatchEvent(s?new CustomEvent(e,{detail:s}):new Event(e)),v},this.click=(t,s)=>v.each(t,(t,e)=>C(t,"click",e,s)),this.addClick=(t,e)=>S(i(t),"click",e),this.onclick=this.onClick=v.click,this.change=(t,s)=>v.each(t,(t,e)=>C(t,"change",e,s)),this.onchange=this.onChange=v.change,this.keyup=(t,s)=>v.each(t,(t,e)=>C(t,"keyup",e,s)),this.onkeyup=this.onKeyup=v.keyup,this.keydown=(t,s)=>v.each(t,(t,e)=>C(t,"keydown",e,s)),this.onkeydown=this.onKeydown=v.keydown,this.submit=(t,s)=>v.each(t,(t,e)=>C(t,"submit",e,s)),this.onsubmit=this.onSubmit=v.submit,this.ready(function(){i18n.setI18n(v.getLang());const r=new FileReader;var t=v.getAll(".tab-content,table,form,"+D);const i=v.filter(".tab-content",t),e=v.filter("table",t),s=v.filter("form",t),n=v.filter(D,t);v.isOk=i18n.isOk,v.isError=i18n.isError,v.loading=v.working=w;t=v.get("."+y.classAlerts);const a=v.getAll("."+y.classAlertText,t),o=t=>v.fadeIn(t.parentNode),l=t=>v.fadeOut(t.parentNode),h=(t,e)=>e?o(t).setHtml(t,e).scroll():v;function f(t){t=t.tBodies;t[0].children.length?v.show(t[0]).hide(t[1]):v.hide(t[0]).show(t[1])}function p(i,n,r,s){r.total=n.length,r.index=r.index||0,r.start=r.start||0,r.pageSize=r.pageSize||99,r.sortDir=i.dataset.sortDir,r.sortBy=i.dataset.sortBy,r.end=r.start+r.pageSize,r.page=r.start/r.pageSize,r.sortBy?(t=r.sort||((t,e)=>sb.cmpBy(t,e,r.sortBy)),ab.sort(n,r.sortDir,t)):(t=v.getAll(".sort",i.tHead),v.removeClass(t,"sort-asc sort-desc").addClass(t,"sort-none"));const e=r.pageSize<r.total?n.slice(r.start,r.end):n;r.size=e.length,(s=s||{}).getValue=s.getValue||i18n.val;var t=i.tBodies[0];v.trigger(i,"render").render(t,t=>ab.format(e,t,s)).render(i.tFoot,t=>sb.format(r,t,s)),f(i);{var a=i,o=n,l=r,h=s;const m=v.next(a,".pagination"),g=Math.ceil(l.total/l.pageSize);if(!(l.pageSize<1)&&m){let s="";if(1<g){let t=0;c(l.page-1,"&laquo;"),1<g&&u(0),2<=(t=Math.max(l.page-3,1))&&c(t-1,"...");for(var d=Math.min(l.page+3,g-1);t<=d;)u(t++);t<g-1&&c(t,"..."),t<g&&u(g-1),c(l.page+1,"&raquo;"),m.innerHTML=s,v.click(v.getAll("a",m),t=>{l.page=sb.lastId(t.href),l.start=l.page*l.pageSize,l.end=l.start+l.pageSize,p(a,o,l,h),v.trigger(a,"pagination",l)})}else m.innerHTML=s;function c(t,e){t=nb.range(t,0,g-1),s+='<a href="#'+t+'">'+e+"</a>"}function u(t){t=nb.range(t,0,g-1),s=(s+='<a href="#'+t+'"')+(t==l.page?' class="active">':">")+(t+1)+"</a>"}}}return v.change(t.children,(t,e,s)=>{r.row=t,r.index=r.start+s,r.data=n[r.index],r.element=e.target,v.trigger(i,"change-"+e.target.name,r)}).click(v.getAll("a[href]",t),t=>{r.row=t.closest("tr"),r.index=r.start+v.indexOf(r.row),r.data=n[r.index];const e=(r.element=t).getAttribute("href");"#remove"==e?b(i,n,r,s):sb.starts(e,"#find")&&v.trigger(i,e.substring(1),r)})}function b(t,e,s,i){return t&&e&&i18n.confirm(i?.remove||"remove")&&v.closeAlerts().trigger(t,"remove",s.data).isOk()&&(e.splice(s.index,1),s.start=1<s.size?s.start:0,p(t,e,s,i)),v}function d(t,e,s,i,n){return e.index=n,e.data=i,delete e.row,v.display(t,i,s)}v.showOk=t=>h(a[0],t),v.showInfo=t=>h(a[1],t),v.showWarn=t=>h(a[2],t),v.showError=t=>h(a[3],t),v.showAlerts=function(t){return t?v.showOk(t.msgOk).showInfo(t.msgInfo).showWarn(t.msgWarn).showError(t.msgError):v},v.closeAlerts=function(){i18n.start();var t=v.getAll(I);return v.each(a,l).removeClass(n,y.classInputError).html(t,"").hide(t)},v.setOk=(t,e)=>v.showOk(e).clearForm(t),v.setErrors=function(t){if(v.closeAlerts(),sb.isstr(t))return v.showError(t);for(const e in t)v.setInputError("[name='"+e+"']",null,t[e]);return v.showAlerts(t)},v.each(a,t=>{t.firstChild&&o(t)}).click(v.getAll("."+y.classAlertClose,t),l),v.getTable=t=>sb.isstr(t)?v.find(t,e):t,v.getTables=t=>t?v.filter(t,e):e,v.getForm=t=>sb.isstr(t)?v.find(t,s):t,v.getForms=t=>t?v.filter(t,s):s,v.getInput=t=>sb.isstr(t)?v.find(t,n):t,v.getInputs=t=>t?v.filter(t,n):n,v.eachInput=(t,e)=>v.apply(t,n,e),v.getInputValue=t=>v.getValue(v.getInput(t)),v.setInputValue=(t,e)=>v.setValue(v.getInput(t)),v.copyVal=(t,e)=>v.setInputValue(t,v.getInputValue(e)),v.setAttrInput=(t,e,s)=>v.setAttribute(v.getInput(t),e,s),v.delAttrInput=(t,e)=>v.removeAttr(v.getInput(t),e),v.setFocus=t=>v.focus(sb.isstr(t)?v.find(t,n):ab.find(v.inputs(t),E)),v.autofocus=t=>v.focus(ab.find(t||n,E)),v.autofocus().reverse(n,t=>{var e=v.get(I,t.parentNode);v.empty(e)||v.show(e).addClass(t,y.classInputError).focus(t)}),v.onForm=(t,e,s)=>S(v.getForm(t),e,s),v.onChangeForm=(t,e)=>S(v.getForm(t),"change",e),v.onResetForm=(t,e)=>S(v.getForm(t),"reset",e),v.onSubmitForm=(t,e)=>S(v.getForm(t),"submit",e),v.onChangeInput=(t,e)=>S(v.getInput(t),"change",e),v.onChangeInputs=(t,e)=>v.change(v.getInputs(t),e),v.onBlurInput=(t,e)=>S(v.getInput(t),"blur",e),v.onFileInput=(t,n)=>v.onChangeInput(t,e=>{const s=t=>{t&&r.readAsBinaryString(t)};let i=0;r.onload=t=>{n(e,t,e.files[i],t.target.result,i),s(e.files[++i])},s(e.files[i])}),v.setRangeDate=(e,s)=>v.onBlurInput(e,t=>v.setAttrInput(s,"min",t.value)).onBlurInput(s,t=>v.setAttrInput(e,"max",t.value)),v.getCheckRows=t=>v.checks(v.getTable(t)),v.getCheckedRows=t=>v.checked(v.getTable(t)),v.onTable=(t,e,s)=>S(v.getTable(t),e,s),v.onFindRow=(t,e)=>v.onTable(t,"find",e),v.onRemoveRow=(t,e)=>v.onTable(t,"remove",e),v.onChangeTable=(t,e)=>v.onTable(t,"change",e),v.onRenderTable=(t,e)=>v.onTable(t,"render",e),v.onSortTable=(t,e)=>v.onTable(t,"sort",e),v.onPaginationTable=(t,e)=>v.onTable(t,"pagination",e),v.tfoot=function(t,e,s){return(t=v.getTable(t))?(t=t,i=e,n=s,v.trigger(t,"render").render(t.tFoot,t=>sb.format(i,t,n))):v;var i,n},v.table=function(t,e,s,i){return(t=v.getTable(t))?p(t,e,s,i):v},v.selectRow=function(t,e,s,i,n){return d(t,s,i,e[n=nb.range(n,0,e.length-1)],n)},v.createRow=(t,e,s,i)=>d(t,e,s,i,-1),v.removeRow=(t,e,s,i)=>b(v.getTable(t),e,s,i),v.repaginate=function(t,e,s,i){return s.start=0,v.table(t,e,s,i)},v.updateTable=function(t,e,s,i){return delete(t=v.getTable(t)).dataset.sortBy,p(t,e,s,i)},v.clearTable=function(t,e,s,i){return e.splice(0),s.index=s.start=0,v.updateTable(t,e,s,i)},ab.each(e,e=>{const s=v.getAll(".sort",e.tHead);function i(t){v.removeClass(s,"sort-asc sort-desc").addClass(s,"sort-none").toggle(t,"sort-none sort-"+e.dataset.sortDir)}e.dataset.sortDir&&i(v.find("a[href='#"+e.dataset.sortBy+"']",s)),v.click(s,t=>{e.dataset.sortDir=v.hasClass(t,"sort-asc")?"desc":"asc",e.dataset.sortBy=t.getAttribute("href").substring(1),v.trigger(e,"sort-"+e.dataset.sortBy).trigger(e,"sort"),i(t)}),A(e.tBodies[0])||f(e)});let c=v.findIndex(".active",i),u=i.length-1,m=-1;function g(t){if(t=nb.range(t,0,u),v.closeAlerts(),t==c)return v;if(0<t||0<c){const tab=i[t];if(v.trigger(tab,tab.id).isOk()){var e=v.get("#progressbar");if(e){const s="step-"+t;v.each(e.children,t=>v.toggle(t,"active",t.id<=s))}c=t,v.removeClass(i,"active").addClass(tab,"active").setFocus(tab).scroll()}}else v.trigger(tab,"exit");return v}v.getTabs=()=>i,v.getTab=t=>v.find("#tab-"+t,i),v.setTabMask=t=>(m=t,v),v.lastId=(t,e)=>nb.max(sb.lastId(t)||0,e||99),v.onTab=(t,e,s,i)=>S(v.getTab(t),e,s,i),v.onLoadTab=(t,e)=>v.onTab(t,"tab-"+t,e,{once:!0}),v.onShowTab=(t,e)=>v.onTab(t,"tab-"+t,e),v.onChangeTab=(t,e)=>v.onTab(t,"change",e),v.onExitTab=t=>S(i[0],"exit",t),v.viewTab=t=>g(v.findIndex("#tab-"+t,i)),v.lastTab=()=>g(u),v.prevTab=()=>{for(var t=c-1;!nb.mask(m,t)&&0<t;t--);return g(t)},v.nextTab=()=>{for(var t=c+1;!nb.mask(m,t)&&t<u;t++);return g(t)},0<u&&v.onclick("a[href='#prev-tab']",()=>!v.prevTab()).onclick("a[href='#next-tab']",()=>!v.nextTab()).onclick("a[href='#last-tab']",()=>!v.lastTab()).onclick("a[href^='#tab-']",t=>!v.viewTab(v.lastId(t.href))),v.eachInput(k,e=>{const s=v.getInputs(k+"-"+e.id);v.checkval(e,s,+e.value).click(e,t=>(e.value=v.check(s,e.checked).integer(s),!0)).click(s,t=>v.checkval(e,s,v.integer(s)))}).eachInput(x,e=>{const s=v.getInputs(x+"-"+e.id);v.click(e,t=>v.check(s,e.checked)).click(s,t=>(e.checked=ab.every(s,t=>t.checked),!0))}),T.style.position="absolute",T.style.left="-9999px",document.body.prepend(T)})}function GraphBox(){const o=[];this.graph=function(e,s){return s=Object.assign({id:0,level:0,childnodes:[]},s),o.slice(0),pkName=s.pk||"id",fkName=s.fk||"parent",fnGroup=s.onGroup||fnTrue,s.data=e.filter(t=>!t[fkName]),s.data.forEach(t=>{!function e(s,t,i){var n;-1<o.indexOf(i)||(o.push(i),(n=newNode(t,s.filter(t=>t[fkName]==i),i))&&n.data.forEach(t=>{e(s,n,t[pkName])}))}(e,s,t[pkName])}),s},this.bfs=function(i,n){o.slice(0),o.push(i.id);for(var t=[i];0<t.length;){let s=t.shift();t=s.childnodes.filter((t,e)=>{return o.indexOf(t.id)<0&&n(i,s,t,e)?o.push(t.id):0}).concat(t)}return i},this.findVertex=function(t,e){return o.slice(0),function e(s,i,n){if(-1<o.indexOf(i.id))return null;o.push(i.id);for(let t=0;!a&&t<i.childnodes.length;t++)var r=i.childnodes[t],a=n(s,i,r,t)?r:e(s,r,n);return a}(t,t,e)}}function I18nBox(){const n=this,r=new Map,s=new Map,i="msgError",a={},o={en:{lang:"en",none:"",errForm:"Form validation failed",errRequired:"Required field!",errMinlength8:"The minimum required length is 8 characters",errMaxlength:"Max length exceded",errNif:"Wrong ID format",errCorreo:"Wrong Mail format",errDate:"Wrong date format",errDateLe:"Date must be less or equals than current",errDateGe:"Date must be greater or equals than current",errDateGt:"Date must be greater than current",errNumber:"Wrong number format",errGt0:"Price must be great than 0.00 &euro;",errRegex:"Wrong format",errReclave:"Passwords typed do not match",errRange:"Value out of allowed range",errRefCircular:"Circular reference",saveOk:"Element saved successfully!",remove:"Are you sure to delete this element?",removeAll:"Are you sure to delete all elements?",removeOk:"Element removed successfully!",cancel:"Are you sure to cancel element?",cancelOk:"Element canceled successfully!",unlink:"Are you sure to unlink those elements?",unlinkOk:"Elements unlinked successfully!",linkOk:"Elements linked successfully!",closeText:"close",prevText:"prev",nextText:"next",currentText:"current",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dateFormat:"yy-mm-dd",firstDay:0,toDate:dt.enDate,isoDate:dt.isoEnDate,isoDateTime:dt.isoEnDateTime,fmtDate:dt.fmtEnDate,acDate:dt.acEnDate,toTime:dt.toTime,minTime:dt.minTime,isoTime:dt.isoTime,acTime:dt.acTime,toInt:nb.toInt,isoInt:nb.enIsoInt,fmtInt:nb.enFmtInt,toFloat:nb.enFloat,isoFloat:nb.enIsoFloat,fmtFloat:nb.enFmtFloat,fmtBool:nb.enBool,val:sb.enVal},es:{lang:"es",none:"",errForm:"Error al validar los campos del formulario",errRequired:"¡Campo obligatorio!",errMinlength8:"La longitud mínima requerida es de 8 caracteres",errMaxlength:"Longitud máxima excedida",errNif:"Formato de NIF / CIF incorrecto",errCorreo:"Formato de E-Mail incorrecto",errDate:"Formato de fecha incorrecto",errDateLe:"La fecha debe ser menor o igual a la actual",errDateGe:"La fecha debe ser mayor o igual a la actual",errDateGt:"La fecha debe ser mayor a la actual",errNumber:"Valor no numérico",errGt0:"El importe debe ser mayor de 0,00 &euro;",errRegex:"Formato incorrecto",errReclave:"Las claves introducidas no coinciden",errRange:"Valor fuera del rango permitido",errRefCircular:"Referencia circular",saveOk:"Registro guardado correctamente",remove:"¿Confirma que desea eliminar este registro?",removeAll:"¿Confirma que desea eliminar todos los elementos?",removeOk:"Registro eliminado correctamente.",cancel:"¿Confirma que desea cancelar este registro?",cancelOk:"Elemento cancelado correctamente.",unlink:"¿Confirma que desea desasociar estos registros?",unlinkOk:"Registros desasociados correctamente",linkOk:"Registros asociados correctamente.",closeText:"cerrar",prevText:"prev.",nextText:"sig.",currentText:"hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],dateFormat:"dd/mm/yy",firstDay:1,toDate:dt.esDate,isoDate:dt.isoEsDate,isoDateTime:dt.isoEsDateTime,fmtDate:dt.fmtEsDate,acDate:dt.acEsDate,toTime:dt.toTime,minTime:dt.minTime,isoTime:dt.isoTime,acTime:dt.acTime,toInt:nb.toInt,isoInt:nb.esIsoInt,fmtInt:nb.esFmtInt,toFloat:nb.esFloat,isoFloat:nb.esIsoFloat,fmtFloat:nb.esFmtFloat,fmtBool:nb.esBool,val:sb.val}};let l=o.es;this.getLangs=function(t){return a[t]||o},this.getLang=function(t,e){return n.getLangs(e)[t]||l},this.getI18n=function(t,e){e=n.getLangs(e);return t&&(e[t]||e[t.substr(0,2)])||l},this.setI18n=function(t,e){return l=n.getI18n(t,e),n},this.get=t=>l[t],this.tr=t=>l[t]||t,this.set=(t,e)=>(l[t]=e,n),this.msg=(t,e,s)=>sb.format(e,n.tr(t),s),this.format=(t,e)=>sb.format(l,t,e),this.addLang=function(e,s,i){if(i){let t=a[i]=a[i]||{};t[e]=Object.assign(t[e]||{},o[e],s)}else o[e]=Object.assign(o[e]||{},s);return n},this.addLangs=function(t,e){for(const s in t)n.addLang(s,t[s],e);return n},this.toInt=t=>l.toInt(t),this.isoInt=t=>l.isoInt(t),this.fmtInt=t=>l.fmtInt(t),this.toFloat=t=>l.toFloat(t),this.isoFloat1=t=>l.isoFloat(t,1),this.isoFloat=t=>l.isoFloat(t),this.isoFloat3=t=>l.isoFloat(t,3),this.fmtFloat1=t=>l.fmtFloat(t,1),this.fmtFloat=t=>l.fmtFloat(t),this.fmtFloat3=t=>l.fmtFloat(t,3),this.toDate=t=>l.toDate(t),this.isoDate=t=>l.isoDate(t),this.fmtDate=t=>l.fmtDate(t),this.acDate=t=>l.acDate(t),this.toTime=t=>l.toTime(t),this.minTime=t=>l.minTime(t),this.isoTime=t=>l.isoTime(t),this.fmtMinTime=t=>dt.fmtMinTime(t),this.fmtTime=t=>dt.fmtTime(t),this.acTime=t=>l.acTime(t),this.fmtBool=t=>l.fmtBool(t),this.confirm=t=>confirm(n.tr(t)),this.val=(t,e)=>l.val(t,e),this.arrval=function(t,e){t=l[t];return t&&t[e]||"-"},this.getMsgs=()=>s,this.getMsg=t=>s.get(t),this.setMsg=(t,e)=>(s.set(t,e),n),this.setOk=t=>n.setMsg("msgOk",n.tr(t)),this.setInfo=t=>n.setMsg("msgInfo",n.tr(t)),this.setWarn=t=>n.setMsg("msgWarn",n.tr(t)),this.getError=t=>s.get(t||i),this.setError=(t,e,s)=>n.setMsg(i,n.tr(t)).setMsg(e,n.tr(s)),this.getNumMsgs=()=>s.size,this.getData=t=>t?r.get(t):r,this.toData=()=>Object.fromEntries(r),this.toMsgs=()=>Object.fromEntries(s),this.reset=()=>(r.clear(),s.clear(),n),this.start=(t,e)=>n.reset().setI18n(t,e),this.valid=function(t,e,s,i){return sb.isset(e)?(r.set(t,e),!0):(n.setError(s,t,i),!1)},this.isOk=()=>!s.has(i),this.isError=t=>s.has(t||i),this.required=(t,e,s)=>n.valid(t,valid.required(e),s,"errRequired"),this.size10=(t,e,s,i)=>n.valid(t,valid.size10(e),s,i??"errMaxlength"),this.size50=(t,e,s,i)=>n.valid(t,valid.size50(e),s,i??"errMaxlength"),this.size200=(t,e,s,i)=>n.valid(t,valid.size200(e),s,i??"errMaxlength"),this.size300=(t,e,s,i)=>n.valid(t,valid.size300(e),s,i??"errMaxlength"),this.text10=(t,e,s,i)=>n.valid(t,valid.text10(e),s,i??"errMaxlength"),this.text50=(t,e,s,i)=>n.valid(t,valid.text50(e),s,i??"errMaxlength"),this.text200=(t,e,s,i)=>n.valid(t,valid.text200(e),s,i??"errMaxlength"),this.text300=(t,e,s,i)=>n.valid(t,valid.text300(e),s,i??"errMaxlength"),this.text=(t,e,s,i)=>n.valid(t,valid.text(e),s,i??"errMaxlength"),this.fk=(t,e,s,i)=>n.valid(t,valid.fk(e),s,i??"errNumber"),this.intval=(t,e,s,i)=>n.valid(t,valid.intval(e),s,i??"errRange"),this.intval3=(t,e,s,i)=>n.valid(t,valid.intval3(e),s,i??"errRange"),this.iGt0=(t,e,s,i)=>n.valid(t,valid.gt0(l.toInt(e)),s,i??"errNumber"),this.gt0=(t,e,s,i)=>n.valid(t,valid.gt0(l.toFloat(e)),s,i??"errGt0"),this.regex=(t,e,s,i)=>n.valid(t,valid.regex(e),s,i??"errRegex"),this.login=(t,e,s,i)=>n.valid(t,valid.login(e),s,i??"errRegex"),this.digits=(t,e,s,i)=>n.valid(t,valid.digits(e),s,i??"errNumber"),this.idlist=(t,e,s,i)=>n.valid(t,valid.idlist(e),s,i??"errRegex"),this.email=(t,e,s,i)=>n.valid(t,valid.email(e),s,i??"errCorreo"),this.isDate=(t,e,s,i)=>n.valid(t,valid.date(e),s,i??"errDate"),this.past=(t,e,s,i)=>n.valid(t,valid.past(e),s,i??"errDateLe"),this.leToday=(t,e,s,i)=>n.valid(t,valid.leToday(e),s,i??"errDateGe"),this.future=(t,e,s,i)=>n.valid(t,valid.future(e),s,i??"errDateGt"),this.geToday=(t,e,s,i)=>n.valid(t,valid.geToday(e),s,i??"errDateGe"),this.dni=(t,e,s,i)=>n.valid(t,valid.dni(e),s,i??"errNif"),this.cif=(t,e,s,i)=>n.valid(t,valid.cif(e),s,i??"errNif"),this.nie=(t,e,s,i)=>n.valid(t,valid.nie(e),s,i??"errNif"),this.idES=(t,e,s,i)=>n.valid(t,valid.idES(e),s,i??"errNif"),this.user=(t,e,s,i)=>n.valid(t,valid.email(e)||valid.idES(e),s,i??"errRegex"),this.iban=(t,e,s,i)=>n.valid(t,valid.iban(e),s,i??"errRegex"),this.swift=(t,e,s,i)=>n.valid(t,valid.swift(e),s,i??"errRegex"),this.creditCardNumber=(t,e,s,i)=>n.valid(t,valid.creditCardNumber(e),s,i??"errRegex")}function NumberBox(){const n=this,r=".",a=t=>null!=t,o=t=>t.replace(/\D+/g,""),l=t=>o(t).replace(/^0+(\d+)/,"$1"),h=t=>"-"==t.charAt(0)?"-":"";function d(t,e){let s=t.length,i=2<s?t.substring(s-3,s):t;for(s-=3;3<s;s-=3)i=t.substring(s-3,s)+e+i;return 0<s?t.substring(0,s)+e+i:i}const i=(t,e,s)=>e<=t&&t<=s;function s(t,e){var s=h(t),t=l(t);return t?s+d(t,e):null}function c(e,s,i,n,r){n=isNaN(n)?2:n;var a=h(e),r=e.lastIndexOf(r);let o=0<r?e.substr(0,r):e;if(o=0==r?"0":l(o)){let t=r<0?"0":e.substr(r+1,n);return a+d(o,s)+i+(r<0?"0".repeat(n):t.padEnd(n,"0"))}return null}this.between=(t,e,s)=>i(t,e??t,s=s??t),this.in=(t,e,s)=>!t||n.between(t,e,s),this.range=(t,e,s)=>Math.min(Math.max(t,e),s),this.min=(t,e)=>n.range(t,e||0,t),this.max=(t,e)=>n.range(t,0,e),this.dec=(t,e)=>n.min(t-1,e),this.inc=(t,e)=>n.max(t+1,e),this.mask=(t,e)=>t>>e&1,this.round=function(t,e){return e=a(e)?e:2,+(Math.round(t+"e"+e)+"e-"+e)},this.eq2=(t,e)=>a(t)&&n.round(t)==n.round(e),this.eq3=(t,e)=>a(t)&&n.round(t,3)==n.round(e,3),this.eq01=(t,e)=>i(t-e,-.01,.01),this.lt0=t=>a(t)&&t<0,this.le0=t=>a(t)&&t<=0,this.gt0=t=>a(t)&&0<t,this.multicmp=t=>t.map(s=>(t,e)=>n.cmp(t[s],e[s])),this.cmp=function(t,e){return a(t)&&a(e)?t-e:a(t)?-1:1},this.rand=(t,e)=>Math.random()*((e||1e9)-t)+t,this.randInt=(t,e)=>Math.floor(n.rand(t||0,e)),this.toInt=function(t){return t?(t=parseInt(h(t)+o(t)),isNaN(t)?null:t):null},this.isoInt=(t,e)=>a(t)?s(""+t,e):null,this.enIsoInt=t=>n.isoInt(t,","),this.esIsoInt=t=>n.isoInt(t,r),this.fmtInt=(t,e)=>t&&s(t,e),this.enFmtInt=t=>n.fmtInt(t,","),this.esFmtInt=t=>n.fmtInt(t,r),this.intval=t=>parseInt(t)||0,this.toFloat=function(t,e){var s,i;return t?(s=h(t),i=(e=t.lastIndexOf(e))<0?t:t.substr(0,e),t=e<0?"":r+t.substr(e+1),e=parseFloat(s+o(i)+t),isNaN(e)?null:e):null},this.enFloat=t=>n.toFloat(t,r),this.esFloat=t=>n.toFloat(t,","),this.isoFloat=(t,e,s,i)=>a(t)?c(""+n.round(t,i),e,s,i,r):null,this.enIsoFloat=(t,e)=>n.isoFloat(t,",",r,e),this.esIsoFloat=(t,e)=>n.isoFloat(t,r,",",e),this.fmtFloat=(t,e,s,i)=>t&&c(t,e,s,i,s),this.enFmtFloat=(t,e)=>n.fmtFloat(t,",",r,e),this.esFmtFloat=(t,e)=>n.fmtFloat(t,r,",",e),this.floatval=t=>parseFloat(t)||0,this.boolval=t=>t&&"false"!==t&&"0"!==t,this.enBool=t=>n.boolval(t)?"Yes":"No",this.esBool=t=>n.boolval(t)?"Sí":"No"}function StringBox(){const l=this,h="",e=/"|'|&|<|>|\\/g,s={'"':"&#34;","'":"&#39;","&":"&#38;","<":"&#60;",">":"&#62;","\\":"&#92;"},r="àáâãäåāăąÀÁÂÃÄÅĀĂĄÆßèéêëēĕėęěÈÉĒĔĖĘĚìíîïìĩīĭÌÍÎÏÌĨĪĬòóôõöōŏőøÒÓÔÕÖŌŎŐØùúûüũūŭůÙÚÛÜŨŪŬŮçÇñÑþÐŔŕÿÝ",a="aaaaaaaaaAAAAAAAAAABeeeeeeeeeEEEEEEEiiiiiiiiIIIIIIIIoooooooooOOOOOOOOOuuuuuuuuUUUUUUUUcCnNdDRryY";function i(e){var s=u(e),i=e||h;for(let t=0;t<s;t++)var n=r.indexOf(e.charAt(t)),i=n<0?i:i.replaceAt(a.charAt(n),t);return i}const n=t=>i(t).toLowerCase(),d=t=>null!=t;const o=(t,e)=>n(t).indexOf(n(e)),c=t=>t.replace(/\W+/g,h),u=t=>t?t.length:0,m=(String.prototype.insert=function(t,e){return this.substring(0,e)+t+this.substring(e)},String.prototype.replaceAt=function(t,e){return this.substring(0,e)+t+this.substring(e+t.length)},String.prototype.wrap=function(t,e,s){var i;return t?(t=(i=o(this,t))+t.length,i<0?this:this.substring(0,i)+(e||"<u><b>")+this.substring(i,t)+(s||"</b></u>")+this.substring(t)):this},String.prototype.remove=function(t,e){return this.substring(0,t)+this.substring(t+e)},String.prototype.format=function(t){return this.replace(/@(\w+);/g,t)},String.prototype.render=function(i,n){const r=(n=n||{}).empty||h,a=n.getValue||l.val,t=n.onFinish||((t,e)=>t?e:h);let o=0;var e=this.format((t,e)=>{const s=n[e];e=s?s(i[e],i):a(i,e);return o+=d(e)?1:0,e??r});return t(o,e)},this.isset=d,this.isstr=t=>"string"==typeof t||t instanceof String,this.size=u,this.trLower=n,this.trUpper=t=>i(t).toUpperCase(),this.lower=t=>t&&t.toLowerCase(t),this.upper=t=>t&&t.toUpperCase(t),this.substr=(t,e,s)=>t&&t.substr(e,s),this.substring=(t,e,s)=>t&&t.substring(e,s),this.indexOf=(t,e)=>t?t.indexOf(e):-1,this.lastIndexOf=(t,e)=>t?t.lastIndexOf(e):-1,this.prevIndexOf=(t,e,s)=>t?t.substr(0,s).lastIndexOf(e):-1,this.starts=(t,e)=>t&&t.startsWith(e),this.ends=(t,e)=>t&&t.endsWith(e),this.prefix=(t,e)=>l.starts(t,e)?t:e+t,this.suffix=(t,e)=>l.ends(t,e)?t:t+e,this.trunc=(t,e)=>u(t)>e?t.substr(0,e).trim()+"...":t,this.trim=t=>t&&t.trim(),this.escape=t=>t&&t.replace(e,t=>s[t]),this.unescape=t=>t&&t.replace(/&#(\d+);/g,(t,e)=>String.fromCharCode(e)),this.iwrap=(t,e,s,i)=>t&&t.wrap(e,s,i),this.rand=t=>Math.random().toString(36).substr(2,t||8),this.lopd=t=>t&&"***"+t.substr(3,4)+"**",this.test=(t,e)=>e.test(t)?t:null,this.split=(t,e)=>t?t.trim().split(e):[],this.match=(t,e)=>t?t.trim().match(e):[],this.lastId=t=>+l.match(t,/\d+$/).pop(),this.chunk=(t,e)=>l.match(t,new RegExp(".{1,"+e+"}","g")),this.slices=function(e,s){const i=[];var n=u(e),r=0;for(let t=0;r<n&&t<s.length;t++){var a=s[t];i.push(e.substr(r,a)),r+=a}return r<n&&i.push(e.substr(r)),i},t=>t.substring(0,10));this.toDate=t=>t?new Date(t):null,this.inYear=(t,e)=>l.substring(t,0,4)==l.substring(e,0,4),this.inMonth=(t,e)=>l.substring(t,0,7)==l.substring(e,0,7),this.inDay=(t,e)=>l.substring(t,0,10)==l.substring(e,0,10),this.inHour=(t,e)=>l.substring(t,0,13)==l.substring(e,0,13),this.diffDate=(t,e)=>Date.parse(t)-Date.parse(e),this.startDay=t=>t&&m(t)+"T00:00:00.0",this.endDay=t=>t&&m(t)+"T23:59:59.999",this.isoDate=t=>t&&m(t),this.isoTime=t=>t&&t.substring(11,19),this.isoDateTime=(t,e)=>t+"T"+e+".0",this.minify=t=>t&&t.trim().replace(/\s+/g," "),this.toWord=t=>t&&c(t),this.toUpperWord=t=>t&&c(t).toUpperCase(),this.lines=t=>l.split(t,/[\n\r]+/),this.words=t=>l.split(t,/\s+/),this.between=function(t,e,s){return s=s||t,(e=e||t)<=t&&t<=s},this.cmp=function(t,e){return d(t)&&d(e)?t<e?-1:e<t?1:0:d(t)?-1:1},this.cmpBy=(t,e,s)=>l.cmp(t[s],e[s]),this.eq=(t,e)=>n(t)==n(e),this.ilike=(t,e)=>-1<o(t,e),this.olike=(e,t,s)=>t.some(t=>l.ilike(e[t],s)),this.alike=(e,s,t)=>l.words(t).some(t=>l.olike(e,s,t)),this.multilike=(e,s,t)=>t.every(t=>l.ilike(e[t],s[t])),this.multicmp=t=>t.map(s=>(t,e)=>l.cmp(t[s],e[s])),this.in=(t,e,s)=>!t||l.between(t,e,s),this.val=(t,e)=>t[e],this.enVal=(t,e)=>t[e+"_en"]||t[e],this.format=(t,e,s)=>e.render(t,s),this.render=(t,e,s)=>e.render(t,s),this.entries=function(t,e,s){const i=(s=s||{}).getValue||l.val;let n=h;for(const a in t){const o=s[a];var r=o?o(t[a],t):i(t,a);n+=e.replace("@key;",a).replace("@value;",r)}return n}}function TreeBox(){const l=this;var r,a,o;function h(){return!0}function d(t,e){return t.push(e),e}function c(t,e,s){s={id:s,data:e,childnodes:[]};return s.level=t.level+1,o(t,s)?d(t.childnodes,s):null}this.preorder=function(t,e,s){return function e(s,i,n,r){var a=i.childnodes.length;for(let t=0;t<a;t++){var o=i.childnodes[t];n(s,i,o,t)&&e(s,o,n,r),t=r(s,i,o,t)?t:a}return l}(t,t,e,s||h)},this.resume=function(e,t){o=t||h;var s,i=e.length,n=[];0<i&&(s=d(n,e[0]));for(let t=1;t<i;t++){var r=e[t];o(s,r,t,n)&&(s=d(n,r))}return n},this.group=function(t,e,s){return s=Object.assign({id:0,level:0,childnodes:[]},s),o=s.onGroup||h,(s.data=t).forEach(function(i,t){var n=s;e.forEach(function(e,t){var s=i[e];n=n.childnodes.find(t=>t.id==s)||c(n,n.data.filter(t=>t[e]==s),s)||n})}),s},this.tree=function(e,s){return s=Object.assign({id:0,level:0,childnodes:[]},s),r=s.pk||"id",a=s.fk||"parent",o=s.onGroup||h,s.data=e.filter(t=>!t[a]),s.data.forEach(t=>function e(s,t,i){var n=c(t,s.filter(t=>t[a]==i),i);return n&&n.data.forEach(t=>e(s,n,t[r])),n}(e,s,t[r])),s}}function ValidatorBox(){const i=this,e=/"|'|&|<|>|\\/g,s={'"':"&#34;","'":"&#39;","&":"&#38;","<":"&#60;",">":"&#62;","\\":"&#92;"},n=/^\d+$/,r=/^\d+(,\d+)*$/,a=/\w+[^\s@]+@[^\s@]+\.[^\s@]+/,o=/^\d{4}-[01]\d-[0-3]\d/,l=/[0-2]\d:[0-5]\d:[0-5]\d[\.\d{1,3}]?$/,h=/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d[\.\d{1,3}]?$/,d=/^[\w#@&°!§%;:=\^\/\(\)\?\*\+\~\.\,\-\$]{8,}$/;const c=/^[A-Z]{6,6}[A-Z2-9][A-NP-Z0-9]([A-Z0-9]{3,3}){0,1}$/;const u=/^(\d{8})([A-Z])$/,m=/^([ABCDEFGHJKLMNPQRSUVW])(\d{7})([0-9A-J])$/,g=/^[XYZ]\d{7,8}[A-Z]$/;const f=sb.toUpperWord;function p(t,e,s){return t=i.escape(t),nb.between(sb.size(t),e,s)?t:null}this.range=(t,e,s)=>nb.between(+t,e,s)?t:null,this.gt0=t=>i.range(t,1e-4,1e9),this.intval=t=>i.range(nb.intval(t),1,9),this.intval3=t=>i.range(nb.intval(t),1,3),this.intval5=t=>i.range(nb.intval(t),1,5),this.fk=t=>i.range(nb.intval(t),1,1/0),this.size=function(t,e,s){return t=sb.trim(t),nb.between(sb.size(t),e,s)?t:null},this.required=t=>i.size(t,1,1e3),this.size10=t=>i.size(t,0,10),this.size50=t=>i.size(t,0,50),this.size200=t=>i.size(t,0,200),this.size300=t=>i.size(t,0,300),this.unescape=t=>t?t.replace(/&#(\d+);/g,(t,e)=>String.fromCharCode(e)):null,this.escape=t=>t?t.trim().replace(e,t=>s[t]):null,this.text10=t=>p(t,0,10),this.text50=t=>p(t,0,50),this.text200=t=>p(t,0,200),this.text300=t=>p(t,0,300),this.text=t=>p(t,0,1e3),this.regex=(t,e)=>sb.test(sb.trim(e),t),this.date=t=>i.regex(o,t),this.time=t=>i.regex(l,t),this.isoDateTime=t=>i.regex(h,t),this.login=t=>i.regex(d,t),this.digits=t=>i.regex(n,t),this.idlist=t=>i.regex(r,t),this.swift=t=>i.regex(c,t),this.email=function(t){return(t=i.regex(a,t))&&t.toLowerCase()};const b=(new Date).toISOString().substring(0,19),v=b.substring(0,10),T=(t,e)=>sb.size(t)==sb.size(e);function y(t){return"TRWAGMYFPDXBNJZSQVHLCKE".charAt(parseInt(t,10)%23)==t.charAt(8)?t:null}this.past=t=>T(t,v)&&t<v?t:null,this.dtPast=t=>T(t,b)&&t<b?t:null,this.leToday=t=>T(t,v)&&t<=v?t:null,this.future=t=>T(t,v)&&t>v?t:null,this.dtFuture=t=>T(t,b)&&t>b?t:null,this.geToday=t=>T(t,v)&&t>=v?t:null,this.dni=function(t){return(t=sb.test(f(t),u))&&y(t)},this.cif=function(t){if(!(t=sb.test(f(t),m)))return null;for(var e=t.match(m),s=e[1],i=e[2],e=e[3],n=0,r=0;r<i.length;r++){var a=parseInt(i[r],10);n+=a=r%2==0?(a*=2)<10?a:parseInt(a/10)+a%10:a}var o=0!==(n%=10)?10-n:n,l="JABCDEFGHI".substr(o,1);return(s.match(/[ABEH]/)?e==o:!s.match(/[KPQS]/)&&e==o||e==l)?t:null},this.nie=function(t){if(!(t=sb.test(f(t),g)))return null;var e=t.charAt(0);return y(("X"==e?0:"Y"==e?1:"Z"==e?2:e)+t.substr(1))},this.idES=function(t){return i.dni(t)||i.cif(t)||i.nie(t)},this.iban=function(t){var e=(t=f(t))&&t.match(/^([A-Z]{2})(\d{2})([A-Z\d]+)$/);if(!e||sb.size(t)!=={AD:24,AE:23,AT:20,AZ:28,BA:20,BE:16,BG:22,BH:22,BR:29,CH:21,CR:22,CY:28,CZ:24,DE:22,DK:18,DO:28,EE:20,ES:24,FI:18,FO:18,FR:27,GB:22,GI:23,GL:18,GR:27,GT:28,HR:21,HU:28,IE:22,IL:23,IS:26,IT:27,JO:30,KW:30,KZ:20,LB:28,LI:21,LT:20,LU:20,LV:21,MC:27,MD:24,ME:22,MK:19,MR:27,MT:31,MU:30,NL:18,NO:15,PK:24,PL:28,PS:29,PT:25,QA:29,RO:24,RS:22,SA:24,SE:24,SI:19,SK:24,SM:27,TN:24,TR:26,AL:28,BY:28,EG:29,GE:22,IQ:23,LC:32,SC:31,ST:25,SV:28,TL:23,UA:29,VA:22,VG:24,XK:20}[e[1]])return null;let s=(e[3]+e[1]+e[2]).replace(/[A-Z]/g,t=>t.charCodeAt(0)-55),i=s.toString(),n=i.slice(0,2);for(let t=2;t<i.length;t+=7){var r=n+i.substring(t,t+7);n=parseInt(r,10)%97}return 1===n?t:null};const I={2080:"Abanca",1544:"Andbank España","0182":"BBVA",9e3:"Banco de España","0186":"Banco Mediolanum","0081":"Banco Sabadell","0049":"Banco Santander","0128":"Bankinter","0065":"Barclays Bank","0058":"BNP Paribas España",2100:"Caixabank","0122":"Citibank España","0154":"Credit Agricole","0019":"Deutsche Bank","0239":"Evo Banco","0162":"HSBC Bank",2085:"Ibercaja Banco",1465:"ING",1e3:"Instituto de crédito oficial",2095:"Kutxabank","0073":"Openbank",2103:"Unicaja Banco",3058:"Cajamar",3085:"Caja Rural",3146:"Novanca","0238":"Banco Pastor","0487":"Banco Mare Nostrum",2090:"Caja de Ahorros Mediterraneo","0030":"Banco Español de Crédito","0146":"Citibank"};this.getEntidades=()=>I,this.getIban1=t=>sb.substr(t,0,4),this.getIban2=t=>sb.substr(t,4,4),this.getEntidad=t=>I[i.getIban2(t)],this.getIban3=t=>sb.substr(t,8,4),this.getOficina=t=>sb.substr(t,8,4),this.getDC=t=>sb.substr(t,12,2),this.getIban4=t=>sb.substr(t,12,4),this.getIban5=t=>sb.substr(t,16,4),this.getIban6=t=>sb.substr(t,20,4),this.getIban7=t=>sb.substr(t,24,4),this.getIban8=t=>sb.substr(t,28,4),this.creditCardNumber=function(s){if(s=f(s),16!=sb.size(s))return null;let i=0,n=!1;for(let e=15;0<=e;e--){let t=+s[e];n&&(t=(t*=2)-(9<t?9:0)),i+=t,n=!n}return i%10==0?s:null},this.generatePassword=function(t,e){return e=e||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_#@&°!§%;:=^/()?*+~.,-$",Array.apply(null,Array(t||10)).map(()=>e.charAt(Math.random()*e.length)).join("")},this.testPassword=function(t){var e=0;return e=(e=(e=(e=(e+=/[A-Z]+/.test(t)?1:0)+(/[a-z]+/.test(t)?1:0))+(/[0-9]+/.test(t)?1:0))+(/[\W]+/.test(t)?1:0))+(2<e&&8<sb.size(t))}}const ab=new ArrayBox,dt=new DateBox,gb=new GraphBox,nb=new NumberBox,sb=new StringBox,tb=new TreeBox,valid=new ValidatorBox,i18n=new I18nBox,dom=new DomBox;dom.ready(function(){const t=document.body.lastElementChild,e=(window.onscroll=function(){dom.toggle(t,"hide",this.pageYOffset<80)},dom.addClick(t,t=>!dom.scroll()),t.previousElementSibling);dom.loading=()=>dom.show(e).closeAlerts(),dom.working=()=>dom.fadeOut(e),dom.eachInput(".ui-bool",t=>{t.value=i18n.fmtBool(t.value)}).onChangeInputs(".ui-integer",t=>{t.value=i18n.fmtInt(t.value),dom.toggle(t,"texterr",sb.starts(t.value,"-"))}).onChangeInputs(".ui-float",t=>{t.value=i18n.fmtFloat(t.value),dom.toggle(t,"texterr",sb.starts(t.value,"-"))});var s=dom.getInputs("textarea[maxlength]");function i(t){var e=Math.abs(t.getAttribute("maxlength")-sb.size(t.value));dom.setText(dom.get(".counter",t.parentNode),e)}dom.keyup(s,i).each(s,i),dom.autocomplete=function(t,i){var e=()=>!1;const s=t=>dom.get("[type=hidden]",t.parentNode);t=dom.getInputs(t);let n=!1;return(i=i||{}).action=i.action||"#",i.minLength=i.minLength||3,i.maxResults=i.maxResults||10,i.delay=i.delay||500,i.open=i.open||e,i.focus=i.focus||e,i.load=i.load||e,i.sort=i.sort||(t=>t),i.remove=i.remove||e,i.render=i.render||(()=>"-"),i.search=(t,e)=>n,i.select=function(t,e){return i.load(e.item,this,s(this)),!1},i.source=function(s,e){this.element.autocomplete("instance")._renderItem=function(t,e){e=sb.iwrap(i.render(e),s.term);return $("<li>").append("<div>"+e+"</div>").appendTo(t)},dom.ajax(i.action+"?term="+s.term,t=>{e(i.sort(t).slice(0,i.maxResults))})},i.change=function(t,e){e.item||(dom.val("",this).val("",s(this)),i.remove(this))},$(t).autocomplete(i),dom.keydown(t,(t,e)=>{n=8==e.keyCode||sb.between(e.keyCode,46,111)||sb.between(e.keyCode,160,223)})},dom.each("ul.menu",n=>{const t=dom.sort(n.children,(t,e)=>+t.dataset.orden-+e.dataset.orden);t.forEach(t=>{var s=t.dataset.padre;let i=t.dataset.mask??4;if(s){let e=dom.get("li[id='"+s+"']",n);e&&((s=+e.dataset.children||0)||(e.innerHTML+='<ul class="sub-menu"></ul>',e.firstElementChild.innerHTML+='<b class="nav-tri"></b>',dom.click(e.firstElementChild,t=>!dom.toggle(e,"active"))),i&=e.dataset.mask??4,e.dataset.children=s+1,e.lastElementChild.appendChild(t))}else n.appendChild(t);dom.toggle(t.firstElementChild,"disabled",!(4&i))}),dom.onclick(".sidebar-toggle",t=>!dom.toggle(n,"active")).show(n)}),dom.onExitTab(()=>console.log("exit tabs")),dom.onShowTab(1,t=>console.log("show tab-1")),dom.onLoadTab(2,t=>{const e=(t,e)=>sb.cmp(t.memo,e.memo),s={index:0,start:0,page:0,pageSize:5,sort:e},i={imp:i18n.toFloat,imp1:i18n.toFloat,imp2:i18n.toFloat},n={imp:i18n.isoFloat,fecha:i18n.fmtDate,onRender:t=>{s.imp+=t.imp||0}};var r,a;const o=t=>!dom.createRow("#test",s,n,t).hide(".update-only"),l=t=>!dom.selectRow("#test",r,s,n,t).show(".update-only").viewTab(3),h=t=>{r=t,dom.repaginate("#pruebas",r,s,n).setFocus("#filter-name")},d=t=>dom.updateTable("#pruebas",r,s,n).viewTab(t).showOk("saveOk"),c=(t,e)=>{r.push(t),d(e)},u=t=>{t=dom.validate(t,{testFormError:"form err",fecha:i18n.leToday,imp:i18n.gt0,name:i18n.required,memo:i18n.required});return t&&Object.assign(s.data,t)},m="https://jsonplaceholder.typicode.com/users";dom.api.get(m).then(t=>{const s=[{id:1,name:"Row 1",memo:"jj234 234234 kjhl",imp:10.7,fecha:"2022-05-20 12:00:01",binary:5},{id:2,name:"Row 2",memo:"ab jdasklñlkaf jasfd",imp:3256.1,binary:7},{id:3,name:"Row 3",memo:"tt 8374 124893 aksdfj",imp:154.81,binary:9},{id:4,name:"Row 4",memo:"hh ñldjafj añskdj",imp:.34,fecha:"2022-03-21 09:41:35",binary:3},{id:5,name:"Row 5",memo:"bc lfda lsañkdfj fjs",imp:99.4},{id:6,name:"Row 6",memo:"lñasdkfdk sldañkf ddd",imp:613.47,binary:6},{id:7,name:"Row 7",memo:"lñasdkfdk sldañkf",fecha:"2022-01-17 14:25:11",binary:15}];(a=t).forEach((t,e)=>{t.memo=s[e]?.memo,t.imp=s[e]?.imp,t.fecha=s[e]?.fecha,t.binary=s[e]?.binary}),h(t)}),dom.onRenderTable("#pruebas",(t,e)=>{s.imp=0,dom.toggleHide("a[href='#clear-pruebas']",!r.length)}),dom.onFindRow("#pruebas",(t,e)=>l(e.detail.index)).onRemoveRow("#pruebas",(t,e)=>dom.viewTab(2).showOk("removeOk")).addClick("a[href='#clear-pruebas']",t=>i18n.confirm("removeAll")&&!dom.clearTable("#pruebas",r,s,n)).onChangeTable("#pruebas",(t,e)=>console.log("change",e.detail)).onTable("#pruebas","sort-name",t=>{delete s.sort}).onTable("#pruebas","sort-memo",t=>{s.sort=e}).onTable("#pruebas","sort-imp",t=>{s.sort=(t,e)=>nb.cmp(t.imp,e.imp)}).onTable("#pruebas","sort-fecha",t=>{delete s.sort}).onSortTable("#pruebas",t=>dom.table(t,r,s,n)).onChangeInput("#page-size",t=>{s.pageSize=+t.value,h(r)}),dom.setRangeDate("#f1","#f2").onClick("a.create-data",()=>o({})),dom.onResetForm("#filter",t=>(setTimeout(function(){h(a)},1),dom.closeAlerts())).onSubmitForm("#filter",t=>{const e={},s=["name","memo"];dom.closeAlerts().load(t,e,i),h(a.filter(t=>sb.multilike(t,e,s)&&nb.in(t.imp,e.imp1,e.imp2)&&sb.in(t.fecha,e.f1,e.f2)))}),dom.addClick("a[href='#first-item']",t=>l(0)).addClick("a[href='#prev-item']",t=>l(s.index-1)).addClick("a[href='#next-item']",t=>l(s.index+1)).addClick("a[href='#last-item']",t=>l(r.length)).addClick("a[href='#remove-item']",t=>!dom.removeRow("#pruebas",r,s,n)).parse("#entidades",t=>sb.entries(valid.getEntidades(),t)),dom.addClick("button#clone",t=>{u(t.form)&&(s.data.id?dom.api.put(m+"/"+s.data.id,s.data).then(t=>{o(ab.flush(t,["id"])),d(3)}):dom.api.post(m,s.data).then(t=>c(t,3)))}).onSubmitForm("#test",t=>{u(t)&&(s.data.id?dom.api.put(m+"/"+s.data.id,s.data).then(t=>d(2)):dom.api.post(m,s.data).then(t=>c(t,2)))})}),dom.onclick("a[href='#toggle']",t=>!dom.toggleLink(t).toggle(dom.get("i.fas",t),t.dataset.icon))});