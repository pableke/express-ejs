function MessageBox(t){const e=this,r={en:{errForm:"Form validation failed",errRequired:"Required field!",errMinlength8:"The minimum required length is 8 characters",errNif:"Wrong ID format",errCorreo:"Wrong Mail format",errRegex:"Wrong format",remove:"Are you sure to delete element?",cancel:"Are you sure to cancel element?"},es:{errForm:"Error al validar los campos del formulario",errRequired:"Campo obligatorio!",errMinlength8:"La longitud mínima requerida es de 8 caracteres",errNif:"Formato de NIF / CIF incorrecto",errCorreo:"Formato de E-Mail incorrecto",errRegex:"Formato incorrecto",remove:"¿Confirma que desea eliminar este registro?",cancel:"¿Confirma que desea cancelar este registro?"}};let n=r.es;this.getLang=function(t){return t?r[t]:n},this.setLang=function(t,n){return r[t]=n,e},this.getI18n=function(t){return t&&(r[t]||r[t.substr(0,2)])||r.es},this.setI18n=function(t){return n=e.getI18n(t),e},this.get=function(t){return n[t]},this.set=function(t,r){return n[t]=r,e},this.format=function(t){return t.replace(/@(\w+);/g,(t,e)=>nvl(n[e],t))},e.setI18n(t)}function StringBox(){const t=this,e="àáâãäåāăąÀÁÂÃÄÅĀĂĄÆßèéêëēĕėęěÈÉĒĔĖĘĚìíîïìĩīĭÌÍÎÏÌĨĪĬòóôõöōŏőøÒÓÔÕÖŌŎŐØùúûüũūŭůÙÚÛÜŨŪŬŮçÇñÑþÐŔŕÿÝ",r="aaaaaaaaaAAAAAAAAAABeeeeeeeeeEEEEEEEiiiiiiiiIIIIIIIIoooooooooOOOOOOOOOuuuuuuuuUUUUUUUUcCnNdDRryY";function n(t){return"string"==typeof t||t instanceof String}function i(t){return n(t)?t.trim():t}function s(t){return t?t.length:0}function o(t){for(var n="",o=s(i(t)),u=0;u<o;u++){var a=t.charAt(u),l=e.indexOf(a);n+=l<0?a:r.charAt(l)}return n.toLowerCase()}this.isstr=n,this.trim=i,this.size=s,this.eq=function(t,e){return o(t)==o(e)},this.indexOf=function(t,e){return t?t.indexOf(e):-1},this.iIndexOf=function(t,e){return o(t).indexOf(o(e))},this.prevIndexOf=function(t,e,r){return t?t.substr(0,r).lastIndexOf(e):-1},this.prefix=function(t,e){return t.startsWith(e)?t:e+t},this.suffix=function(t,e){return t.endsWith(e)?t:t+e},this.trunc=function(t,e){return s(t)>e?t.substr(0,e).trim()+"...":t},this.itrunc=function(e,r){var n=s(e)>r?t.prevIndexOf(e," ",r):-1;return t.trunc(e,n<0?r:n)},this.removeAt=function(t,e,r){return e<0?t:t.substr(0,e)+t.substr(e+r)},this.insertAt=function(t,e,r){return t?t.substr(0,r)+e+t.substr(r):e},this.replaceAt=function(t,e,r,n){return r<0?t:t.substr(0,r)+e+t.substr(r+n)},this.replaceLast=function(t,e,r){return t?t.replaceAt(t.lastIndexOf(e),e.length,r):r},this.wrapAt=function(e,r,n,i,s){return r<0?e:t.insertAt(t.insertAt(e,i,r),s,r+i.length+n)},this.iwrap=function(e,r,n,i){return e&&r&&t.wrapAt(e,t.iIndexOf(e,r),r.length,n||"<u><b>",i||"</b></u>")},this.rand=function(t){return Math.random().toString(36).substr(2,t||8)},this.lopd=function(t){return t?"***"+t.substr(3,4)+"**":t},this.split=function(t,e){return t?t.trim().split(e||","):[]},this.minify=function(t){return t?t.trim().replace(/\s{2}/g,""):t},this.lines=function(e){return t.split(e,/[\n\r]+/)},this.words=function(e){return t.split(e,/\s+/)},this.ilike=function(e,r){return t.iIndexOf(""+e,r)>-1},this.olike=function(e,r,n){return r.some(function(r){return t.ilike(e[r],n)})},this.alike=function(e,r,n){return t.words(n).some(function(n){return t.olike(e,r,n)})},this.ltr=function(t,e){for(var r=[],n=s(t);n>e;n-=e)r.unshift(t.substr(n-e,e));return n>0&&r.unshift(t.substr(0,n)),r},this.rtl=function(t,e){for(var r=[],n=s(t),i=0;i<n;i+=e)r.push(t.substr(i,e));return r},this.slices=function(t,e){var r=0,n=[],i=s(t);for(let s=0;r<i&&s<e.length;s++){let i=e[s];n.push(t.substr(r,i)),r+=i}return r<i&&n.push(t.substr(r)),n}}function ValidatorBox(){const t=this,e={},r={},n=/^\d+$/,i=/^\d+(,\d+)*$/,s=/\w+[^\s@]+@[^\s@]+\.[^\s@]+/,o=/^[\w#@&°!§%;:=\^\/\(\)\?\*\+\~\.\,\-\$]{8,}$/,u=/^(\d{8})([A-Z])$/,a=/^([ABCDEFGHJKLMNPQRSUVW])(\d{7})([0-9A-J])$/,l=/^[XYZ]\d{7,8}[A-Z]$/;function c(t){return t?t.length:0}function f(t){return t?t.trim():t}function d(t){return t?t.trim().replace(/\W+/g,"").toUpperCase():t}function h(t,e){try{return t.test(e)}catch(t){}return!1}this.size=function(t,e,r){let n=c(t);return e<=n&&n<=r},this.regex=function(t,e){return h(t,e)},this.login=function(t){return h(o,t)},this.email=function(t){return h(s,t)},this.digits=function(t){return h(n,t)},this.idlist=function(t){return h(i,t)},this.idES=function(e){return!!(e=d(e))&&(h(u,e)?t.dni(e):h(a,e)?t.cif(e):!!h(l,e)&&t.nie(e))},this.dni=function(t){return"TRWAGMYFPDXBNJZSQVHLCKE".charAt(parseInt(t,10)%23)==t.charAt(8)},this.cif=function(t){for(var e=t.match(a),r=e[1],n=e[2],i=e[3],s=0,o=0;o<n.length;o++){var u=parseInt(n[o],10);o%2==0&&(u=(u*=2)<10?u:parseInt(u/10)+u%10),s+=u}var l=0!==(s%=10)?10-s:s,c="JABCDEFGHI".substr(l,1);return r.match(/[ABEH]/)?i==l:r.match(/[KPQS]/)?i==c:i==l||i==c},this.nie=function(e){var r=e.charAt(0),n="X"==r?0:"Y"==r?1:"Z"==r?2:r;return t.dni(n+e.substr(1))},this.iban=function(t){if(24!=c(t=d(t)))return!1;const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";let r=e.search(t.substring(0,1))+10,n=e.search(t.substring(1,2))+10,i=String(r)+String(n)+t.substring(2);i=i.substring(6)+i.substring(0,6);let s="",o=Math.ceil(i.length/7);for(let t=1;t<=o;t++)s=String(parseFloat(s+i.substr(7*(t-1),7))%97);return 1==s},this.creditCardNumber=function(t){if(16!=c(t=d(t)))return!1;let e=0,r=!1;t=t.trim().replace(/\s+/g,"");for(let n=15;n>=0;n--){let i=+t[n];r&&(i*=2,i-=i>9?9:0),e+=i,r=!r}return e%10==0},this.generatePassword=function(t,e){return e=e||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_#@&°!§%;:=^/()?*+~.,-$",Array.apply(null,Array(t||10)).map(function(){return e.charAt(Math.random()*e.length)}).join("")},this.testPassword=function(t){let e=0;return e+=/[A-Z]+/.test(t)?1:0,e+=/[a-z]+/.test(t)?1:0,e+=/[0-9]+/.test(t)?1:0,e+=/[\W]+/.test(t)?1:0,e+=e>2&&c(t)>8},this.get=function(e){return t[e]},this.set=function(e,r){return t[e]=r,t},this.getErrors=function(){return e},this.getError=function(t){return e[t]},this.addMsg=function(r,n){return e[r]=n,t},this.setError=function(r,n){return e.num++,t.addMsg(r,n)},this.getForm=function(t){return r[t]},this.setForm=function(e,n){return r[e]=n,t},this.setForms=function(e){return Object.assign(r,e),t},this.getFields=function(e){let r=t.getForm(e);return r?Object.keys(r):[]},this.values=function(t,e){e=e||{};let r=c(t);for(let n=0;n<r;n++){let r=t[n];r.name&&(e[r.name]=f(r.value))}return e},this.fails=function(){return e.num>0},this.isValid=function(){return 0==e.num},this.validate=function(r,n,i){for(let t in e)delete e[t];e.num=0;let s=t.getForm(r);return t.getFields(r).forEach(t=>{let e=s[t];e&&e(t,f(n[t]),i,n)}),t.isValid()}}$(document).ready(function(){let t=$("html").attr("lang"),e=new StringBox,r=new MessageBox(t);function n(t){t.parentNode.classList.add("d-none")}function i(t){t.parentNode.classList.remove("d-none")}function s(t,e){t.innerHTML=e,i(t)}let o=document.querySelectorAll(".alert-text");o.forEach(t=>{t.firstChild?i(t):n(t)});let u=document.querySelectorAll(".alert-close");function a(t){t&&s(o[0],t)}function l(t){t&&s(o[2],t)}function c(t){t&&s(o[3],t)}function f(){u.forEach(t=>{t.click()})}u.forEach(t=>{t.addEventListener("click",function(){n(t)})});let d=document.querySelector(".loading");function h(){$(d).show(),f()}function m(){$(d).fadeOut()}function g(t){return t?"addClass":"removeClass"}function v(t,e){let r=t.dataset.dest;r?($(r).html(e),a(t.dataset.msg)):a(e)}$(document).on("input",".clearable",function(){$(this)[g(this.value)]("x")}).on("mousemove",".x",function(t){$(this)[g(this.offsetWidth-28<t.clientX-this.getBoundingClientRect().left)]("onX")}).on("touchstart click",".onX",function(t){t.preventDefault(),$(this).removeClass("x onX").val("").change()}),$("a.ajax").click(function(t){h();let e=this;function r(t){return v(e,t)}fetch(e.href).then(t=>t.text().then(t.ok?r:c)).catch(c).finally(m),t.preventDefault()});let p=document.querySelectorAll("form");for(let t=p.length-1;t>-1;t--){const n="input-error",i=".msg-error",u="textarea[maxlength]";let d=p[t],g=d.elements;function b(){$("#counter-"+this.id,d).text(Math.abs(this.getAttribute("maxlength")-e.size(this.value)))}function A(){$(g).filter(":not([type=hidden])[tabindex]:not([readonly])").first().focus()}function E(){$(g).removeClass(n).siblings(i).text(""),$(g).filter(u).each(b),f(),A()}function x(t){return t.nif+" - "+t.nombre}function y(t,e,r){return!$(t).val(r).siblings("[type=hidden]").val(e)}$(g).filter(u).keyup(b).each(b),$(g).filter(".ac-user").autocomplete({minLength:3,source:function(t,r){h(),this.element.autocomplete("instance")._renderItem=function(r,n){let i=e.iwrap(x(n),t.term);return $("<li></li>").append("<div>"+i+"</div>").appendTo(r)},fetch("/usuarios.html?term="+t.term).then(t=>t.json()).then(t=>{r(t.slice(0,10))}).catch(c).finally(m)},focus:function(){return!1},select:function(t,e){return y(this,e.item.nif,x(e.item))}}).change(function(t){this.value||y(this,"","")}),$(g).filter("[type=reset]").click(t=>{d.reset(),E()}),A(),d.addEventListener("submit",function(t){function u(t){$(g).val(""),E(),v(d,t)}function f(t){E();for(let r=e.size(g)-1;r>-1;r--){let e=g[r],s=e.name&&t[e.name];s&&$(e).focus().addClass(n).siblings(i).html(s)}var r;a(t.msgOk),(r=t.msgInfo)&&s(o[1],r),l(t.msgWarn),c(t.msgError)}let p=valid.values(g);if(!valid.validate(d.getAttribute("action"),p,r.getLang()))return f(valid.addMsg("msgError",r.get("errForm")).getErrors()),t.preventDefault();if(!d.classList.contains("ajax"))return!0;h();let b=new FormData(d);fetch(d.action,{method:d.method,body:"multipart/form-data"===d.enctype?b:new URLSearchParams(b),headers:{"Content-Type":d.enctype||"application/x-www-form-urlencoded","x-requested-with":"XMLHttpRequest"}}).then(t=>t.ok?t.text().then(u):t.json().then(f)).catch(c).finally(m),t.preventDefault()})}}),$(document).ready(function(){$("ul.menu").each(function(t,e){$(e.children).filter("[parent][parent!='']").each((t,r)=>{let n=$("#"+$(r).attr("parent"),e);n.children().last().is(e.tagName)||n.append('<ul class="sub-menu"></ul>').children("a").append('<b class="nav-tri">&rtrif;</b>'),n.children().last().append(r)}),$(e.children).remove("[parent][parent!='']"),e.querySelectorAll("i").forEach(t=>{t.classList.length<=1&&t.parentNode.removeChild(t)});let r=$("b.nav-tri",e);r.parent().click(function(t){$(this.parentNode).toggleClass("active"),t.preventDefault()}),$("li",e).hover(function(){r.html("&rtrif;"),$(this).children("a").find("b.nav-tri").html("&dtrif;"),$(this).parents("ul.sub-menu").prev().find("b.nav-tri").html("&dtrif;")}),$("[disabled]",e).each(function(){let t=parseInt(this.getAttribute("disabled"))||0;$(this).toggleClass("disabled",3!=(3&t))}).removeAttr("disabled")}).children().fadeIn(200),$(".sidebar-toggle").click(t=>{$("#sidebar").toggleClass("active"),$(".sidebar-icon",this.parentNode).toggleClass("d-none"),t.preventDefault()});let t=$(".menu-toggle").click(e=>{e.preventDefault(),t.toggleClass("d-none"),$("#wrapper").toggleClass("toggled")}),e=$("#back-to-top").click(function(){return!$("body,html").animate({scrollTop:0},400)});$(window).scroll(function(){$(this).scrollTop()>50?e.fadeIn():e.fadeOut()}),document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();try{document.querySelector(this.href).scrollIntoView({behavior:"smooth"})}catch(t){}})})}),document.addEventListener("DOMContentLoaded",function(){let t=document.querySelectorAll("#progressbar li"),e=0;document.querySelectorAll(".next-tab").forEach(r=>{r.addEventListener("click",r=>(e<t.length-1&&t[++e].classList.add("active"),!1))}),$(".prev-tab").click(function(){return e&&t[e--].classList.remove("active"),!1}),$("a[href^='#tab-']").click(function(){let r=+this.href.substr(this.href.lastIndexOf("-")+1);return 0<=r&&r!=e&&r<t.length&&(t.forEach((t,e)=>{t.classList.toggle("active",e<=r)}),e=r),!1})});const valid=new ValidatorBox;valid.set("required",function(t,e,r){return valid.size(e,1,200)||!valid.setError(t,r.errRequired)}).set("min8",function(t,e,r){return valid.size(e,8,200)||!valid.setError(t,r.errMinlength8)}).set("usuario",function(t,e,r){return valid.min8(t,e,r)&&(valid.idES(e)||valid.email(e)||!valid.setError(t,r.errRegex))}).set("clave",function(t,e,r){return valid.min8(t,e,r)&&(valid.login(e)||!valid.setError(t,r.errRegex))}).set("reclave",function(t,e,r,n){return valid.clave(t,e,r)&&(e==n.clave||!valid.setError(t,r.errReclave))}).set("nif",function(t,e,r){return valid.required(t,e,r)&&(valid.idES(e)||!valid.setError(t,r.errNif))}).set("correo",function(t,e,r){return valid.required(t,e,r)&&(valid.email(e)||!valid.setError(t,r.errCorreo))}).setForm("/login.html",{usuario:valid.usuario,clave:valid.clave}).setForm("/test.html",{nombre:valid.required,correo:valid.correo,asunto:valid.required,info:function(t,e,r){return valid.size(e,1,600)||!valid.setError(t,r.errRequired)}});