function JsBox(){const e=this;function t(e){console.log("Log:",e)}function r(e){return e?e.length:0}function n(e){return e&&1===e.nodeType}function i(e,t){return n(e)&&e.matches(t)}function a(e,t,r){e.matches(t)&&r.push(e)}function s(e,t,r){for(let n=e.nextElementSibling;n;n=n.nextElementSibling)a(n,t,r);for(let n=e.previousElementSibling;n;n=n.previousElementSibling)a(n,t,r)}function o(e,t){for(let r=e.nextElementSibling;r;r=r.nextElementSibling)t.push(r);for(let r=e.previousElementSibling;r;r=r.previousElementSibling)t.push(r)}this.getLang=function(){return document.querySelector("html").getAttribute("lang")||navigator.language||navigator.userLanguage},this.buildPath=function(e){let t=new URLSearchParams(e),r=new URLSearchParams(window.location.search);return t.forEach((e,t)=>r.set(t,e)),window.location.pathname+"?"+r.toString()},this.scrollTop=function(t){t=t||600;let r=-window.scrollY/(t/15),n=setInterval(()=>{window.scrollY>0?window.scrollBy(0,r):clearInterval(n)},15);return e},this.fetch=function(e){return(e=e||{}).headers=e.headers||{},e.reject=e.reject||t,e.resolve=e.resolve||t,e.headers["x-requested-with"]="XMLHttpRequest",fetch(e.action,e).then(t=>{return((t.headers.get("content-type")||"").indexOf("application/json")>-1?t.json():t.text()).then(t.ok?e.resolve:e.reject)})},this.mask=function(t,r){return e.each(t,(t,n)=>{0==(r>>n&1)?e.addClass(t,"hide"):e.removeClass(t,"hide")})},this.select=function(t,r){e.mask(t.querySelectorAll("option"),r);let n=t.querySelector("option[value='"+t.value+"']");return e.hasClass(n,"hide")&&(n=e.find(t.children,"option:not(.hide)"),t.value=n?n.value:null),e},this.each=function(t,n){let i=r(t);for(let e=0;e<i;e++)n(t[e],e);return e},this.reverse=function(t,n){for(let e=r(t)-1;e>-1;e--)n(t[e],e);return e},this.matches=function(e,t){return t&&i(e,t)},this.find=function(e,t){if(t){if(i(e,t))return e;let n=r(e);for(let r=0;r<n;r++){let n=e[r];if(i(n,t))return n}}return null},this.filter=function(t,r){let n=[];return r&&e.each(t,e=>{a(e,r,n)}),n},this.get=function(e,t){return function(e,t){return t&&e.querySelector(t)}(t||document,e)},this.getAll=function(e,t){return function(e,t){return t&&e.querySelectorAll(t)}(t||document,e)},this.siblings=function(t,r){let i=[];return n(t)?r?s(t,r,i):o(t,i):r?e.each(t,e=>s(e,r,i)):e.each(t,e=>o(e,i)),i},this.focus=function(t){const r=e.find(t,"[tabindex]:not([type=hidden][readonly][disabled]):not([tabindex='-1'][tabindex=''])");return r&&r.focus(),e},this.val=function(t,r){return n(t)?t.value=r:e.each(t,e=>{e.value=r}),e},this.text=function(t,r){return n(t)?t.innerText=r:e.each(t,e=>{e.innerText=r}),e},this.html=function(t,r){return n(t)?t.innerHTML=r:e.each(t,e=>{e.innerHTML=r}),e},this.isVisible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},this.show=function(t,r){return r=r||"block",n(t)?t.style.display=r:e.each(t,e=>{e.style.display=r}),e},this.hide=function(t){return n(t)?t.style.display="none":e.each(t,e=>{e.style.display="none"}),e},this.hasClass=function(e,t){let n=r(e)?e[0]:e;return n&&n.classList.contains(t)},this.addClass=function(t,r){return n(t)?t.classList.add(r):e.each(t,e=>e.classList.add(r)),e},this.removeClass=function(t,r){return n(t)?t.classList.remove(r):e.each(t,e=>e.classList.remove(r)),e},this.toggle=function(t,r,i){return n(t)?t.classList.toggle(r,i):e.each(t,e=>e.classList.toggle(r,i)),e};const u=.03;function l(t,r,n){return t.addEventListener(r,e=>n(t,e)),e}this.fadeOut=function(t){function r(e){let t=parseFloat(e.style.opacity)||0;!function r(){(t-=u)<0?e.style.display="none":requestAnimationFrame(r),e.style.opacity=t}()}return n(t)?r(t):e.each(t,r),e},this.fadeIn=function(t,r){function i(e){e.style.display=r||"block";let t=parseFloat(e.style.opacity)||0;!function r(){(t+=u)<1&&requestAnimationFrame(r),e.style.opacity=t}()}return n(t)?i(t):e.each(t,i),e},this.fadeToggle=function(t,n){let i=r(t)?t[0]:t;return(parseFloat(i&&i.style.opacity)||0)<u?e.fadeIn(t,n):e.fadeOut(t)},this.ready=function(e){return l(document,"DOMContentLoaded",e)},this.click=function(t,r){return n(t)?l(t,"click",r):e.each(t,e=>l(e,"click",r))},this.change=function(t,r){return n(t)?l(t,"change",r):e.each(t,e=>l(e,"change",r))},this.keyup=function(t,r){return n(t)?l(t,"keyup",r):e.each(t,e=>l(e,"keyup",r))},this.keydown=function(t,r){return n(t)?l(t,"keydown",r):e.each(t,e=>l(e,"keydown",r))}}function MessageBox(){const e=this,t="",r="0",n=".",i=new Date,a=/\D+/g,s=[31,28,31,30,31,30,31,31,30,31,30,31],o={en:{lang:"en",errForm:"Form validation failed",errRequired:"Required field!",errMinlength8:"The minimum required length is 8 characters",errMaxlength:"Max length exceded",errNif:"Wrong ID format",errCorreo:"Wrong Mail format",errDate:"Wrong date format",errDateLe:"Date must be less or equals than current",errDateGe:"Date must be greater or equals than current",errNumber:"Wrong number format",errGt0:"Price must be great than 0.00 &euro;",errRegex:"Wrong format",errReclave:"Passwords typed do not match",errRange:"Value out of allowed range",remove:"Are you sure to delete element?",cancel:"Are you sure to cancel element?",closeText:"close",prevText:"prev",nextText:"next",currentText:"current",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dateFormat:"yy-mm-dd",firstDay:0,decimals:n,toInt:function(e){return e&&b(e)},fmtInt:function(e){return e&&y(e,",")},toFloat:function(e){return e&&A(e,n)},fmtFloat:function(e,t){return e&&D(e,",",n,t)},toDate:function(e){return e&&m(v(c(e)))},acDate:function(e){return e&&e.replace(/^(\d{4})(\d+)$/g,"$1-$2").replace(/^(\d{4}\-\d\d)(\d+)$/g,"$1-$2").replace(/[^\d\-]/g,t)},acTime:function(e){return e&&e.replace(/(\d\d)(\d+)$/g,"$1:$2").replace(/[^\d\:]/g,t)},isoDate:function(e){return e&&v(c(e)).map(l).join("-")},isoTime:function(e){return e&&p(e)}},es:{lang:"es",errForm:"Error al validar los campos del formulario",errRequired:"Campo obligatorio!",errMinlength8:"La longitud mínima requerida es de 8 caracteres",errMaxlength:"Longitud máxima excedida",errNif:"Formato de NIF / CIF incorrecto",errCorreo:"Formato de E-Mail incorrecto",errDate:"Formato de fecha incorrecto",errDateLe:"La fecha debe ser menor o igual a la actual",errDateGe:"La fecha debe ser mayor o igual a la actual",errNumber:"Valor no numérico",errGt0:"El importe debe ser mayor de 0,00 &euro;",errRegex:"Formato incorrecto",errReclave:"Las claves introducidas no coinciden",errRange:"Valor fuera del rango permitido",remove:"¿Confirma que desea eliminar este registro?",cancel:"¿Confirma que desea cancelar este registro?",closeText:"close",prevText:"prev.",nextText:"sig.",currentText:"current",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],dateFormat:"dd/mm/yy",firstDay:1,decimals:",",toInt:function(e){return e&&b(e)},fmtInt:function(e){return e&&y(e,n)},toFloat:function(e){return e&&A(e,",")},fmtFloat:function(e,t){return e&&D(e,n,",",t)},toDate:function(e){return e&&m(v(d(c(e))))},acDate:function(e){return e&&e.replace(/^(\d\d)(\d+)$/g,"$1/$2").replace(/^(\d\d\/\d\d)(\d+)$/g,"$1/$2").replace(/[^\d\/]/g,t)},acTime:function(e){return e&&e.replace(/(\d\d)(\d+)$/g,"$1:$2").replace(/[^\d\:]/g,t)},isoDate:function(e){return e&&d(v(d(c(e))).map(l)).join("/")},isoTime:function(e){return e&&p(e)}}};let u=o.es;function l(e){return e<10?r+e:e}function c(e){return e.split(a).map(e=>+e)}function d(e){var t=e[2];return e[2]=e[0],e[0]=t,e}function f(e,t,r){return Math.min(Math.max(e||0,t),r)}function h(e){return f(e,0,59)}function g(e){return e<100?+(t+parseInt(i.getFullYear()/100)+l(e)):e}function m(e){let t=new Date;return function(e,t,r,n){e.setFullYear(t,r-1,n)}(t,e[0],e[1],e[2]),function(e,t,r,n,i){return e.setHours(f(t,0,23),h(r),h(n),i||0),e}(t,e[3],e[4],e[5],e[6])}function v(e){var t,r,n;return e[0]=g(e[0]),e[1]=f(e[1],1,12),e[2]=f(e[2],1,(t=e[0],r=e[1]-1,s[r]+(1==r&&0==(3&(n=t))&&(n%25!=0||0==(15&n))))),e}function p(e){let t=c(e);return t[0]=f(t[0],0,23),t[1]=h(t[1]),t.length>2&&(t[2]=h(t[2])),t.map(l).join(":")}function j(e,t){for(var r=[],n=e.length;n>t;n-=t)r.unshift(e.substr(n-t,t));return n>0&&r.unshift(e.substr(0,n)),r}function b(e){let r="-"==e.charAt(0)?"-":t;return parseInt(r+e.replace(a,t))}function y(e,r){let n="-"==e.charAt(0)?"-":t,i=e.replace(a,t);return isNaN(i)?e:n+j(i,3).join(r)}function A(e,r){let i=e.lastIndexOf(r),s="-"==e.charAt(0)?"-":t,o=i<0?e:e.substr(0,i),u=i<0?t:n+e.substr(i+1);return parseFloat(s+o.replace(a,t)+u)}function D(e,i,s,o){o=isNaN(o)||2;let u=e.lastIndexOf(s),l="-"==e.charAt(0)?"-":t,c=(u<0?e:e.substr(0,u)).replace(a,t).replace(/^0+(\d+)/,"$1"),d=u<0?r:e.substr(u+1),f=parseFloat(l+c+n+d);return isNaN(f)?e:l+j(c,3).join(i)+s+(u<0?r.repeat(o):d.padEnd(o,r))}this.getLang=function(e){return e?o[e]:u},this.setLang=function(t,r){return o[t]=r,e},this.getI18n=function(e){return e&&(o[e]||o[e.substr(0,2)])||o.es},this.setI18n=function(t){return u=e.getI18n(t),e},this.get=function(e){return u[e]},this.set=function(t,r){return u[t]=r,e},this.sysdate=function(){return i},this.format=function(e){return e.replace(/@(\w+);/g,(e,t)=>nvl(u[t],e))}}function StringBox(){const e=this,t="àáâãäåāăąÀÁÂÃÄÅĀĂĄÆßèéêëēĕėęěÈÉĒĔĖĘĚìíîïìĩīĭÌÍÎÏÌĨĪĬòóôõöōŏőøÒÓÔÕÖŌŎŐØùúûüũūŭůÙÚÛÜŨŪŬŮçÇñÑþÐŔŕÿÝ",r="aaaaaaaaaAAAAAAAAAABeeeeeeeeeEEEEEEEiiiiiiiiIIIIIIIIoooooooooOOOOOOOOOuuuuuuuuUUUUUUUUcCnNdDRryY";function n(e){return"string"==typeof e||e instanceof String}function i(e){return n(e)?e.trim():e}function a(e){return e?e.length:0}function s(e){for(var n="",s=a(i(e)),o=0;o<s;o++){var u=e.charAt(o),l=t.indexOf(u);n+=l<0?u:r.charAt(l)}return n.toLowerCase()}this.isstr=n,this.trim=i,this.size=a,this.eq=function(e,t){return s(e)==s(t)},this.indexOf=function(e,t){return e?e.indexOf(t):-1},this.iIndexOf=function(e,t){return s(e).indexOf(s(t))},this.prevIndexOf=function(e,t,r){return e?e.substr(0,r).lastIndexOf(t):-1},this.starts=function(e,t){return e&&e.startsWith(t)},this.ends=function(e,t){return e&&e.endsWith(t)},this.prefix=function(t,r){return e.starts(t,r)?t:r+t},this.suffix=function(t,r){return e.ends(t,r)?t:t+r},this.trunc=function(e,t){return a(e)>t?e.substr(0,t).trim()+"...":e},this.itrunc=function(t,r){var n=a(t)>r?e.prevIndexOf(t," ",r):-1;return e.trunc(t,n<0?r:n)},this.removeAt=function(e,t,r){return t<0?e:e.substr(0,t)+e.substr(t+r)},this.insertAt=function(e,t,r){return e?e.substr(0,r)+t+e.substr(r):t},this.replaceAt=function(e,t,r,n){return r<0?e:e.substr(0,r)+t+e.substr(r+n)},this.replaceLast=function(e,t,r){return e?e.replaceAt(e.lastIndexOf(t),t.length,r):r},this.wrapAt=function(t,r,n,i,a){return r<0?t:e.insertAt(e.insertAt(t,i,r),a,r+i.length+n)},this.iwrap=function(t,r,n,i){return t&&r&&e.wrapAt(t,e.iIndexOf(t,r),r.length,n||"<u><b>",i||"</b></u>")},this.rand=function(e){return Math.random().toString(36).substr(2,e||8)},this.lopd=function(e){return e?"***"+e.substr(3,4)+"**":e},this.split=function(e,t){return e?e.trim().split(t||","):[]},this.minify=function(e){return e?e.trim().replace(/\s{2}/g,""):e},this.lines=function(t){return e.split(t,/[\n\r]+/)},this.words=function(t){return e.split(t,/\s+/)},this.ilike=function(t,r){return e.iIndexOf(""+t,r)>-1},this.olike=function(t,r,n){return r.some(function(r){return e.ilike(t[r],n)})},this.alike=function(t,r,n){return e.words(n).some(function(n){return e.olike(t,r,n)})},this.ltr=function(e,t){for(var r=[],n=a(e);n>t;n-=t)r.unshift(e.substr(n-t,t));return n>0&&r.unshift(e.substr(0,n)),r},this.rtl=function(e,t){for(var r=[],n=a(e),i=0;i<n;i+=t)r.push(e.substr(i,t));return r},this.slices=function(e,t){var r=0,n=[],i=a(e);for(let a=0;r<i&&a<t.length;a++){let i=t[a];n.push(e.substr(r,i)),r+=i}return r<i&&n.push(e.substr(r)),n}}function ValidatorBox(){const e=this,t={},r={},n="",i=new Date;let a={},s={},o={},u=0;const l=/^\d+$/,c=/\D+/g,d=/^\d+(,\d+)*$/,f=/\w+[^\s@]+@[^\s@]+\.[^\s@]+/,h=/^[\w#@&°!§%;:=\^\/\(\)\?\*\+\~\.\,\-\$]{8,}$/,g=/^(\d{8})([A-Z])$/,m=/^([ABCDEFGHJKLMNPQRSUVW])(\d{7})([0-9A-J])$/,v=/^[XYZ]\d{7,8}[A-Z]$/;function p(e){return e?e.length:0}function j(e){return e?e.trim().replace(/\W+/g,n).toUpperCase():e}function b(e){return e&&e.getTime&&!isNaN(e.getTime())}this.sysdate=function(){return i},this.toISODateString=function(e){return(e||i).toISOString().substring(0,10)},this.size=function(e,t,r){let n=p(e);return t<=n&&n<=r},this.range=function(e,t,r){let n=parseInt(e);return!isNaN(n)&&t<=n&&n<=r},this.close=function(e,t,r){return Math.min(Math.max(e,t),r)},this.regex=function(e,t){try{return e.test(t)}catch(e){}return!1},this.login=function(t,r){return e.regex(h,r)},this.digits=function(t,r){return e.regex(l,r)},this.idlist=function(t,r){return e.regex(d,r)},this.email=function(t,r,n){return e.regex(f,r)&&e.setData(t,r.toLowerCase())},this.date=function(t,r){if(r){let n=a.toDate(r);return b(n)&&e.setData(t,n)}return!1},this.time=function(t,r){let n=r&&r.split(c);if(n[0]&&n[1]){let r=new Date;return r.setHours(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),b(r)&&e.setData(t,r)}return!1},this.integer=function(t,r){if(r){let n=a.toInt(r);return!isNaN(n)&&e.setData(t,n)}return!1},this.float=function(t,r){if(r){let n=a.toFloat(r);return!isNaN(n)&&e.setData(t,n)}return!1},this.idES=function(t,r){if(r=j(r)){if(e.regex(g,r))return e.dni(t,r);if(e.regex(m,r))return e.cif(t,r);if(e.regex(v,r))return e.nie(t,r)}return!1},this.dni=function(t,r){e.setData(t,r);return"TRWAGMYFPDXBNJZSQVHLCKE".charAt(parseInt(r,10)%23)==r.charAt(8)},this.cif=function(t,r){e.setData(t,r);for(var n=r.match(m),i=n[1],a=n[2],s=n[3],o=0,u=0;u<a.length;u++){var l=parseInt(a[u],10);u%2==0&&(l=(l*=2)<10?l:parseInt(l/10)+l%10),o+=l}var c=0!==(o%=10)?10-o:o,d="JABCDEFGHI".substr(c,1);return i.match(/[ABEH]/)?s==c:i.match(/[KPQS]/)?s==d:s==c||s==d},this.nie=function(t,r){var n=r.charAt(0),i="X"==n?0:"Y"==n?1:"Z"==n?2:n;return e.dni(i+r.substr(1))},this.iban=function(t,r){let i=(r=j(r))&&r.match(/^([A-Z]{2})(\d{2})([A-Z\d]+)$/);if(!i||p(r)!=={AD:24,AE:23,AT:20,AZ:28,BA:20,BE:16,BG:22,BH:22,BR:29,CH:21,CR:21,CY:28,CZ:24,DE:22,DK:18,DO:28,EE:20,ES:24,FI:18,FO:18,FR:27,GB:22,GI:23,GL:18,GR:27,GT:28,HR:21,HU:28,IE:22,IL:23,IS:26,IT:27,JO:30,KW:30,KZ:20,LB:28,LI:21,LT:20,LU:20,LV:21,MC:27,MD:24,ME:22,MK:19,MR:27,MT:31,MU:30,NL:18,NO:15,PK:24,PL:28,PS:29,PT:25,QA:29,RO:24,RS:22,SA:24,SE:24,SI:19,SK:24,SM:27,TN:24,TR:26,AL:28,BY:28,CR:22,EG:29,GE:22,IQ:23,LC:32,SC:31,ST:25,SV:28,TL:23,UA:29,VA:22,VG:24,XK:20}[i[1]])return!1;let a=(i[3]+i[1]+i[2]).replace(/[A-Z]/g,e=>e.charCodeAt(0)-55),s=n,o=a.toString(),u=o.slice(0,2);for(let e=2;e<o.length;e+=7)s=u+o.substring(e,e+7),u=parseInt(s,10)%97;return 1===u&&e.setData(t,r)},this.creditCardNumber=function(t,r){if(16!=p(r=j(r)))return!1;e.setData(t,r);let i=0,a=!1;r=r.trim().replace(/\s+/g,n);for(let e=15;e>=0;e--){let t=+r[e];a&&(t*=2,t-=t>9?9:0),i+=t,a=!a}return i%10==0},this.generatePassword=function(e,t){return t=t||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_#@&°!§%;:=^/()?*+~.,-$",Array.apply(null,Array(e||10)).map(function(){return t.charAt(Math.random()*t.length)}).join(n)},this.testPassword=function(e){let t=0;return t+=/[A-Z]+/.test(e)?1:0,t+=/[a-z]+/.test(e)?1:0,t+=/[0-9]+/.test(e)?1:0,t+=/[\W]+/.test(e)?1:0,t+=t>2&&p(e)>8},this.get=function(t){return e[t]},this.set=function(t,r){return e[t]=r,e},this.getI18n=function(){return a},this.setI18n=function(t){return(a=t||a).toInt=a.toInt||parseInt,a.toFloat=a.toFloat||parseFloat,a.toDate=a.toDate||function(e){return new Date(e)},e},this.initMsgs=function(){for(let e in t)delete t[e];return u=0,e},this.getMsgs=function(){return t},this.getMsg=function(e){return t[e]},this.setMsg=function(r,n){return t[r]=n,e},this.getMsgOk=function(){return t.msgOk},this.setMsgOk=function(r){return t.msgOk=r,e},this.getMsgInfo=function(){return t.msgInfo},this.setMsgInfo=function(r){return t.msgInfo=r,e},this.getMsgWarn=function(){return t.msgWarn},this.setMsgWarn=function(r){return t.msgWarn=r,e},this.getMsgError=function(){return t.msgError},this.setError=function(t,r){return u++,e.setMsg(t,r)},this.setMsgError=function(t){return e.setError("msgError",t)},this.getForm=function(e){return r[e]},this.setForm=function(t,n){return r[t]=n,e},this.getFields=function(t){let r=e.getForm(t);return r?Object.keys(r):[]},this.getData=function(e){return e?s[e]:s},this.setData=function(t,r){return s[t]=r,e},this.getInput=function(e){return o[e]},this.setInput=function(t,r){var n;return o[t]=(n=r)?n.trim():n,e},this.getInputs=function(){return o},this.setInputs=function(t){return o=t,e},this.fails=function(){return u>0},this.isValid=function(){return 0==u},this.validate=function(t){s={},i.setTime(Date.now());let r=e.initMsgs().getForm(t);for(let e in r){let t=r[e];s[e]=o[e],t(e,o[e],a)}return r&&e.isValid()}}const js=new JsBox,sb=new StringBox,i18n=new MessageBox,valid=new ValidatorBox;valid.set("required",function(e,t,r){return valid.size(t,1,200)||!valid.setError(e,r.errRequired)}).set("required50",function(e,t,r){return valid.size(t,1,50)||!valid.setError(e,r.errRequired)}).set("min8",function(e,t,r){return valid.size(t,8,200)||!valid.setError(e,r.errMinlength8)}).set("max200",function(e,t,r){return valid.size(t,0,200)||!valid.setError(e,r.errMaxlength)}).set("max50",function(e,t,r){return valid.size(t,0,50)||!valid.setError(e,r.errMaxlength)}).set("token",function(e,t,r){return valid.size(t,200,800)||!valid.setError(e,r.errRegex)}).set("usuario",function(e,t,r){return valid.min8(e,t,r)&&(valid.idES(e,t)||valid.email(e,t)||!valid.setError(e,r.errRegex))}).set("clave",function(e,t,r){return valid.min8(e,t,r)&&(valid.login(e,t)||!valid.setError(e,r.errRegex))}).set("reclave",function(e,t,r){return valid.clave(e,t,r)&&(t==valid.getData("clave")||!valid.setError(e,r.errReclave))}).set("nif",function(e,t,r){return valid.required(e,t,r)&&(valid.idES(e,t)||!valid.setError(e,r.errNif))}).set("correo",function(e,t,r){return valid.required(e,t,r)&&(valid.email(e,t)||!valid.setError(e,r.errCorreo))}).set("ltNow",function(e,t,r){return valid.required(e,t,r)&&(valid.date(e,t)||!valid.setError(e,r.errDate))&&(valid.getData(e).getTime()<Date.now()||!valid.setError(e,r.errDateLe))}).set("leToday",function(e,t,r){return valid.required(e,t,r)&&(valid.date(e,t)||!valid.setError(e,r.errDate))&&(valid.toISODateString(valid.getData(e))<=valid.toISODateString()||!valid.setError(e,r.errDateLe))}).set("gtNow",function(e,t,r){return valid.required(e,t,r)&&(valid.date(e,t)||!valid.setError(e,r.errDate))&&(valid.getData(e).getTime()>Date.now()||!valid.setError(e,r.errDateGe))}).set("geToday",function(e,t,r){return valid.required(e,t,r)&&(valid.date(e,t)||!valid.setError(e,r.errDate))&&(valid.toISODateString(valid.getData(e))>=valid.toISODateString()||!valid.setError(e,r.errDateGe))}).set("pk",function(e,t,r){return!t||(valid.integer(e,t)?valid.getData(e)>0||!valid.setError(e,r.errGt0):!valid.setError(e,r.errNumber))}).set("gt0",function(e,t,r){return valid.required(e,t,r)&&(valid.float(e,t)||!valid.setError(e,r.errNumber))&&(valid.getData(e)>0||!valid.setError(e,r.errGt0))}),js.ready(function(){const e=js.getLang(),t=i18n.setI18n(e).getLang();valid.setI18n(t),$.datepicker.regional.es=i18n.getI18n("es"),$.datepicker.setDefaults(i18n.getLang());let r=js.getAll("div.alert"),n=js.getAll(".alert-text"),i=js.getAll(".alert-close");function a(e){js.fadeIn(e.parentNode,"grid")}function s(e,t){e.innerHTML=t,a(e)}function o(e){e&&s(n[0],e)}function u(e){e&&s(n[3],e)}js.each(n,e=>{e.firstChild&&a(e)}),js.click(i,e=>{js.fadeOut(e.parentNode)});let l=document.querySelector(".loading");function c(){js.show(l).closeAlerts(),valid.initMsgs()}function d(){js.fadeOut(l)}function f(e,t){js.hasClass(e,"ajax")&&(js.ajax(e.href,js.update),t.preventDefault())}js.showError=function(e){return u(e),js},js.showAlerts=function(e){var t;return o(e.msgOk),(t=e.msgInfo)&&s(n[1],t),function(e){e&&s(n[2],e)}(e.msgWarn),js.showError(e.msgError)},js.closeAlerts=function(){return js.hide(r)},js.update=function(e){return js.html(js.getAll(e.update),e.html).showAlerts(e)},js.clean=function(e){return js.closeAlerts().removeClass(e,"input-error").text(js.siblings(e,".msg-error"),"").focus(e)},js.showErrors=function(e,t){return js.showAlerts(t).reverse(e,e=>{let r=e.name&&t[e.name];r&&js.focus(e).addClass(e,"input-error").html(js.siblings(e,".msg-error"),r)})},js.ajax=function(e,t,r){return c(),js.fetch({action:e,resolve:t||o,reject:r||u}).catch(u).finally(d)},js.autocomplete=function(e){function t(e,t,r){return!js.val(e,r).val(js.siblings(e,"[type=hidden]"),t)}let r=!1;return(e=e||{}).action=e.action||"#",e.minLength=e.minLength||3,e.render=e.render||function(){return"-"},e.renderItem=e.renderItem||e.render,e.focus=function(){return!1},e.search=function(e,t){return r},e.select=function(r,n){return t(this,n.item[e.id],e.render(n.item))},e.source=function(t,r){this.element.autocomplete("instance")._renderItem=function(r,n){let i=sb.iwrap(e.renderItem(n),t.term);return $("<li></li>").append("<div>"+i+"</div>").appendTo(r)},js.ajax(e.action+"?term="+t.term,e=>r(e.slice(0,10)))},$(e.inputs).autocomplete(e),js.keydown(e.inputs,(e,t)=>{r=8==t.keyCode||t.keyCode>45&&t.keyCode<224}).change(e.inputs,e=>{e.value||t(e,"","")})},valid.validateForm=function(e){let r=e.elements;return js.clean(r).each(r,e=>{e.name&&valid.setInput(e.name,e.value)}),valid.validate(e.getAttribute("action"))||!js.showErrors(r,valid.setMsgError(t.errForm).getMsgs())},valid.submit=function(e,t,r,n){if(t.preventDefault(),valid.validateForm(e)){c();let t=new FormData(e);for(let e in valid.getInputs())t.has(e)||t.append(e,valid.getInput(e));js.fetch({method:e.method,action:r||e.action,body:"multipart/form-data"===e.enctype?t:new URLSearchParams(t),reject:function(t){js.showErrors(e.elements,t)},resolve:n||o}).catch(u).finally(d)}return valid},js.click(js.getAll("a.reload"),f),js.click(js.getAll("a.remove"),(e,r)=>{confirm(t.remove)?f(e,r):r.preventDefault()}),"undefined"!=typeof grecaptcha&&grecaptcha.ready(function(){js.click(js.getAll(".captcha"),(e,t)=>{grecaptcha.execute("6LeDFNMZAAAAAKssrm7yGbifVaQiy1jwfN8zECZZ",{action:"submit"}).then(r=>valid.setInput("token",r).submit(e.closest("form"),t)).catch(u),t.preventDefault()})}),js.reverse(js.getAll("form"),e=>{let r=e.elements;js.change(js.filter(r,".integer"),e=>{e.value=t.fmtInt(e.value)}),js.change(js.filter(r,".float"),e=>{e.value=t.fmtFloat(e.value)});let n=js.filter(r,".date");js.keyup(n,e=>{e.value=t.acDate(e.value)}).change(n,e=>{e.value=t.isoDate(e.value)});let i=js.filter(r,".time");js.keyup(i,e=>{e.value=t.acTime(e.value)}).change(i,e=>{e.value=t.isoTime(e.value)}),$(r).filter(".datepicker").datepicker({dateFormat:i18n.get("dateFormat"),changeMonth:!1});let a=js.filter(r,"textarea[maxlength]");function s(t){let r=Math.abs(t.getAttribute("maxlength")-sb.size(t.value));js.text(e.querySelector("#counter-"+t.id),r)}js.keyup(a,s).each(a,s),js.autocomplete({inputs:js.filter(r,".ac-user"),id:"nif",action:"/tests/usuarios.html",render:function(e){return e.nif+" - "+e.nombre}}),js.click(js.filter(r,"[type=reset]"),()=>{e.reset(),js.clean(r).each(a,s)}).click(js.getAll("a.duplicate",e),(t,n)=>{valid.submit(e,n,t.href,e=>{js.val(js.filter(r,".duplicate"),""),o(e)})}),js.focus(r),e.addEventListener("submit",t=>{e.classList.contains("ajax")?valid.submit(e,t,null,e=>{js.val(r,""),o(e)}):valid.validateForm(e)||t.preventDefault()})})}),valid.setForm("/login.html",{usuario:valid.usuario,clave:valid.clave}).setForm("/contact.html",{nombre:valid.required,correo:valid.correo,asunto:valid.required,info:valid.required}).setForm("/signup.html",{token:valid.token,nombre:valid.required,ap1:valid.required,nif:valid.nif,correo:valid.correo}).setForm("/reactive.html",{token:valid.token,correo:valid.correo}),valid.setForm("/user/pass.html",{oldPass:valid.min8,clave:valid.min8,reclave:valid.reclave}).setForm("/user/profile.html",{nombre:valid.required,ap1:valid.required,ap2:valid.max200,nif:valid.nif,correo:valid.correo});const MENU={_id:valid.pk,nombre:valid.required,nombre_en:valid.max200,icon:valid.max50,alta:valid.ltNow};valid.setForm("/menu/save.html",MENU).setForm("/menu/duplicate.html",MENU),js.ready(function(){js.getAll("ul.menu").forEach(function(e){for(let t=0;t<e.children.length;){let r=e.children[t],n=r.dataset.mask;8==(8&n)&&(r.innerHTML+='<ul class="sub-menu"></ul>',r.firstElementChild.innerHTML+='<b class="nav-tri">&rtrif;</b>',js.click(r.firstElementChild,(e,t)=>{js.toggle(r,"active"),t.preventDefault()})),0==(4&n)&&js.addClass(r,"disabled");let i=r.dataset.padre;if(i){let t=js.get("li[id='"+i+"']",e);t&&t.lastElementChild.appendChild(r)}else t++}js.fadeIn(e.children)}),js.click(js.getAll(".sidebar-toggle"),(e,t)=>{js.toggle(js.getAll(".sidebar-icon",e.parentNode),"hide"),js.toggle(js.get("#sidebar",e.parentNode),"active"),t.preventDefault()});let e=js.get("#back-to-top");js.click(e,()=>{js.scrollTop(400)}),window.onscroll=function(){window.pageYOffset>80?js.fadeIn(e):js.fadeOut(e)},window.addEventListener("unload",function(e){js.ajax("/session/destroy.html")})}),js.ready(function(){let e=document.querySelectorAll("#progressbar li"),t=0;js.click(js.getAll(".next-tab"),()=>(t<e.length-1&&js.addClass(e[++t],"active"),!1)),js.click(js.getAll(".prev-tab"),()=>(t&&js.removeClass(e[t--],"active"),!1));let r=js.getAll("a[href^='#']");js.click(js.filter(r,"[href^='#tab-']"),()=>{let r=+this.href.substr(this.href.lastIndexOf("-")+1);return 0<=r&&r!=t&&r<e.length&&(e.forEach((e,t)=>{js.toggle(e,"active",t<=r)}),t=r),!1}),js.click(js.filter(r,":not([href^='#tab-'])"),function(e,t){let r=document.querySelector(e.getAttribute("href"));r&&r.scrollIntoView({behavior:"smooth"}),t.preventDefault()})}),js.ready(function(){const e=i18n.getLang();valid.setForm("/tests/email.html",{nombre:valid.required,correo:valid.correo,date:function(e,t,r){return!t||valid.ltNow(e,t,r)},number:valid.gt0,asunto:valid.required,info:function(e,t,r){return valid.size(t,1,600)||!valid.setError(e,r.errRequired)}});const t=$("#f1").on("change",function(){r.datepicker("option","minDate",e.toDate(this.value))}),r=$("#f2").on("change",function(){t.datepicker("option","maxDate",e.toDate(this.value))})});