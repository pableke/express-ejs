function MessageBox(t){const e=this,n={en:{errForm:"Form validation failed",errRequired:"Required field!",errMinlength8:"The min length required is 8 characters",errNif:"Wrong ID format",errCorreo:"Wrong Mail format",errRegex:"Wrong format",remove:"Are you sure to delete element?",cancel:"Are you sure to cancel element?"},es:{errForm:"Error al validar los campos del formulario",errRequired:"Campo obligatorio!",errMinlength8:"Valor mínimo requerido de 8 caracteres",errNif:"Formato de NIF / CIF incorrecto",errCorreo:"Formato de E-Mail incorrecto",errRegex:"Formato incorrecto",remove:"¿Confirma que desea eliminar este registro?",cancel:"¿Confirma que desea cancelar este registro?"}};let r=n.es;this.getLang=function(t){return t?n[t]:r},this.setLang=function(t,r){return n[t]=r,e},this.getI18n=function(t){return t&&(n[t]||n[t.substr(0,2)])||n.es},this.setI18n=function(t){return r=e.getI18n(t),e},this.get=function(t){return r[t]},this.set=function(t,n){return r[t]=n,e},this.format=function(t){return t.replace(/@(\w+);/g,(t,e)=>nvl(r[e],t))},e.setI18n(t)}function StringBox(){const t=this,e="àáâãäåāăąÀÁÂÃÄÅĀĂĄÆßèéêëēĕėęěÈÉĒĔĖĘĚìíîïìĩīĭÌÍÎÏÌĨĪĬòóôõöōŏőøÒÓÔÕÖŌŎŐØùúûüũūŭůÙÚÛÜŨŪŬŮçÇñÑþÐŔŕÿÝ",n="aaaaaaaaaAAAAAAAAAABeeeeeeeeeEEEEEEEiiiiiiiiIIIIIIIIoooooooooOOOOOOOOOuuuuuuuuUUUUUUUUcCnNdDRryY";function r(t){return"string"==typeof t||t instanceof String}function i(t){return r(t)?t.trim():t}function s(t){return t?t.length:0}function o(t){for(var r="",o=s(i(t)),u=0;u<o;u++){var a=t.charAt(u),c=e.indexOf(a);r+=c<0?a:n.charAt(c)}return r.toLowerCase()}this.isstr=r,this.trim=i,this.size=s,this.eq=function(t,e){return o(t)==o(e)},this.indexOf=function(t,e){return t?t.indexOf(e):-1},this.iIndexOf=function(t,e){return o(t).indexOf(o(e))},this.prevIndexOf=function(t,e,n){return t?t.substr(0,n).lastIndexOf(e):-1},this.prefix=function(t,e){return t.startsWith(e)?t:e+t},this.suffix=function(t,e){return t.endsWith(e)?t:t+e},this.trunc=function(t,e){return s(t)>e?t.substr(0,e).trim()+"...":t},this.itrunc=function(e,n){var r=s(e)>n?t.prevIndexOf(e," ",n):-1;return t.trunc(e,r<0?n:r)},this.removeAt=function(t,e,n){return e<0?t:t.substr(0,e)+t.substr(e+n)},this.insertAt=function(t,e,n){return t?t.substr(0,n)+e+t.substr(n):e},this.replaceAt=function(t,e,n,r){return n<0?t:t.substr(0,n)+e+t.substr(n+r)},this.replaceLast=function(t,e,n){return t?t.replaceAt(t.lastIndexOf(e),e.length,n):n},this.wrapAt=function(e,n,r,i,s){return n<0?e:t.insertAt(t.insertAt(e,i,n),s,n+i.length+r)},this.iwrap=function(e,n,r,i){return e&&n&&t.wrapAt(e,t.iIndexOf(e,n),n.length,r||"<u><b>",i||"</b></u>")},this.rand=function(t){return Math.random().toString(36).substr(2,t||8)},this.lopd=function(t){return t?"***"+t.substr(3,4)+"**":t},this.split=function(t,e){return t?t.trim().split(e||","):[]},this.minify=function(t){return t?t.trim().replace(/\s{2}/g,""):t},this.lines=function(e){return t.split(e,/[\n\r]+/)},this.words=function(e){return t.split(e,/\s+/)},this.ilike=function(e,n){return t.iIndexOf(""+e,n)>-1},this.olike=function(e,n,r){return n.some(function(n){return t.ilike(e[n],r)})},this.alike=function(e,n,r){return t.words(r).some(function(r){return t.olike(e,n,r)})},this.ltr=function(t,e){for(var n=[],r=s(t);r>e;r-=e)n.unshift(t.substr(r-e,e));return r>0&&n.unshift(t.substr(0,r)),n},this.rtl=function(t,e){for(var n=[],r=s(t),i=0;i<r;i+=e)n.push(t.substr(i,e));return n},this.slices=function(t,e){var n=0,r=[],i=s(t);for(let s=0;n<i&&s<e.length;s++){let i=e[s];r.push(t.substr(n,i)),n+=i}return n<i&&r.push(t.substr(n)),r}}function ValidatorBox(){const t=this,e={},n={},r={},i=/^\d+$/,s=/^\d+(,\d+)*$/,o=/\w+[^\s@]+@[^\s@]+\.[^\s@]+/,u=/^[\w#@&°!§%;:=\^\/\(\)\?\*\+\~\.\,\-\$]{8,}$/,a=/^(\d{8})([A-Z])$/,c=/^([ABCDEFGHJKLMNPQRSUVW])(\d{7})([0-9A-J])$/,l=/^[XYZ]\d{7,8}[A-Z]$/;function f(t){return t?t.length:0}function h(t){return t?t.trim():t}function d(e,n,r,i){return!e||e(t,n,r,i)}function m(t){return t?t.trim().replace(/\W+/g,"").toUpperCase():t}function g(t,e){try{return t.test(e)}catch(t){}return!1}function p(){for(let t in e)delete e[t];return e.num=0,t}this.size=function(t,e,n){let r=f(t);return e<=r&&r<=n},this.regex=function(t,e){return g(t,e)},this.login=function(t){return g(u,t)},this.email=function(t){return g(o,t)},this.digits=function(t){return g(i,t)},this.idlist=function(t){return g(s,t)},this.idES=function(e){return!!(e=m(e))&&(g(a,e)?t.dni(e):g(c,e)?t.cif(e):!!g(l,e)&&t.nie(e))},this.dni=function(t){return"TRWAGMYFPDXBNJZSQVHLCKE".charAt(parseInt(t,10)%23)==t.charAt(8)},this.cif=function(t){for(var e=t.match(c),n=e[1],r=e[2],i=e[3],s=0,o=0;o<r.length;o++){var u=parseInt(r[o],10);o%2==0&&(u=(u*=2)<10?u:parseInt(u/10)+u%10),s+=u}var a=0!==(s%=10)?10-s:s,l="JABCDEFGHI".substr(a,1);return n.match(/[ABEH]/)?i==a:n.match(/[KPQS]/)?i==l:i==a||i==l},this.nie=function(e){var n=e.charAt(0),r="X"==n?0:"Y"==n?1:"Z"==n?2:n;return t.dni(r+e.substr(1))},this.iban=function(t){if(24!=f(t=m(t)))return!1;const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";let n=e.search(t.substring(0,1))+10,r=e.search(t.substring(1,2))+10,i=String(n)+String(r)+t.substring(2);i=i.substring(6)+i.substring(0,6);let s="",o=Math.ceil(i.length/7);for(let t=1;t<=o;t++)s=String(parseFloat(s+i.substr(7*(t-1),7))%97);return 1==s},this.creditCardNumber=function(t){if(16!=f(t=m(t)))return!1;let e=0,n=!1;t=t.trim().replace(/\s+/g,"");for(let r=15;r>=0;r--){let i=+t[r];n&&(i*=2,i-=i>9?9:0),e+=i,n=!n}return e%10==0},this.generatePassword=function(t,e){return e=e||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_#@&°!§%;:=^/()?*+~.,-$",Array.apply(null,Array(t||10)).map(function(){return e.charAt(Math.random()*e.length)}).join("")},this.testPassword=function(t){let e=0;return e+=/[A-Z]+/.test(t)?1:0,e+=/[a-z]+/.test(t)?1:0,e+=/[0-9]+/.test(t)?1:0,e+=/[\W]+/.test(t)?1:0,e+=e>2&&f(t)>8},this.get=function(t){return n[t]},this.set=function(e,r){return n[e]=r,t},this.call=function(t,e,r,i){return d(n[t],e,r,i)},this.getErrors=function(){return e},this.getError=function(t){return e[t]},this.addMsg=function(n,r){return e[n]=r,t},this.setError=function(n,r){return e.num++,t.addMsg(n,r)},this.getForm=function(t){return r[t]},this.setForm=function(e,n){return r[e]=n,t},this.addForms=function(e){return Object.assign(r,e),t},this.getFields=function(e){let n=t.getForm(e);return n?Object.keys(n):[]},this.initFields=function(n){return p().getFields(n).forEach(t=>{e[t]=""}),t},this.values=function(t,e){e=e||{};let n=f(t);for(let r=0;r<n;r++){let n=t[r];n.name&&(e[n.name]=h(n.value))}return e},this.fails=function(){return e.num>0},this.isValid=function(){return 0==e.num},this.validate=function(e,n,r){p();let i=t.getForm(e)||{};return t.getFields(e).forEach(t=>{d(i[t],t,h(n[t]),r)}),t.isValid()}}$(document).ready(function(){let t=$("html").attr("lang"),e=new StringBox,n=new MessageBox(t);function r(t){t.parentNode.classList.add("d-none")}function i(t){t.parentNode.classList.remove("d-none")}function s(t,e){t.innerHTML=e,i(t)}let o=document.querySelectorAll(".alert-text");o.forEach(t=>{t.firstChild?i(t):r(t)});let u=document.querySelectorAll(".alert-close");function a(t){t&&s(o[0],t)}function c(t){t&&s(o[2],t)}function l(t){t&&s(o[3],t)}function f(){u.forEach(t=>{t.click()})}u.forEach(t=>{t.addEventListener("click",function(){r(t)})});let h=document.querySelector(".loading");function d(){$(h).show(),f()}function m(){$(h).fadeOut()}function g(t){return t?"addClass":"removeClass"}function p(t,e){let n=t.dataset.dest;n?($(n).html(e),a(t.dataset.msg)):a(e)}$(document).on("input",".clearable",function(){$(this)[g(this.value)]("x")}).on("mousemove",".x",function(t){$(this)[g(this.offsetWidth-28<t.clientX-this.getBoundingClientRect().left)]("onX")}).on("touchstart click",".onX",function(t){t.preventDefault(),$(this).removeClass("x onX").val("").change()}),$("a.ajax").click(function(t){d();let e=this;function n(t){return p(e,t)}fetch(e.href).then(t=>t.text().then(t.ok?n:l)).catch(l).finally(m),t.preventDefault()});let v=document.querySelectorAll("form");for(let t=v.length-1;t>-1;t--){const r="is-invalid",i=".invalid-feedback",u="textarea[maxlength]";let h=v[t],g=h.elements;function b(){$("#counter-"+this.id,h).text(Math.abs(this.getAttribute("maxlength")-e.size(this.value)))}function A(){$(g).filter(":not([type=hidden])[tabindex]:not([readonly])").first().focus()}function E(){$(g).removeClass(r).siblings(i).text(""),$(g).filter(u).each(b),f(),A()}function x(t){return t.nif+" - "+t.nombre}function I(t,e,n){return!$(t).val(n).siblings("[type=hidden]").val(e)}$(g).filter(u).keyup(b).each(b),$(g).filter(".ac-user").autocomplete({minLength:3,source:function(t,n){d(),this.element.autocomplete("instance")._renderItem=function(n,r){let i=e.iwrap(x(r),t.term);return $("<li></li>").append("<div>"+i+"</div>").appendTo(n)},fetch("/usuarios.html?term="+t.term).then(t=>t.json()).then(t=>{n(t.slice(0,10))}).catch(l).finally(m)},focus:function(){return!1},select:function(t,e){return I(this,e.item.nif,x(e.item))}}).change(function(t){this.value||I(this,"","")}),$(g).filter("[type=reset]").click(t=>{h.reset(),E()}),A(),h.addEventListener("submit",function(t){function u(t){$(g).val(""),E(),p(h,t)}function f(t){E();for(let n=e.size(g)-1;n>-1;n--){let e=g[n],s=e.name&&t[e.name];s&&$(e).focus().addClass(r).siblings(i).html(s)}var n;a(t.msgOk),(n=t.msgInfo)&&s(o[1],n),c(t.msgWarn),l(t.msgError)}let v=valid.values(g);if(!valid.validate(h.getAttribute("action"),v,n.getLang()))return f(valid.addMsg("msgError",n.get("errForm")).getErrors()),t.preventDefault();if(!h.classList.contains("ajax"))return!0;d();let b=new FormData(h);fetch(h.action,{method:h.method,body:"multipart/form-data"===h.enctype?b:new URLSearchParams(b),headers:{"Content-Type":h.enctype||"application/x-www-form-urlencoded","x-requested-with":"XMLHttpRequest"}}).then(t=>t.ok?t.text().then(u):t.json().then(f)).catch(l).finally(m),t.preventDefault()})}}),$(document).ready(function(){$("ul.menu").each(function(t,e){$(e.children).filter("[parent][parent!='']").each((t,n)=>{let r=$("#"+$(n).attr("parent"),e);r.children().last().is(e.tagName)||r.append('<ul class="sub-menu"></ul>').children("a").append('<b class="nav-tri">&rtrif;</b>'),r.children().last().append(n)}),$(e.children).remove("[parent][parent!='']"),e.querySelectorAll("i").forEach(t=>{t.classList.length<=1&&t.parentNode.removeChild(t)});let n=$("b.nav-tri",e);n.parent().click(function(t){$(this.parentNode).toggleClass("active"),t.preventDefault()}),$("li",e).hover(function(){n.html("&rtrif;"),$(this).children("a").find("b.nav-tri").html("&dtrif;"),$(this).parents("ul.sub-menu").prev().find("b.nav-tri").html("&dtrif;")}),$("[disabled]",e).each(function(){let t=parseInt(this.getAttribute("disabled"))||0;$(this).toggleClass("disabled",3!=(3&t))}).removeAttr("disabled")}).children().fadeIn(200),$(".sidebar-toggle").click(t=>{$("#sidebar").toggleClass("active"),$(".sidebar-icon",this.parentNode).toggleClass("d-none"),t.preventDefault()});let t=$(".menu-toggle").click(e=>{e.preventDefault(),t.toggleClass("d-none"),$("#wrapper").toggleClass("toggled")}),e=$("#back-to-top").click(function(){return!$("body,html").animate({scrollTop:0},400)});$(window).scroll(function(){$(this).scrollTop()>50?e.fadeIn():e.fadeOut()}),document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();try{document.querySelector(this.href).scrollIntoView({behavior:"smooth"})}catch(t){}})})}),document.addEventListener("DOMContentLoaded",function(){let t=document.querySelectorAll("#progressbar li"),e=0;document.querySelectorAll(".next-tab").forEach(n=>{n.addEventListener("click",n=>(e<t.length-1&&t[++e].classList.add("active"),!1))}),$(".prev-tab").click(function(){return e&&t[e--].classList.remove("active"),!1}),$("a[href^='#tab-']").click(function(){let n=+this.href.substr(this.href.lastIndexOf("-")+1);return 0<=n&&n!=e&&n<t.length&&(t.forEach((t,e)=>{t.classList.toggle("active",e<=n)}),e=n),!1})});const VALIDATORS={"/test.html":{nombre:function(t,e,n,r){return t.call("required",e,n,r)},correo:function(t,e,n,r){return t.call("correo",e,n,r)},asunto:function(t,e,n,r){return t.call("required",e,n,r)}}},valid=new ValidatorBox;valid.set("required",function(t,e,n,r){return t.size(n,1,200)||!t.setError(e,r.errRequired)}).set("login",function(t,e,n,r){return t.size(n,8,200)?t.idES(n)||t.email(n)||!t.setError(e,r.errRegex):!t.setError(e,r.errMinlength8)}).set("clave",function(t,e,n,r){return t.size(n,8,200)?t.login(n)||!t.setError(e,r.errRegex):!t.setError(e,r.errMinlength8)}).set("nif",function(t,e,n,r){return t.size(n,1,50)&&t.idES(n)||!t.setError(e,r.errNif)}).set("correo",function(t,e,n,r){return t.size(n,1,200)?t.email(n)||!t.setError(e,r.errCorreo):!t.setError(e,r.errRequired)}).addForms(VALIDATORS);