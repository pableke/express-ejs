function StringBox(){const t=this,e="àáâãäåāăąÀÁÂÃÄÅĀĂĄÆßèéêëēĕėęěÈÉĒĔĖĘĚìíîïìĩīĭÌÍÎÏÌĨĪĬòóôõöōŏőøÒÓÔÕÖŌŎŐØùúûüũūŭůÙÚÛÜŨŪŬŮçÇñÑþÐŔŕÿÝ",n="aaaaaaaaaAAAAAAAAAABeeeeeeeeeEEEEEEEiiiiiiiiIIIIIIIIoooooooooOOOOOOOOOuuuuuuuuUUUUUUUUcCnNdDRryY";function i(t){return"string"==typeof t||t instanceof String}function r(t){return i(t)?t.trim():t}function s(t){return t?t.length:0}function o(t){for(var i="",o=s(r(t)),u=0;u<o;u++){var c=t.charAt(u),a=e.indexOf(c);i+=a<0?c:n.charAt(a)}return i.toLowerCase()}this.isstr=i,this.trim=r,this.size=s,this.eq=function(t,e){return o(t)==o(e)},this.indexOf=function(t,e){return t?t.indexOf(e):-1},this.iIndexOf=function(t,e){return o(t).indexOf(o(e))},this.prevIndexOf=function(t,e,n){return t?t.substr(0,n).lastIndexOf(e):-1},this.prefix=function(t,e){return t.startsWith(e)?t:e+t},this.suffix=function(t,e){return t.endsWith(e)?t:t+e},this.trunc=function(t,e){return s(t)>e?t.substr(0,e).trim()+"...":t},this.itrunc=function(e,n){var i=s(e)>n?t.prevIndexOf(e," ",n):-1;return t.trunc(e,i<0?n:i)},this.removeAt=function(t,e,n){return e<0?t:t.substr(0,e)+t.substr(e+n)},this.insertAt=function(t,e,n){return t?t.substr(0,n)+e+t.substr(n):e},this.replaceAt=function(t,e,n,i){return n<0?t:t.substr(0,n)+e+t.substr(n+i)},this.replaceLast=function(t,e,n){return t?t.replaceAt(t.lastIndexOf(e),e.length,n):n},this.wrapAt=function(e,n,i,r,s){return n<0?e:t.insertAt(t.insertAt(e,r,n),s,n+r.length+i)},this.iwrap=function(e,n,i,r){return e&&n&&t.wrapAt(e,t.iIndexOf(e,n),n.length,i||"<u><b>",r||"</b></u>")},this.rand=function(t){return Math.random().toString(36).substr(2,t||8)},this.lopd=function(t){return t?"***"+t.substr(3,4)+"**":t},this.split=function(t,e){return t?t.trim().split(e||","):[]},this.minify=function(t){return t?t.trim().replace(/\s{2}/g,""):t},this.lines=function(e){return t.split(e,/[\n\r]+/)},this.words=function(e){return t.split(e,/\s+/)},this.ilike=function(e,n){return t.iIndexOf(""+e,n)>-1},this.olike=function(e,n,i){return n.some(function(n){return t.ilike(e[n],i)})},this.alike=function(e,n,i){return t.words(i).some(function(i){return t.olike(e,n,i)})},this.ltr=function(t,e){for(var n=[],i=s(t);i>e;i-=e)n.unshift(t.substr(i-e,e));return i>0&&n.unshift(t.substr(0,i)),n},this.rtl=function(t,e){for(var n=[],i=s(t),r=0;r<i;r+=e)n.push(t.substr(r,e));return n},this.slices=function(t,e){var n=0,i=[],r=s(t);for(let s=0;n<r&&s<e.length;s++){let r=e[s];i.push(t.substr(n,r)),n+=r}return n<r&&i.push(t.substr(n)),i}}$(document).ready(function(){let t=new StringBox;function e(t){t.parentNode.classList.add("d-none")}function n(t){t.parentNode.classList.remove("d-none")}function i(t,e){t.innerHTML=e,n(t)}let r=document.querySelectorAll(".alert-text");r.forEach(t=>{t.firstChild?n(t):e(t)});let s=document.querySelectorAll(".alert-close");function o(t){t&&i(r[0],t)}function u(t){t&&i(r[3],t)}s.forEach(t=>{t.addEventListener("click",function(){e(t)})});let c=document.querySelector(".loading");function a(){$(c).show(),s.forEach(t=>{t.click()})}function l(){$(c).fadeOut()}function f(t){return t?"addClass":"removeClass"}function h(t,e){let n=t.dataset.dest;n?($(n).html(e),o(t.dataset.msg)):o(e)}function d(t,e){return e&&!$(t).focus().addClass("is-invalid").siblings(".invalid-feedback").html(e)}$(document).on("input",".clearable",function(){$(this)[f(this.value)]("x")}).on("mousemove",".x",function(t){$(this)[f(this.offsetWidth-28<t.clientX-this.getBoundingClientRect().left)]("onX")}).on("touchstart click",".onX",function(t){t.preventDefault(),$(this).removeClass("x onX").val("").change()}),$("a.ajax").click(function(t){a();let e=this;function n(t){return h(e,t)}fetch(e.href).then(t=>t.text().then(t.ok?n:u)).catch(u).finally(l),t.preventDefault()});const m={};$("form").each(function(e,n){let i=n.elements;function r(){$("#counter-"+this.id,n).text(Math.abs(this.getAttribute("maxlength")-t.size(this.value)))}function s(t){return t.nif+" - "+t.nombre}function o(t,e,n){return!$(t).val(n).siblings("[type=hidden]").val(e)}$(i).filter("textarea[maxlength]").keyup(r).each(r),$(i).filter(".ac-user").autocomplete({minLength:3,source:function(e,n){a(),this.element.autocomplete("instance")._renderItem=function(n,i){let r=t.iwrap(s(i),e.term);return $("<li></li>").append("<div>"+r+"</div>").appendTo(n)},fetch("/usuarios.html?term="+e.term).then(t=>t.json()).then(t=>{n(t.slice(0,10))}).catch(u).finally(l)},focus:function(){return!1},select:function(t,e){return o(this,e.item.nif,s(e.item))}}).change(function(t){this.value||o(this,"","")})}).submit(function(e){let n=this,i=n.elements,r=t.size(i)-1;function s(t){h(n,t);for(let t=r;t>-1;t--){let e=i[t];e.matches(":not([type=hidden])[tabindex]:not([readonly])")&&e.focus(),e.value=""}}function c(t){for(let e=r;e>-1;e--){let n=i[e];d(n,t[n.name])}o(t.msgok),u(t.msgerr)}let f=!0;for(let e=r;e>-1;e--){let n=i[e],r=m[n.id];f&=!r||r(n,t.trim(n.value))}if(!f||!n.classList.contains("ajax"))return f;a();let p=new FormData(this);fetch(this.action,{method:this.method,body:"multipart/form-data"===this.enctype?p:new URLSearchParams(p),headers:{"Content-Type":this.enctype||"application/x-www-form-urlencoded","x-requested-with":"XMLHttpRequest"}}).then(t=>t.ok?t.text().then(s):t.json().then(c)).catch(u).finally(l),e.preventDefault()})}),$(document).ready(function(){$("ul.menu").each(function(t,e){$(e.children).filter("[parent][parent!='']").each((t,n)=>{let i=$("#"+$(n).attr("parent"),e);i.children().last().is(e.tagName)||i.append('<ul class="sub-menu"></ul>').children("a").append('<b class="nav-tri">&rtrif;</b>'),i.children().last().append(n)}),$(e.children).remove("[parent][parent!='']"),e.querySelectorAll("i").forEach(t=>{t.classList.length<=1&&t.parentNode.removeChild(t)});let n=$("b.nav-tri",e);n.parent().click(function(t){$(this.parentNode).toggleClass("active"),t.preventDefault()}),$("li",e).hover(function(){n.html("&rtrif;"),$(this).children("a").find("b.nav-tri").html("&dtrif;"),$(this).parents("ul.sub-menu").prev().find("b.nav-tri").html("&dtrif;")}),$("[disabled]",e).each(function(){let t=parseInt(this.getAttribute("disabled"))||0;$(this).toggleClass("disabled",3!=(3&t))}).removeAttr("disabled")}).children().fadeIn(200),$(".sidebar-toggle").click(t=>{$("#sidebar").toggleClass("active"),$(".sidebar-icon",this.parentNode).toggleClass("d-none"),t.preventDefault()});let t=$(".menu-toggle").click(e=>{e.preventDefault(),t.toggleClass("d-none"),$("#wrapper").toggleClass("toggled")}),e=$("#back-to-top").click(function(){return!$("body,html").animate({scrollTop:0},400)});$(window).scroll(function(){$(this).scrollTop()>50?e.fadeIn():e.fadeOut()}),document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();try{document.querySelector(this.href).scrollIntoView({behavior:"smooth"})}catch(t){}})})}),document.addEventListener("DOMContentLoaded",function(){let t=document.querySelectorAll("#progressbar li"),e=0;document.querySelectorAll(".next-tab").forEach(n=>{n.addEventListener("click",n=>(e<t.length-1&&t[++e].classList.add("active"),!1))}),$(".prev-tab").click(function(){return e&&t[e--].classList.remove("active"),!1}),$("a[href^='#tab-']").click(function(){let n=+this.href.substr(this.href.lastIndexOf("-")+1);return 0<=n&&n!=e&&n<t.length&&(t.forEach((t,e)=>{t.classList.toggle("active",e<=n)}),e=n),!1})});