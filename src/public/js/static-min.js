function DateBox(t){const e=this,n=new Date,r=new Date,i=[31,28,31,30,31,30,31,31,30,31,30,31];function a(t){return parseInt(t)||0}function o(t){return t?t.length:0}function u(t,e){return function(t){return void 0!==t&&null!=t}(t)?t:e}function s(t){return+t<10?"0"+t:t}function l(t){return 0==(3&t)&&(t%25!=0||0==(15&t))}function c(t,e){return i[e]+(1==e&&l(t))}function d(t){return t?t.split(/\D+/):[]}function f(t,e,n){return Math.min(Math.max(a(t),e),n)}function h(t){return f(t,0,59)}function m(t,e,n,r,i){return t&&t.setHours(f(e,0,23),h(n),h(r),i),t}function g(t,r,i,o){var s,l,d;return t&&(i=f(i,1,12),r=(d=a(r))<100?100*e.getCentury()+d:u(d,n.getFullYear()),t.setFullYear(r,i-1,(s=r,l=i,f(a(o),1,c(s,l-1))))),t}function v(t,e,n,r,i,a,o,u){return m(g(t,e,n,r),i||0,a||0,o||0,u||0)}function M(t){return s(t.getHours())+":"+s(t.getMinutes())}function D(t){return M(t)+":"+s(t.getSeconds())}const p={en:{closeText:"close",prevText:"prev",nextText:"next",currentText:"current",ancientText:"ancient",lastYear:"last year",currentYear:"this year",nextYear:"next year",lastMonth:"last month",currentMonth:"this month",nextMonth:"next month",lastWeek:"last week",currentWeek:"this week",nextWeek:"next week",yesterdayText:"yesterday",todayText:"today",tomorrowText:"tomorrow",lastHour:"last hour",currentHour:"less than an hour",nextHour:"next hour",last30Min:"less than half an hour",justNow:"just now",next30Min:"next half hour",futureText:"in a future",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dateFormat:"yy-mm-dd",firstDay:1,setDateTime:function(t,e,n,r,i,a,o,u){return v(t,e,n,r,i,a,o,u),this},build:function(t){return o(t)>0?v(new Date,t[0],t[1],t[2],t[3],t[4],t[5],t[6]):null},toDate:function(t){return this.build(d(t))},parse:function(t){return t&&isNaN(t)?Date.parse(t):new Date(+t)},helper:function(t){return t&&t.replace(/^(\d{4})(\d+)$/g,"$1-$2").replace(/^(\d{4}\-\d\d)(\d+)$/g,"$1-$2").replace(/[^\d\-]/g,"")},setAll:function(t,e){return this.setDateTime(t,e[0],e[1],e[2],e[3],e[4],e[5],e[6])},trIsoDate:function(t){return t?this.setAll(r,d(t)).isoDate(r):t},acDate:function(t){return t?this.setAll(r,d(t)).isoDate(r):t},isoDate:function(t){return t.getFullYear()+"-"+s(t.getMonth()+1)+"-"+s(t.getDate())},isoTime:D,isoDateTime:function(t){return this.isoDate(t)+" "+this.isoTime(t)}},es:{closeText:"cerrar",prevText:"prev.",nextText:"sig.",currentText:"actual",ancientText:"antiguo",lastYear:"el año pasado",currentYear:"este año",nextYear:"el año que viene",lastMonth:"el mes pasado",currentMonth:"este mes",nextMonth:"el mes que viene",lastWeek:"la semana pasada",currentWeek:"esta semana",nextWeek:"la semana que viene",yesterdayText:"ayer",todayText:"hoy",tomorrowText:"mañana",lastHour:"hace una hora",currentHour:"en menos de una hora",nextHour:"en la siguiente hora",last30Min:"hace menos de media hora",justNow:"justo ahora",next30Min:"en la siguiente media hora",futureText:"en un futuro",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],dateFormat:"dd/mm/yy",firstDay:1,setDateTime:function(t,e,n,r,i,a,o,u){return v(t,e,n,r,i,a,o,u),this},build:function(t){return o(t)>0?v(new Date,t[2],t[1],t[0],t[3],t[4],t[5],t[6]):null},toDate:function(t){return this.build(d(t))},parse:function(t){return t&&isNaN(t)?Date.parse(t):new Date(+t)},helper:function(t){return t&&t.replace(/^(\d\d)(\d+)$/g,"$1/$2").replace(/^(\d\d\/\d\d)(\d+)$/g,"$1/$2").replace(/[^\d\/]/g,"")},setAll:function(t,e){return this.setDateTime(t,e[2],e[1],e[0],e[3],e[4],e[5],e[6])},trIsoDate:function(t){return t?this.setAll(r,(e=d(t),n=e[2],e[2]=e[0],e[0]=n,e)).isoDate(r):t;var e,n},acDate:function(t){return t?this.setAll(r,d(t)).isoDate(r):t},isoDate:function(t){return s(t.getDate())+"/"+s(t.getMonth()+1)+"/"+t.getFullYear()},isoTime:D,isoDateTime:function(t){return this.isoDate(t)+" "+this.isoTime(t)}},fr:{monthNames:["Janvier","Fevrier","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Octobre","Novembre","Decembre"],monthNamesShort:["Jan","Fev","Mar","Avr","Mai","Jun","Jul","Aou","Sep","Oct","Nov","Dec"],dayNames:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayNamesShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],dayNamesMin:["Di","Lu","Ma","Me","Je","Ve","Sa"],dateFormat:"mm/dd/yy",firstDay:1},it:{monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gio","Ve","Sa"],dateFormat:"dd/mm/yy",firstDay:1},de:{monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],dateFormat:"yy-mm-dd",firstDay:1}};var y=p.es;function b(t,e){return r.setFullYear(t,e,1),r.getDay()}function x(t,n){return function(t,e){return t.replace(/@(\w+);/g,(t,n)=>u(e[n],t))}(t,e.toObject(n))}this.sysdate=function(){return n},this.getLang=function(t){return t?p[t]:y},this.setLang=function(t,n){return p[t]=n,e},this.getI18n=function(t){return p[t]||t&&p[t.substr(0,2)]||p.es},this.setI18n=function(t){return y=e.getI18n(t),e},this.valid=function(t){return t&&t instanceof Date&&!isNaN(t.getTime())},this.setTime=function(t,n,r,i,a){return m(t,n,r,i,a),e},this.setDate=function(t,n,r,i){return g(t,n,r,i),e},this.setDateTime=function(t,n,r,i,a,o,u,s){return e.setDate(t,n,r,i).setTime(t,a,o,u,s)},this.setAll=function(t,n){return y.setAll(t,n),e},this.build=function(t){return y.build(t)},this.load=function(t,n){return e.setDate(t,n.yyyy,n.m,n.d,n.h,n.M,n.s,n.ms)},this.init=function(t,r){return t&&t.setTime((r||n).getTime()),e},this.trunc=function(t){return e.setTime(t,0,0,0,0)},this.clone=function(t){return t&&new Date(t.getTime())},this.toObject=function(t){let e=(t=t||n).getDay(),r=""+t.getFullYear(),i={yyyy:+r,y:+r.substr(0,2),yy:+r.substr(-2),m:t.getMonth(),d:t.getDate()};return i.mmm=y.monthNamesShort[i.m],i.mmmm=y.monthNames[i.m],i.mm=s(++i.m),i.ddd=y.dayNamesShort[e],i.dddd=y.dayNames[e],i.dd=s(i.d),i.h=t.getHours(),i.hh=s(i.h),i.M=t.getMinutes(),i.MM=s(i.M),i.s=t.getSeconds(),i.ss=s(i.s),i.ms=t.getMilliseconds(),i.t=i.h<12?"a":"p",i.tt=i.t+"m",i},this.getCentury=function(t){return a((t||n).getFullYear()/100)},this.startYear=function(t){return t&&t.setFullYear(t.getFullYear(),0,1),e},this.startMonth=function(t){return t&&t.setFullYear(t.getFullYear(),t.getMonth(),1),e},this.daysInMonth=function(t){return c((t=t||n).getFullYear(),t.getMonth())},this.dayOfYear=function(t){return e=(t=t||n).getFullYear(),r=t.getMonth(),a=t.getDate(),i.slice(0,r).reduce((t,e)=>t+e,a+(r>1&&l(e)));var e,r,a},this.daysInYear=function(t){return l((t||n).getFullYear())?366:365},this.weekOfYear=function(t){return t=t||n,Math.ceil((b(t.getFullYear(),0)+e.dayOfYear(t))/7)},this.weekOfMonth=function(t){return t=t||n,Math.ceil((b(t.getFullYear(),t.getMonth())+t.getDate())/7)},this.endDay=function(t){return t&&t.setHours(23,59,59,999),e},this.format=function(t,e){return x(e||"@yyyy;-@mm;-@dd;",t)},this.minTime=M,this.isoTime=D,this.shortTime=function(t){return x("@h;:@MM; @tt;",t)},this.minDate=function(t){return x("@yy;@mm;@dd;",t)},this.shortDate=function(t){return x("@yy;-@m;-@d;",t)},this.isoDate=function(t){return y.isoDate(t)},this.isoDateTime=function(t){return y.isoDateTime(t)},this.dfIso=function(t){return e.isoDate(t)+"T"+e.isoTime(t)+"."+t.getMilliseconds()+"Z"},this.dfFull=function(t){return x("@dddd;, @mmmm; @d;, @yyyy;",t)},this.toJSON=e.dfIso,this.toDate=function(t){return y.toDate(t)},this.helper=function(t){return y.helper(t)},this.trIsoDate=function(t){return y.trIsoDate(t)},this.acDate=function(t){return y.acDate(t)},this.acTime=function(t){return t?D((e=r,n=d(t),m(e,n[0],n[1],n[2],n[3]))):t;var e,n},this.tHelper=function(t){return t&&t.replace(/(\d\d)(\d+)$/g,"$1:$2").replace(/[^\d\:]/g,"")},this.addMilliseconds=function(t,n){return t&&t.setMilliseconds(t.getMilliseconds()+n),e},this.addMinutes=function(t,n){return t&&t.setMinutes(t.getMinutes()+n),e},this.addHours=function(t,n){return t&&t.setHours(t.getHours()+n),e},this.addDays=function(t,n){return t&&t.setDate(t.getDate()+n),e},this.addDate=e.addDays,this.addMonths=function(t,n){return t&&t.setMonth(t.getMonth()+n),e},this.toArray=function(t){return[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]},this.diff=function(t,r){if(t>(r=r||n))return e.diff(r,t);let i=Math.abs(t.getMilliseconds()-r.getMilliseconds()),a=Math.abs(t.getSeconds()-r.getSeconds()),o=Math.abs(t.getMinutes()-r.getMinutes()),u=Math.abs(t.getHours()-r.getHours()),s=r.getMonth()-t.getMonth(),l=r.getFullYear()-t.getFullYear();if(l>0){var c=l>1?12-t.getMonth():12-t.getMonth()+r.getMonth();12>c?(s=c,l--):s=c%12}if(0==s)return[l,s,Math.abs(r.getDate()-t.getDate()),u,o,a,i];if(s>1)return[l,--s,r.getDate(),u,o,a,i];let d=e.daysInMonth(t);return d>(c=d-t.getDate()+r.getDate())?[l,--s,c,u,o,a,i]:[l,s,c%d,u,o,a,i]},this.diffDays=function(t,e){return e?Math.abs(e.getTime()-t.getTime())/864e5:0},this.diffHours=function(t,e){return e?Math.abs(e.getTime()-t.getTime())/36e5:0},this.inYear=function(t,e){return t&&e&&t.getFullYear()==e.getFullYear()},this.inMonth=function(t,n){return e.inYear(t,n)&&t.getMonth()==n.getMonth()},this.inWeek=function(t,n){return e.inYear(t,n)&&e.weekOfYear(t)==e.weekOfYear(n)},this.inDay=function(t,n){return e.inMonth(t,n)&&t.getDate()==n.getDate()},this.inHour=function(t,n){return e.inDay(t,n)&&t.getHours()==n.getHours()},this.inMinute=function(t,n){return e.inHour(t,n)&&t.getMinutes()==n.getMinutes()},this.between=function(t,e,n){return n=n||t,(e=e||t)<=t&&t<=n},this.range=function(t,e,n){return e&&t<e?e:n&&n<t?n:t},this.rand=function(t,e){let n=t.getTime();return new Date(a(Math.random()*(e.getTime()-n)+n))},this.min=function(t,e){return t&&e?t<e?t:e:u(t,e)},this.max=function(t,e){return t&&e?t<e?e:t:u(t,e)};let N=new Date;this.timeAgo=function(t){return t>n?e.timeTo(t):e.inMinute(t,n)?y.justNow:(e.init(N,t).addMinutes(N,30),N>n?y.last30Min:(e.init(N,t).addHours(N,1),N>n?y.currentHour:e.inHour(N,n)?y.lastHour:e.inDay(t,n)?y.todayText:(e.init(N,t).addDays(N,1),e.inDay(N,n)?y.yesterdayText:e.inWeek(t,n)?y.currentWeek:(e.init(N,t).addDays(N,7),e.inWeek(N,n)?y.lastWeek:e.inMonth(t,n)?y.currentMonth:(e.init(N,t).addMonths(N,1),e.inMonth(N,n)?y.lastMonth:e.inYear(t,n)?y.currentYear:(e.init(N,t).addMonths(N,12),e.inYear(N,n)?y.lastYear:y.ancientText))))))},this.timeTo=function(t){return t<n?e.timeAgo(t):e.inMinute(t,n)?y.justNow:(e.init(N).addMinutes(N,30),N>t?y.next30Min:(e.init(N).addHours(N,1),N>t?y.currentHour:e.inHour(N,t)?y.nextHour:e.inDay(t,n)?y.todayText:(e.init(N).addDays(N,1),e.inDay(N,t)?y.tomorrowText:e.inWeek(t,n)?y.currentWeek:(e.init(N).addDays(N,7),e.inWeek(N,t)?y.nextWeek:e.inMonth(t,n)?y.currentMonth:(e.init(N).addMonths(N,1),e.inMonth(N,t)?y.nextMonth:e.inYear(t,n)?y.currentYear:(e.init(N).addMonths(N,12),e.inYear(N,t)?y.nextYear:y.futureText))))))},Date.prototype.toJSON=function(){return e.dfIso(this)},e.setI18n(t)}function NumberBox(t){const e=this,n=/\D+/g,r="",i=".";function a(t){return"number"==typeof t}function o(t){return"string"==typeof(e=t)||e instanceof String?t.trim():t;var e}function u(t){return t&&"false"!==t&&"0"!==t}function s(t,e){for(var n=[],r=function(t){return t?t.length:0}(t);r>e;r-=e)n.unshift(t.substr(r-e,e));return r>0&&n.unshift(t.substr(0,r)),n}function l(t,e,n,o){if(!a(t))return r;o=h(o,2);var u=n&&o>0,l=t<0?"-":r,c=m(t,o).toString(),d=(c=(t<0?c.substr(1):c)||"0").lastIndexOf(i);return l+(d<0?s(c,3).join(e)+(u?n+"0".repeat(o):r):s(c.substr(0,d),3).join(e)+(u?n+c.substr(d+1).padEnd(o,"0"):r))}function c(t,e,a){if(!(t=o(t)))return null;let u=t.lastIndexOf(e),s="-"==t.charAt(0)?"-":r,l=u<0?t:t.substr(0,u),c=u<0?r:i+t.substring(u+1),d=parseFloat(s+l.replace(n,r)+c);return isNaN(d)?null:m(d,a)}const d={en:{toFloat:function(t){return c(t,i)},float:function(t,e){return l(t,",",i,e)},integer:function(t){return l(t,",",i,0)},trIsoFloat:function(t,e){return t?this.float(parseFloat(t),e):t},trIsoInt:function(t){return t?this.integer(parseFloat(t)):t},helper:function(t,e){return t&&this.float(this.toFloat(t),e)},boolval:function(t){return u(t)?"Yes":"No"}},es:{toFloat:function(t){return c(t,",")},float:function(t,e){return l(t,i,",",e)},integer:function(t){return l(t,i,",",0)},trIsoFloat:function(t,e){return t?this.float(parseFloat(t),e):t},trIsoInt:function(t){return t?this.integer(parseFloat(t)):t},helper:function(t,e){return t&&this.float(this.toFloat(t),e)},boolval:function(t){return u(t)?"Sí":"No"}}};var f=d.es;function h(t,e){return a(t)?t:e}function m(t,e){return e=h(e,2),+(Math.round(t+"e"+e)+"e-"+e)}this.getLang=function(t){return t?d[t]:f},this.setLang=function(t,n){return d[t]=n,e},this.getI18n=function(t){return d[t]||t&&d[t.substr(0,2)]||d.es},this.setI18n=function(t){return f=e.getI18n(t),e},this.isNumber=function(t){return(t=o(t))&&!isNaN(t)},this.dNaN=h,this.toFloat=function(t){return f.toFloat(t)},this.float=function(t,e){return f.float(t,e)},this.integer=function(t){return f.integer(t)},this.trIsoFloat=function(t,e){return f.trIsoFloat(t,e)},this.trIsoInt=function(t){return f.trIsoInt(t)},this.helper=function(t,e){return f.helper(t,e)},this.boolval=function(t){return f.boolval(t)},this.gt0=function(t){return h(t,0)>0},this.le0=function(t){return isNaN(t)||t<=0},this.between=function(t,e,n){return e=h(e,t),n=h(n,t),e<=t&&t<=n},this.range=function(t,e,n){return Math.max(Math.min(t,n),e)},this.rand=function(t,e){return Math.random()*(e-t)+t},this.intval=function(t){return parseInt(t)||0},this.floatval=function(t){return parseFloat(t)||0},this.round=m,e.setI18n(t)}function MessageBox(t){const e=this,n={en:{lang:"en",errForm:"Form validation failed",errRequired:"Required field!",errMinlength8:"The minimum required length is 8 characters",errNif:"Wrong ID format",errCorreo:"Wrong Mail format",errDate:"Wrong date format",errNumber:"Wrong number format",errGt0:"Price must be great than 0.00 &euro;",errRegex:"Wrong format",errReclave:"Passwords typed do not match",errRange:"Value out of allowed range",remove:"Are you sure to delete element?",cancel:"Are you sure to cancel element?"},es:{lang:"es",errForm:"Error al validar los campos del formulario",errRequired:"Campo obligatorio!",errMinlength8:"La longitud mínima requerida es de 8 caracteres",errNif:"Formato de NIF / CIF incorrecto",errCorreo:"Formato de E-Mail incorrecto",errDate:"Formato de fecha incorrecto",errNumber:"Valor no numérico",errGt0:"El importe debe ser mayor de 0,00 &euro;",errRegex:"Formato incorrecto",errReclave:"Las claves introducidas no coinciden",errRange:"Valor fuera del rango permitido",remove:"¿Confirma que desea eliminar este registro?",cancel:"¿Confirma que desea cancelar este registro?"}};let r=n.es;this.getLang=function(t){return t?n[t]:r},this.setLang=function(t,r){return n[t]=r,e},this.getI18n=function(t){return t&&(n[t]||n[t.substr(0,2)])||n.es},this.setI18n=function(t){return r=e.getI18n(t),e},this.get=function(t){return r[t]},this.set=function(t,n){return r[t]=n,e},this.format=function(t){return t.replace(/@(\w+);/g,(t,e)=>nvl(r[e],t))},e.setI18n(t)}function StringBox(){const t=this,e="àáâãäåāăąÀÁÂÃÄÅĀĂĄÆßèéêëēĕėęěÈÉĒĔĖĘĚìíîïìĩīĭÌÍÎÏÌĨĪĬòóôõöōŏőøÒÓÔÕÖŌŎŐØùúûüũūŭůÙÚÛÜŨŪŬŮçÇñÑþÐŔŕÿÝ",n="aaaaaaaaaAAAAAAAAAABeeeeeeeeeEEEEEEEiiiiiiiiIIIIIIIIoooooooooOOOOOOOOOuuuuuuuuUUUUUUUUcCnNdDRryY";function r(t){return"string"==typeof t||t instanceof String}function i(t){return r(t)?t.trim():t}function a(t){return t?t.length:0}function o(t){for(var r="",o=a(i(t)),u=0;u<o;u++){var s=t.charAt(u),l=e.indexOf(s);r+=l<0?s:n.charAt(l)}return r.toLowerCase()}this.isstr=r,this.trim=i,this.size=a,this.eq=function(t,e){return o(t)==o(e)},this.indexOf=function(t,e){return t?t.indexOf(e):-1},this.iIndexOf=function(t,e){return o(t).indexOf(o(e))},this.prevIndexOf=function(t,e,n){return t?t.substr(0,n).lastIndexOf(e):-1},this.prefix=function(t,e){return t.startsWith(e)?t:e+t},this.suffix=function(t,e){return t.endsWith(e)?t:t+e},this.trunc=function(t,e){return a(t)>e?t.substr(0,e).trim()+"...":t},this.itrunc=function(e,n){var r=a(e)>n?t.prevIndexOf(e," ",n):-1;return t.trunc(e,r<0?n:r)},this.removeAt=function(t,e,n){return e<0?t:t.substr(0,e)+t.substr(e+n)},this.insertAt=function(t,e,n){return t?t.substr(0,n)+e+t.substr(n):e},this.replaceAt=function(t,e,n,r){return n<0?t:t.substr(0,n)+e+t.substr(n+r)},this.replaceLast=function(t,e,n){return t?t.replaceAt(t.lastIndexOf(e),e.length,n):n},this.wrapAt=function(e,n,r,i,a){return n<0?e:t.insertAt(t.insertAt(e,i,n),a,n+i.length+r)},this.iwrap=function(e,n,r,i){return e&&n&&t.wrapAt(e,t.iIndexOf(e,n),n.length,r||"<u><b>",i||"</b></u>")},this.rand=function(t){return Math.random().toString(36).substr(2,t||8)},this.lopd=function(t){return t?"***"+t.substr(3,4)+"**":t},this.split=function(t,e){return t?t.trim().split(e||","):[]},this.minify=function(t){return t?t.trim().replace(/\s{2}/g,""):t},this.lines=function(e){return t.split(e,/[\n\r]+/)},this.words=function(e){return t.split(e,/\s+/)},this.ilike=function(e,n){return t.iIndexOf(""+e,n)>-1},this.olike=function(e,n,r){return n.some(function(n){return t.ilike(e[n],r)})},this.alike=function(e,n,r){return t.words(r).some(function(r){return t.olike(e,n,r)})},this.ltr=function(t,e){for(var n=[],r=a(t);r>e;r-=e)n.unshift(t.substr(r-e,e));return r>0&&n.unshift(t.substr(0,r)),n},this.rtl=function(t,e){for(var n=[],r=a(t),i=0;i<r;i+=e)n.push(t.substr(i,e));return n},this.slices=function(t,e){var n=0,r=[],i=a(t);for(let a=0;n<i&&a<e.length;a++){let i=e[a];r.push(t.substr(n,i)),n+=i}return n<i&&r.push(t.substr(n)),r}}function ValidatorBox(){const t=this,e={},n={},r={},i="",a=/^\d+$/,o=/\D+/g,u=/^\d+(,\d+)*$/,s=/\w+[^\s@]+@[^\s@]+\.[^\s@]+/,l=/^[\w#@&°!§%;:=\^\/\(\)\?\*\+\~\.\,\-\$]{8,}$/,c=/^(\d{8})([A-Z])$/,d=/^([ABCDEFGHJKLMNPQRSUVW])(\d{7})([0-9A-J])$/,f=/^[XYZ]\d{7,8}[A-Z]$/;function h(t){return t?t.length:0}function m(t){return t?t.trim():t}function g(t){return t?t.trim().replace(/\W+/g,i).toUpperCase():t}function v(t,e,n,r){t.setFullYear(+e,+n-1,+r)}function M(t,e,n,r,i){t.setHours(+e||0,+n||0,+r||0,+i||0)}this.size=function(t,e,n){let r=h(t);return e<=r&&r<=n},this.regex=function(t,e){try{return t.test(e)}catch(t){}return!1},this.login=function(e,n){return t.regex(l,n)},this.digits=function(e,n){return t.regex(a,n)},this.idlist=function(e,n){return t.regex(u,n)},this.email=function(e,n,r){return t.regex(s,n)&&t.setData(e,n.toLowerCase())},this.date=function(e,n,r){let i=n&&n.split(o);if(i[0]&&i[1]&&i[2]){let n=new Date;return"en"==r.lang?v(n,i[0],i[1],i[2]):v(n,i[2],i[1],i[0]),M(n,i[3],i[4],i[5],i[6]),!isNaN(n.getTime())&&t.setData(e,n)}return!1},this.time=function(e,n,r){let i=n&&n.split(o);if(i[0]&&i[1]){let n=new Date;return M(n,i[0],i[1],i[2],i[3]),!isNaN(n.getTime())&&t.setData(e,n)}return!1},this.float=function(e,n,r){if(n){let a="en"==r.lang?".":",",u=n.lastIndexOf(a),s="-"==n.charAt(0)?"-":i,l=u<0?n:n.substr(0,u),c=u<0?i:"."+n.substring(u+1),d=parseFloat(s+l.replace(o,i)+c);return!isNaN(d)&&t.setData(e,d)}return!1},this.idES=function(e,n){if(n=g(n)){if(t.regex(c,n))return t.dni(e,n);if(t.regex(d,n))return t.cif(e,n);if(t.regex(f,n))return t.nie(e,n)}return!1},this.dni=function(e,n){t.setData(e,n);return"TRWAGMYFPDXBNJZSQVHLCKE".charAt(parseInt(n,10)%23)==n.charAt(8)},this.cif=function(e,n){t.setData(e,n);for(var r=n.match(d),i=r[1],a=r[2],o=r[3],u=0,s=0;s<a.length;s++){var l=parseInt(a[s],10);s%2==0&&(l=(l*=2)<10?l:parseInt(l/10)+l%10),u+=l}var c=0!==(u%=10)?10-u:u,f="JABCDEFGHI".substr(c,1);return i.match(/[ABEH]/)?o==c:i.match(/[KPQS]/)?o==f:o==c||o==f},this.nie=function(e,n){var r=n.charAt(0),i="X"==r?0:"Y"==r?1:"Z"==r?2:r;return t.dni(i+n.substr(1))},this.iban=function(e,n){if(24!=h(n=g(n)))return!1;t.setData(e,n);const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ";let a=r.search(n.substring(0,1))+10,o=r.search(n.substring(1,2))+10,u=String(a)+String(o)+n.substring(2);u=u.substring(6)+u.substring(0,6);let s=i,l=Math.ceil(u.length/7);for(let t=1;t<=l;t++)s=String(parseFloat(s+u.substr(7*(t-1),7))%97);return 1==s},this.creditCardNumber=function(e,n){if(16!=h(n=g(n)))return!1;t.setData(e,n);let r=0,a=!1;n=n.trim().replace(/\s+/g,i);for(let t=15;t>=0;t--){let e=+n[t];a&&(e*=2,e-=e>9?9:0),r+=e,a=!a}return r%10==0},this.generatePassword=function(t,e){return e=e||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_#@&°!§%;:=^/()?*+~.,-$",Array.apply(null,Array(t||10)).map(function(){return e.charAt(Math.random()*e.length)}).join(i)},this.testPassword=function(t){let e=0;return e+=/[A-Z]+/.test(t)?1:0,e+=/[a-z]+/.test(t)?1:0,e+=/[0-9]+/.test(t)?1:0,e+=/[\W]+/.test(t)?1:0,e+=e>2&&h(t)>8},this.get=function(e){return t[e]},this.set=function(e,n){return t[e]=n,t},this.getErrors=function(){return e},this.getError=function(t){return e[t]},this.addMsg=function(n,r){return e[n]=r,t},this.setError=function(n,r){return e.num++,t.addMsg(n,r)},this.getForm=function(t){return n[t]},this.setForm=function(e,r){return n[e]=r,t},this.setForms=function(e){return Object.assign(n,e),t},this.getFields=function(e){let n=t.getForm(e);return n?Object.keys(n):[]},this.getData=function(t){return t?r[t]:r},this.setData=function(e,n){return r[e]=n,t},this.values=function(t,e){e=e||{};let n=h(t);for(let r=0;r<n;r++){let n=t[r];n.name&&(e[n.name]=m(n.value))}return e},this.fails=function(){return e.num>0},this.isValid=function(){return 0==e.num},this.validate=function(n,i,a){for(let t in e)delete e[t];e.num=0;for(let t in r)delete r[t];let o=t.getForm(n);if(o)for(let t in o){let e=o[t];r[t]=m(i[t]),e(t,r[t],a,i)}return t.isValid()}}$(document).ready(function(){let t=$("html").attr("lang"),e=new StringBox,n=new MessageBox(t);function r(t){t.parentNode.classList.add("d-none")}function i(t){t.parentNode.classList.remove("d-none")}function a(t,e){t.innerHTML=e,i(t)}let o=document.querySelectorAll(".alert-text");o.forEach(t=>{t.firstChild?i(t):r(t)});let u=document.querySelectorAll(".alert-close");function s(t){t&&a(o[0],t)}function l(t){t&&a(o[2],t)}function c(t){t&&a(o[3],t)}function d(){u.forEach(t=>{t.click()})}u.forEach(t=>{t.addEventListener("click",function(){r(t)})});let f=document.querySelector(".loading");function h(){$(f).show(),d()}function m(){$(f).fadeOut()}function g(t){return t?"addClass":"removeClass"}function v(t,e){let n=t.dataset.dest;n?($(n).html(e),s(t.dataset.msg)):s(e)}$(document).on("input",".clearable",function(){$(this)[g(this.value)]("x")}).on("mousemove",".x",function(t){$(this)[g(this.offsetWidth-28<t.clientX-this.getBoundingClientRect().left)]("onX")}).on("touchstart click",".onX",function(t){t.preventDefault(),$(this).removeClass("x onX").val("").change()}),$("a.ajax").click(function(t){h();let e=this;function n(t){return v(e,t)}fetch(e.href).then(t=>t.text().then(t.ok?n:c)).catch(c).finally(m),t.preventDefault()});let M=document.querySelectorAll("form");for(let t=M.length-1;t>-1;t--){const r="input-error",i=".msg-error",u="textarea[maxlength]";let f=M[t],g=f.elements;function D(){$("#counter-"+this.id,f).text(Math.abs(this.getAttribute("maxlength")-e.size(this.value)))}function p(){$(g).filter(":not([type=hidden])[tabindex]:not([readonly])").first().focus()}function y(){$(g).removeClass(r).siblings(i).text(""),$(g).filter(u).each(D),d(),p()}function b(t){return t.nif+" - "+t.nombre}function x(t,e,n){return!$(t).val(n).siblings("[type=hidden]").val(e)}$(g).filter(u).keyup(D).each(D),$(g).filter(".ac-user").autocomplete({minLength:3,source:function(t,n){h(),this.element.autocomplete("instance")._renderItem=function(n,r){let i=e.iwrap(b(r),t.term);return $("<li></li>").append("<div>"+i+"</div>").appendTo(n)},fetch("/usuarios.html?term="+t.term).then(t=>t.json()).then(t=>{n(t.slice(0,10))}).catch(c).finally(m)},focus:function(){return!1},select:function(t,e){return x(this,e.item.nif,b(e.item))}}).change(function(t){this.value||x(this,"","")}),$(g).filter("[type=reset]").click(t=>{f.reset(),y()}),p(),f.addEventListener("submit",function(t){function u(t){$(g).val(""),y(),v(f,t)}function d(t){y();for(let n=e.size(g)-1;n>-1;n--){let e=g[n],a=e.name&&t[e.name];a&&$(e).focus().addClass(r).siblings(i).html(a)}var n;s(t.msgOk),(n=t.msgInfo)&&a(o[1],n),l(t.msgWarn),c(t.msgError)}let M=valid.values(g);if(!valid.validate(f.getAttribute("action"),M,n.getLang()))return d(valid.addMsg("msgError",n.get("errForm")).getErrors()),t.preventDefault();if(!f.classList.contains("ajax"))return!0;h();let D=new FormData(f);fetch(f.action,{method:f.method,body:"multipart/form-data"===f.enctype?D:new URLSearchParams(D),headers:{"Content-Type":f.enctype||"application/x-www-form-urlencoded","x-requested-with":"XMLHttpRequest"}}).then(t=>t.ok?t.text().then(u):t.json().then(d)).catch(c).finally(m),t.preventDefault()})}}),$(document).ready(function(){$("ul.menu").each(function(t,e){$(e.children).filter("[parent][parent!='']").each((t,n)=>{let r=$("#"+$(n).attr("parent"),e);r.children().last().is(e.tagName)||r.append('<ul class="sub-menu"></ul>').children("a").append('<b class="nav-tri">&rtrif;</b>'),r.children().last().append(n)}),$(e.children).remove("[parent][parent!='']"),e.querySelectorAll("i").forEach(t=>{t.classList.length<=1&&t.parentNode.removeChild(t)});let n=$("b.nav-tri",e);n.parent().click(function(t){$(this.parentNode).toggleClass("active"),t.preventDefault()}),$("li",e).hover(function(){n.html("&rtrif;"),$(this).children("a").find("b.nav-tri").html("&dtrif;"),$(this).parents("ul.sub-menu").prev().find("b.nav-tri").html("&dtrif;")}),$("[disabled]",e).each(function(){let t=parseInt(this.getAttribute("disabled"))||0;$(this).toggleClass("disabled",3!=(3&t))}).removeAttr("disabled")}).children().fadeIn(200),$(".sidebar-toggle").click(t=>{$("#sidebar").toggleClass("active"),$(".sidebar-icon",this.parentNode).toggleClass("d-none"),t.preventDefault()});let t=$(".menu-toggle").click(e=>{e.preventDefault(),t.toggleClass("d-none"),$("#wrapper").toggleClass("toggled")}),e=$("#back-to-top").click(function(){return!$("body,html").animate({scrollTop:0},400)});$(window).scroll(function(){$(this).scrollTop()>50?e.fadeIn():e.fadeOut()}),document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();try{document.querySelector(this.href).scrollIntoView({behavior:"smooth"})}catch(t){}})})}),document.addEventListener("DOMContentLoaded",function(){let t=document.querySelectorAll("#progressbar li"),e=0;document.querySelectorAll(".next-tab").forEach(n=>{n.addEventListener("click",n=>(e<t.length-1&&t[++e].classList.add("active"),!1))}),$(".prev-tab").click(function(){return e&&t[e--].classList.remove("active"),!1}),$("a[href^='#tab-']").click(function(){let n=+this.href.substr(this.href.lastIndexOf("-")+1);return 0<=n&&n!=e&&n<t.length&&(t.forEach((t,e)=>{t.classList.toggle("active",e<=n)}),e=n),!1})});const valid=new ValidatorBox;function toISODateString(t){return t.toISOString().substring(0,10)}valid.set("required",function(t,e,n){return valid.size(e,1,200)||!valid.setError(t,n.errRequired)}).set("min8",function(t,e,n){return valid.size(e,8,200)||!valid.setError(t,n.errMinlength8)}).set("usuario",function(t,e,n){return valid.min8(t,e,n)&&(valid.idES(t,e)||valid.email(t,e)||!valid.setError(t,n.errRegex))}).set("clave",function(t,e,n){return valid.min8(t,e,n)&&(valid.login(t,e)||!valid.setError(t,n.errRegex))}).set("reclave",function(t,e,n,r){return valid.clave(t,e,n)&&(e==r.clave||!valid.setError(t,n.errReclave))}).set("nif",function(t,e,n){return valid.required(t,e,n)&&(valid.idES(t,e)||!valid.setError(t,n.errNif))}).set("correo",function(t,e,n){return valid.required(t,e,n)&&(valid.email(t,e)||!valid.setError(t,n.errCorreo))}).set("ltNow",function(t,e,n){return valid.required(t,e,n)&&(valid.date(t,e,n)||!valid.setError(t,n.errDate))&&(valid.getData(t).getTime()<Date.now()||!valid.setError(t,n.errRange))}).set("leToday",function(t,e,n){return valid.required(t,e,n)&&(valid.date(t,e,n)||!valid.setError(t,n.errDate))&&(toISODateString(valid.getData(t))<=toISODateString(new Date)||!valid.setError(t,n.errRange))}).set("gtNow",function(t,e,n){return valid.required(t,e,n)&&(valid.date(t,e,n)||!valid.setError(t,n.errDate))&&(valid.getData(t).getTime()>Date.now()||!valid.setError(t,n.errRange))}).set("geToday",function(t,e,n){return valid.required(t,e,n)&&(valid.date(t,e,n)||!valid.setError(t,n.errDate))&&(toISODateString(valid.getData(t))>=toISODateString(new Date)||!valid.setError(t,n.errRange))}).set("gt0",function(t,e,n){return valid.required(t,e,n)&&(valid.float(t,e,n)||!valid.setError(t,n.errNumber))&&(valid.getData(t)>0||!valid.setError(t,n.errGt0))}).setForm("/login.html",{usuario:valid.usuario,clave:valid.clave}).setForm("/test.html",{nombre:valid.required,correo:valid.correo,date:function(t,e,n){return!e||valid.date(t,e,n)||!valid.setError(t,n.errDate)},number:valid.gt0,asunto:valid.required,info:function(t,e,n){return valid.size(e,1,600)||!valid.setError(t,n.errRequired)}});