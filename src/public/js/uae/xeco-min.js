dom.ready(function(){const o={imp:0,iva:0},t={imp:i18n.isoFloat},n={msgError:"errForm",tercero:i18n.required,organica:i18n.required,lineas:{msgError:"errForm",linea:i18n.required,imp:i18n.gt0}},a=ab.parse(dom.getText("#lineas-json"))||[],c=(e,t)=>{o.iva=+t;t=o.imp*(o.iva/100);dom.setText(e.cells[1],i18n.isoFloat(t)+" €").setText(e.nextElementSibling.cells[1],i18n.isoFloat(o.imp+t)+" €")};dom.click("a#add-linea",e=>{dom.validate("#xeco-fact",n.lineas)&&(a.push(i18n.toData()),dom.table("#conceptos",a,o,t)),dom.setValue("#linea","").setValue("#imp","").setFocus("#linea")}),dom.table("#conceptos",a,o,t).onChangeTable("#conceptos",e=>c(o.row,o.element.value)),dom.onRenderTable("#conceptos",e=>{o.imp=0,a.forEach(e=>{o.imp+=e.imp}),dom.setValue("#lineas",JSON.stringify(a))}),dom.afterRenderTable("#conceptos",e=>{e.tFoot.querySelector("#iva").value=o.iva,c(e.tFoot.rows[1],o.iva)}),dom.onChangeInput("#face",e=>{dom.toggleHide("div.grupo-face",1!=e.value).toggleHide("div.grupo-face-otras",2!=e.value)}),dom.onChangeInput("#subtipo",e=>{dom.toggleHide("#grupo-recibo",9!=e.value&&3!=e.value).toggleHide(".grupo-deportes",10!=e.value)}),dom.onChangeInput("#sujeto",e=>{dom.toggleHide(".grupo-exento",0!=e.value)})});const XECO_I18N={en:{msgRechazar:"Do you really want to reject this request?"},es:{msgRechazar:"¿Confirma que desea rechazar esta comunicación?"}};dom.ready(()=>{$(".ac-tercero").attr("type","search").keydown(fnAcChange).autocomplete({delay:500,minLength:5,focus:fnFalse,search:fnAcSearch,source:function(e,t){fnAutocomplete(this.element,["nombre","nif"],t,e=>e.nif+" - "+e.nombre)},select:function(e,t){return fnAcLoad(this,t.item.nif,t.item.nif+" - "+t.item.nombre)}}).change(fnAcReset),$(".ac-pago").attr("type","search").keydown(fnAcChange).autocomplete({delay:500,minLength:3,focus:fnFalse,search:fnAcSearch,source:function(e,t){fnAutocomplete(this.element,["numJg","numDc"],t,e=>e.numJg+": "+e.desc)},select:function(e,t){return fnAcLoad(this,t.item.numJg,t.item.numJg+": "+t.item.desc)}}).change(fnAcReset),$(".ac-tramitador").attr("type","search").keydown(fnAcChange).autocomplete({delay:500,minLength:3,focus:fnFalse,search:fnAcSearch,source:function(e,t){fnAutocomplete(this.element,["nombre","utCod","utDesc"],t,e=>e.nombre+"<br>"+e.utCod+" - "+e.utDesc)},select:function(e,t){var o=t.item.utCod+" - "+t.item.utDesc;return fnAcLoad(this,t.item.id,o)}}).change(fnAcReset),$(".ac-organica").attr("type","search").keydown(fnAcChange).autocomplete({delay:500,focus:fnFalse,search:fnAcSearch,source:function(e,t){fnAutocomplete(this.element,["o","dOrg"],t,e=>e.o+" - "+e.dOrg)},select:function(e,t){return fnAcLoad(this,t.item.id,t.item.o+" - "+t.item.dOrg)}}).change(fnAcReset)});