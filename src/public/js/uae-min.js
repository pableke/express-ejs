function ArrayBox(){const n=this,i=(t,e)=>t[e],r=t=>t?t.length:0;Array.prototype.update=function(e){for(let t=0;t<this.length;t++)this[t]=e(this[t],t);return this},Array.prototype.remove=function(t){t=this.findIndex(t);return t<0||this.splice(t,1),this},Array.prototype.swap=function(t,e){var i=this[t];return this[t]=this[e],this[e]=i,this},Array.prototype.stringify=function(t,e,i){t=t??",";let s=(e=e||0)<(i=i<0?this.length+i:i||this.length)?""+this[e++]:"";for(;e<i;)s+=t+this[e++];return s},Array.prototype.format=function(t,r){const a=(r=r||{}).empty||"",o=r.getValue||i,l={size:this.length};let e="";return this.forEach((s,n)=>{l.index=n,l.count=n+1,e+=t.format((t,e)=>{const i=r[e];return(i?i(s[e],s,n):o(s,e)??l[e])??a})}),e},this.size=r,this.empty=t=>r(t)<1,this.swap=(t,e,i)=>(t&&t.swap(e,i),n),this.each=function(e,i){var s=r(e);for(let t=0;t<s;t++)i(e[t],t,e);return n},this.reverse=function(e,i){for(let t=r(e)-1;-1<t;t--)i(e[t],t,e);return n},this.find=function(e,i){var s=r(e);for(let t=0;t<s;t++)if(i(e[t],t,e))return e[t];return null},this.findIndex=function(e,i){var s=r(e);for(let t=0;t<s;t++)if(i(e[t],t,e))return t;return-1},this.indexOf=(t,e)=>t?t.indexOf(e):-1,this.intersect=(t,e)=>e?t.filter(t=>-1<e.indexOf(t)):[],this.shuffle=t=>t.sort(()=>.5-Math.random()),this.unique=(e,t)=>t?e.concat(t.filter(t=>e.indexOf(t)<0)):e,this.distinct=(i,s)=>s?i.filter((e,t)=>i.findIndex(t=>e[s]===t[s])==t):i,this.eq=(t,i)=>t&&i&&t.every((t,e)=>i[e]==t),this.push=(t,e)=>(t&&t.push(e),n),this.pop=t=>(t&&t.pop(),n),this.remove=(t,e)=>(t&&t.remove(e),n),this.reset=t=>(t&&t.splice(0),n),this.get=(t,e)=>t?t[e]:null,this.last=t=>n.get(t,r(t)-1),this.clone=t=>t?t.slice():[],this.sort=function(t,e,i){return t.sort("desc"==e?(t,e)=>i(e,t):(t,e)=>i(t,e)),n},this.toObject=function(t,i){const s={};return t.forEach((t,e)=>{s[t]=i[e]}),s},this.clear=function(t){for(var e in t)delete t[e];return t},this.stringify=(t,e,i,s)=>t.stringify(e,i,s),this.format=(t,e,i)=>t.format(e,i),this.parse=(t,e)=>t?JSON.parse(t,e):null,this.read=(t,e)=>n.parse(window.sessionStorage.getItem(t),e),this.stringify=t=>(t=>"string"==typeof t||t instanceof String)(t)?t:JSON.stringify(t),this.ss=function(t,e){return e&&window.sessionStorage.setItem(t,n.stringify(e)),n},this.ls=function(t,e){return e&&window.localStorage.setItem(t,n.stringify(e)),n}}function DateBox(){const l=this,r=new Date,i=[31,28,31,30,31,30,31,31,30,31,30,31],a=t=>t<10?"0"+t:t,o=(t,e,i)=>Math.min(Math.max(t||0,e),i),u=t=>o(t,0,59),s=t=>0==(3&t)&&(t%25!=0||0==(15&t)),n=t=>t&&t.getTime&&!isNaN(t.getTime());function d(t,e,i,s,n){return t.setHours(o(e,0,23),u(i),u(s),n||0),isNaN(t.getTime())?null:t}function e(t,e,i,s,n,r,a){let o=new Date;return o.setFullYear(t,e-1,i),d(o,s,n,r,a)}function h(t,e,i){return e=(n(e)?e:t).getTime(),i=(n(i)?i:t).getTime(),e<=t.getTime()&&t.getTime()<=i}this.isValid=n,this.sysdate=()=>r,this.toDate=t=>t?new Date(t):null,this.isLeap=t=>t&&s(t.getFullYear()),this.getDays=(t,e)=>Math.round(Math.abs((t-e)/864e5)),this.daysInMonth=t=>t?((t,e)=>i[e]+(1==e&&s(t)))(t.getFullYear(),t.getMonth()):0,this.toArray=t=>t?[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]:[],this.reset=t=>(t?t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()):r.setTime(Date.now()),l),this.addDate=function(t,e){return t&&t.setDate(t.getDate()+e),l},this.addHours=function(t,e){return t&&t.setHours(t.getHours()+e),l},this.addMs=function(t,e){return t&&t.setMilliseconds(t.getMilliseconds()+e),l},this.toISODateString=t=>(t||r).toISOString().substring(0,10),this.trunc=function(t){return t&&t.setHours(0,0,0,0),l},this.endDay=function(t){return t&&t.setHours(23,59,59,999),l},this.randTime=(t,e)=>Math.floor(Math.random()*(e.getTime()-t.getTime())+t.getTime()),this.randDate=(t,e)=>new Date(l.randTime(t,e)),this.clone=t=>new Date((t||r).getTime()),this.build=t=>t&&function(t){return e(+t[0],+t[1],+t[2],+t[3]||0,+t[4]||0,+t[5]||0,+t[6]||0)}(t.split(/\D+/)),this.getWeek=function(t){t=t||r;var e=new Date(t.getFullYear(),0,1);return Math.ceil((t.getDay()+1+l.getDays(t,e))/7)},this.week=function(t,e){e=e||1;const i=new Date(t,0,1);t=(i.getDay()+6)%7;return i.setDate(i.getDate()+7*e-t),i},this.toWeek=t=>t?l.week(+t.substr(0,4),+t.substr(6)):null,this.isoWeek=t=>t?t.getFullYear()+"-W"+a(l.getWeek(t)):null,this.toObject=function(t,e){var i=(t=t||r).getDay();let s=t.getFullYear().toString();const n={yyyy:+s,y:+s.substr(0,2),yy:+s.substr(2,2),m:t.getMonth(),d:t.getDate()};return n.mmm=e.monthNamesShort[n.m],n.mmmm=e.monthNames[n.m],n.mm=a(++n.m),n.ddd=e.dayNamesShort[i],n.dddd=e.dayNames[i],n.dd=a(n.d),n.h=t.getHours(),n.hh=a(n.h),n.M=t.getMinutes(),n.MM=a(n.M),n.s=t.getSeconds(),n.ss=a(n.s),n.ms=t.getMilliseconds(),n.t=n.h<12?"a":"p",n.tt=n.t+"m",n},this.diff=function(t,e){if((e=e||r)<t)return l.diff(e,t);const s=l.toArray(e);const n=[0,12,l.daysInMonth(e)-e.getDate()+t.getDate(),24,60,60,1e3];return l.toArray(t).forEach(function t(e,i){s[i]-=e,s[i]<0&&(s[i]+=n[i],t(1,i-1))}),s},this.interval=function(t,e,i,s,n){let r=l.clone(t);n=n||1e3;const a=new Date(r.getTime()+e),o=setInterval(function(){l.addMs(r,n),(!i(r,a)||a<=r)&&(clearInterval(o),s&&s())},n);return l},this.lt=(t,e)=>n(t)&&n(e)&&t.getTime()<e.getTime(),this.le=(t,e)=>n(t)&&n(e)&&t.getTime()<=e.getTime(),this.eq=(t,e)=>n(t)&&n(e)&&t.getTime()==e.getTime(),this.ge=(t,e)=>n(t)&&n(e)&&t.getTime()>=e.getTime(),this.gt=(t,e)=>n(t)&&n(e)&&t.getTime()>e.getTime(),this.diffDate=(t,e)=>t.getTime()-e.getTime(),this.cmp=function(t,e){return t&&e?t.getTime()-e.getTime():t?-1:1},this.inYear=(t,e)=>n(t)&&n(e)&&t.getFullYear()==e.getFullYear(),this.inMonth=(t,e)=>l.inYear(t,e)&&t.getMonth()==e.getMonth(),this.inDay=(t,e)=>l.inMonth(t,e)&&t.getDate()==e.getDate(),this.inHour=(t,e)=>l.inDay(t,e)&&t.getHours()==e.getHours(),this.geToday=t=>l.inDay(t,r)||l.ge(t,r),this.future=t=>l.gt(t,r),this.past=t=>l.lt(t,r),this.in=(t,e,i)=>!n(t)||h(t,e,i),this.between=(t,e,i)=>n(t)&&h(t,e,i);const c=t=>a(t.getHours())+":"+a(t.getMinutes()),g=t=>c(t)+":"+a(t.getSeconds()),m=(this.minTime=t=>t?c(t):null,this.isoTime=t=>t?g(t):null,this.acTime=t=>t&&t.replace(/(\d\d)(\d+)$/g,"$1:$2").replace(/[^\d\:]/g,""),this.toTime=function(t){t=t&&t.split(/\D+/);return t?d(new Date,t[0],t[1],t[2],t[3]):null},this.fmtMinTime=t=>t&&t.substr(11,5),this.fmtTime=t=>t&&t.substr(11,8),t=>t.getFullYear()+"-"+a(t.getMonth()+1)+"-"+a(t.getDate())),f=(this.enDate=t=>t?e(t.substring(0,4),t.substring(5,7),t.substring(8,10)):null,this.isoEnDate=t=>n(t)?m(t):null,this.isoEnDateTime=t=>n(t)?m(t)+" "+g(t):null,this.fmtEnDate=t=>t&&t.substr(0,10),this.acEnDate=t=>t&&t.replace(/^(\d{4})(\d+)$/g,"$1-$2").replace(/^(\d{4}\-\d\d)(\d+)$/g,"$1-$2").replace(/[^\d\-]/g,""),t=>a(t.getDate())+"/"+a(t.getMonth()+1)+"/"+t.getFullYear());this.esDate=t=>t?e(t.substring(6,10),t.substring(3,5),t.substring(0,2)):null,this.isoEsDate=t=>n(t)?f(t):null,this.isoEsDateTime=t=>n(t)?f(t)+" "+g(t):null,this.fmtEsDate=t=>t&&t.substring(8,10)+"/"+t.substring(5,7)+"/"+t.substring(0,4),this.acEsDate=t=>t&&t.replace(/^(\d\d)(\d+)$/g,"$1/$2").replace(/^(\d\d\/\d\d)(\d+)$/g,"$1/$2").replace(/[^\d\/]/g,""),Date.prototype.toJSON=function(){return m(this)+"T"+g(this)+"."+this.getMilliseconds()}}function DomBox(t){const p=this,n="",i=document.createElement("div"),v=document.createElement("textarea"),s={maxFileSize:6e6,classHide:"hide"},r=(Object.assign(s,t),t=>t);const e=t=>console.log("Log:",t),a=t=>t?t.split(/\s+/):[],o=(t,e)=>sb.isstr(t)?p.get(t,e):t,l=t=>sb.isstr(t)?document.querySelectorAll(t):t,T=(this.get=(t,e)=>(e||document).querySelector(t),this.getAll=(t,e)=>(e||document).querySelectorAll(t),this.closest=(t,e)=>e&&e.closest(t),this.getNavLang=()=>navigator.language||navigator.userLanguage,this.getLang=()=>document.documentElement.getAttribute("lang")||p.getNavLang(),this.redir=(t,e)=>(t&&window.open(t,e||"_blank"),p),this.unescape=t=>(v.innerHTML=t,v.value),this.escape=t=>(i.innerHTML=t,i.innerHTML),this.scroll=function(t,e){return e=e||window,(t=t||e.document.body).scrollIntoView({behavior:"smooth"}),p},this.fetch=function(s){return(s=s||{}).headers=s.headers||{},s.reject=s.reject||e,s.resolve=s.resolve||e,s.headers["x-requested-with"]="XMLHttpRequest",s.headers.Authorization="Bearer "+window.localStorage.getItem("jwt"),window.fetch(s.action,s).then(t=>{let e=t.headers.get("content-type")||n,i=-1<e.indexOf("application/json")?t.json():t.text();return i.then(t.ok?s.resolve:s.reject)})},this.copyToClipboard=function(t){return v.value=t,v.select(),document.execCommand("copy"),p},this.each=function(t,e){return t&&(1===t.nodeType?e(t):ab.each(l(t),e)),p},this.apply=(e,t,i)=>p.each(t,t=>t.matches(e)&&i(t)),this.reverse=(t,e)=>(ab.reverse(t,e),p),this.indexOf=(e,t)=>ab.findIndex(t||e.parentNode.children,t=>e==t),this.findIndex=(e,t)=>ab.findIndex(t,t=>t.matches(e)),this.find=(e,t)=>ab.find(t,t=>t.matches(e)),this.filter=(e,t)=>[...t].filter(t=>t.matches(e)),this.sort=(t,e)=>[...l(t)].sort(e),this.map=(t,e)=>[...l(t)].map(e),this.values=t=>p.map(t,t=>t.value),this.prev=(t,e)=>{for(t=t.previousElementSibling;e&&t;){if(t.matches(e))return t;t=t.previousElementSibling}return t},this.next=(t,e)=>{for(t=t.nextElementSibling;e&&t;){if(t.matches(e))return t;t=t.nextElementSibling}return t},this.sibling=(t,e)=>p.prev(t,e)||p.next(t,e),this.children=(t,e)=>t.parentNode.querySelectorAll(e),this.clear=t=>{for(;t.firstChild;)t.removeChild(t.firstChild);return p},"input,textarea,select");function y(t){return t.offsetWidth||t.offsetHeight||t.getClientRects().length}function I(t,e){return e=e??n,"SELECT"===t.tagName?t.selectedIndex=p.findIndex("[value='"+e+"']",t.options):"CHECKBOX"===t.tagName||"RADIO"===t.tagName?t.checked=t.value==e:t.value=e,p}function u(t,e){return t.classList.toggle(s.classHide,!e),t.innerText=e,p}function d(t,e){return t.classList.toggle(s.classHide,!e),t.innerHTML=e,p}this.inputs=t=>p.getAll(T,t),this.focus=t=>(t&&t.focus(),p),this.checked=t=>p.getAll("input:checked",t),this.checks=t=>p.getAll("input[type=checkbox]",t),this.check=(t,e)=>p.each(t,t=>{t.checked=e}),this.binary=(t,i)=>p.each(t,(t,e)=>{t.checked=nb.mask(i,e)}),this.intval=t=>{let e="";return p.each(t,t=>{e+=t.checked?"1":"0"}),parseInt(e,2)},this.val=(t,e)=>p.each(t,t=>I(t,e)),this.attr=(t,e,i)=>p.each(t,t=>t.setAttribute(e,i)),this.removeAttr=(t,e)=>p.each(t,t=>t.removeAttribute(e)),this.getAttr=function(t,e,i){return(t=o(t,i))&&t.getAttribute(e)},this.setAttr=function(t,e,i,s){return(t=o(t,s))&&t.setAttribute(e,i),p},this.delAttr=function(t,e,i){return(t=o(t,i))&&t.removeAttribute(e),p},this.load=(t,i,s)=>(t=p.getForm(t),s=s||{},p.apply(T,t.elements,t=>{const e=s[t.name]||r;i[t.name]=e(t.value)})),this.display=(t,i,s)=>{var e=t=>sb.substring(t,0,10);const n={datetime:r,date:e,week:e,month:e};return t=p.getForm(t),s=s||n,p.apply(T,t.elements,t=>{const e=n[t.type]||s[t.name]||r;I(t,e(i[t.name]))})},this.getText=function(t,e){return(t=o(t,e))&&t.innerText},this.setText=function(t,e,i){return(t=o(t,i))?u(t,e??n):p},this.text=function(t,e){return e=e??n,p.each(t,t=>u(t,e))},this.getHtml=function(t,e){return(t=o(t,e))&&t.innerHTML},this.setHtml=function(t,e,i){return(t=o(t,i))?d(t,e??n):p},this.html=function(t,e){return e=e??n,p.each(t,t=>d(t,e))},this.mask=(t,i,s)=>p.each(t,(t,e)=>t.classList.toggle(s,nb.mask(i,e))),this.view=(t,e)=>p.mask(t,~e,s.classHide),this.select=function(t,i){return p.each(t,t=>{var e=t.options[t.selectedIndex];p.view(t.options,i).hasClass(e,s.classHide)&&(t.selectedIndex=p.findIndex(":not(.hide)",t.options))})},this.empty=t=>!t||!t.innerHTML||t.innerHTML.trim()===n,this.add=(e,t)=>p.each(t,t=>e.appendChild(t)),this.append=function(e,t){return t=t||document.body,p.each(t,t=>{i.innerHTML=e,p.add(t,i.childNodes)})};const h={},D=(this.setTpl=(t,e)=>(h[t]=e,p),this.loadTemplates=()=>p.each("template[id]",t=>p.setTpl(t.id,t.innerHTML)),this.render=function(t,e){t.id=t.id||"_"+sb.rand();var i=t.dataset.tpl||t.id;return h[i]=h[i]||t.innerHTML,d(t,e(h[i]))},this.format=(t,i,s)=>{t=l(t);return i.size=t.length,ab.each(t,(t,e)=>{i.index=e,i.count=e+1,p.render(t,t=>sb.format(i,t,s))}),p},this.tr=(t,e)=>p.format(t,i18n.getLang(),e),this.replace=(t,e)=>p.each(t,t=>{t.outerHTML=e}),this.parse=(t,e)=>p.each(t,t=>{t.outerHTML=e(t.outerHTML)}),this.isVisible=t=>t&&y(t),this.visible=(t,e)=>p.isVisible(o(t,e)),this.show=t=>p.each(t,t=>t.classList.remove(s.classHide)),this.hide=t=>p.each(t,t=>t.classList.add(s.classHide)),this.hasClass=(e,t)=>e&&a(t).some(t=>e.classList.contains(t)),this.addClass=function(t,e){const i=a(e);return p.each(t,e=>{i.forEach(t=>e.classList.add(t))})},this.removeClass=function(t,e){const i=a(e);return p.each(t,e=>{i.forEach(t=>e.classList.remove(t))})},this.toggle=function(t,e,i){const s=a(e);return p.each(t,e=>s.forEach(t=>e.classList.toggle(t,i)))},this.toggleHide=function(t,e){return p.toggle(t,s.classHide,e)},this.css=function(t,e,i){const s=e.replace(/(-[a-z])/,t=>t.replace("-",n).toUpperCase());return p.each(t,t=>{t.style[s]=i})},"change");function x(e,t,i,s){return e.addEventListener(t,t=>s(e,t,i)||t.preventDefault()),p}function A(t,e,i){return t?x(t,e,0,i):p}function w(t,e,i,s){return p.apply(t,e,(t,e)=>x(t,i,e,s))}this.event=(t,e,i)=>A(o(t),e,i),this.events=(t,i,s)=>p.each(t,(t,e)=>x(t,i,e,s)),this.ready=t=>x(document,"DOMContentLoaded",0,t),this.trigger=function(t,e,i){return t.dispatchEvent(i?new CustomEvent(e,{detail:i}):new Event(e)),p},this.click=(t,i)=>p.each(t,(t,e)=>x(t,"click",e,i)),this.addClick=(t,e)=>A(o(t),"click",e),this.onclick=this.onClick=p.click,this.change=(t,i)=>p.each(t,(t,e)=>x(t,D,e,i)),this.onchange=this.onChange=p.change,this.keyup=(t,i)=>p.each(t,(t,e)=>x(t,"keyup",e,i)),this.onkeyup=this.onKeyup=p.keyup,this.keydown=(t,i)=>p.each(t,(t,e)=>x(t,"keydown",e,i)),this.onkeydown=this.onKeydown=p.keydown,this.submit=(t,i)=>p.each(t,(t,e)=>x(t,"submit",e,i)),this.onsubmit=this.onSubmit=p.submit,this.ready(function(){i18n.setI18n(p.getLang());const a=new FileReader;var t=p.getAll(".tab-content,table,form,"+T);const n=p.filter(".tab-content",t),r=p.filter("table",t),i=p.filter("form",t),s=p.filter(T,t),e=(p.isOk=i18n.isOk,p.isError=i18n.isError,p.closeAlerts=()=>p,p.getTable=t=>sb.isstr(t)?p.find(t,r):t,p.getTables=t=>t?p.filter(t,r):r,p.getForm=t=>sb.isstr(t)?p.find(t,i):t,p.getForms=t=>t?p.filter(t,i):i,p.getInput=t=>sb.isstr(t)?p.find(t,s):t,p.getInputs=t=>t?p.filter(t,s):s,p.getValue=t=>(t=p.getInput(t))&&t.value,p.setValue=(t,e)=>(t=p.getInput(t))?I(t,e):p,p.setValues=(t,e)=>p.apply(t,s,t=>I(t,e)),p.copyVal=(t,e)=>p.setValue(t,p.getValue(e)),p.setAttrInput=(t,e,i)=>p.setAttr(p.getInput(t),e,i),p.setAttrInputs=(t,e,i)=>p.apply(t,s,t=>t.setAttribute(e,i)),p.setReadonly=(t,e)=>p.apply(t,s,t=>{t.readOnly=e}),p.setDisabled=(t,e)=>p.apply(t,s,t=>{t.disabled=e}),p.delAttrInput=(t,e)=>p.delAttr(p.getInput(t),e),p.delAttrInputs=(t,e)=>p.apply(t,s,t=>t.removeAttribute(e)),p.getOptText=t=>(t=p.getInput(t))&&p.getText(t.options[t.selectedIndex]),p.setInput=(t,e,i)=>{t=p.getInput(t);return t&&(x(t,D,0,i),I(t,e)),p},"[tabindex]:not([type=hidden],[readonly],[disabled])");function o(t){return y(t)&&t.matches(e)}function l(t){t=t.tBodies;t[0].children.length?p.show(t[0]).hide(t[1]):p.hide(t[0]).show(t[1])}function u(t,e,i){return p.trigger(t,"render"),p.render(t.tFoot,t=>sb.format(e,t,i))}function d(e,n,r,a){const o=p.next(e,".pagination");if(!(r.pageSize<1)&&o){let s=Math.ceil(r.total/r.pageSize);{var l=r.page;let i="";function u(t,e){t=nb.range(t,0,s-1),i+='<a href="#'+t+'">'+e+"</a>"}function d(t){t=nb.range(t,0,s-1),i=(i+='<a href="#'+t+'"')+(t==l?' class="active">':">")+(t+1)+"</a>"}if(1<s){let t=0;u(l-1,"&laquo;"),1<s&&d(0),2<=(t=Math.max(l-3,1))&&u(t-1,"...");for(var h=Math.min(l+3,s-1);t<=h;)d(t++);t<s-1&&u(t,"..."),t<s&&d(s-1),u(l+1,"&raquo;"),o.innerHTML=i,p.click(p.getAll("a",o),t=>{r.page=sb.lastId(t.href),r.start=r.page*r.pageSize,r.end=r.start+r.pageSize,c(e,n,r,a),p.trigger(e,"pagination",r)})}else o.innerHTML=i}}}function h(t,e,i,s){return t&&e&&i18n.confirm(s?.remove||"remove")&&p.closeAlerts().trigger(t,"remove",i.data).isOk()&&(i.size--,i.total--,i.row.remove(),e.splice(i.index,1),0==i.total?(u(t,i,s),l(t),d(t,e,i,s)):0==i.size?(i.start=0,c(t,e,i,s)):(u(t,i,s),d(t,e,i,s))),p}function c(s,n,r,i){if(!s||!n||!r)return p;r.total=n.length,r.index=r.index||0,r.start=r.start||0,r.pageSize=r.pageSize||99,r.sortDir=s.dataset.sortDir,r.sortBy=s.dataset.sortBy,r.end=r.start+r.pageSize,r.page=r.start/r.pageSize,r.sortBy&&r.sort?ab.sort(n,r.sortDir,r.sort):(t=p.getAll(".sort",s.tHead),p.removeClass(t,"sort-asc sort-desc").addClass(t,"sort-none"));const e=r.pageSize<r.total?n.slice(r.start,r.end):n;r.size=e.length,(i=i||{}).getValue=i.getValue||i18n.val;var t=s.tBodies[0];return u(s,r,i),p.render(t,t=>ab.format(e,t,i)),l(s),d(s,n,r,i),p.change(t.children,(t,e,i)=>{r.row=t,r.index=r.start+i,r.data=n[r.index],r.element=e.target,p.trigger(s,"change-"+e.target.name,r)}).click(p.getAll("a[href]",t),t=>{r.row=t.closest("tr"),r.index=r.start+p.indexOf(r.row),r.data=n[r.index];const e=(r.element=t).getAttribute("href");"#remove"==e?h(s,n,r,i):sb.starts(e,"#find")&&p.trigger(s,e.substring(1),r)})}p.setFocus=t=>p.focus(sb.isstr(t)?p.find(t,s):ab.find(p.inputs(t),o)),p.autofocus=()=>p.focus(s.find(o)),p.autofocus(),p.onChangeForm=(t,e)=>A(p.getForm(t),D,e),p.onSubmitForm=(t,e)=>A(p.getForm(t),"submit",e),p.onChangeForms=(t,e)=>w(t,i,D,e),p.onSubmitForms=(t,e)=>w(t,i,"submit",e),p.onChangeInput=(t,e)=>A(p.getInput(t),D,e),p.onChangeInputs=(t,e)=>w(t,s,D,e),p.onBlurInput=(t,e)=>A(p.getInput(t),"blur",e),p.onFileInput=(t,r)=>p.onChangeInput(t,n=>{const t=ab.size(n.files);!function e(i){if(i<t){const s=n.files[i];a.onload=t=>{r(n,t,s,t.target.result,i),e(i+1)},a.readAsBinaryString(s)}}(0)}),p.setRangeDate=(e,i)=>p.onBlurInput(e,t=>p.setAttrInput(i,"min",t.value)).onBlurInput(i,t=>p.setAttrInput(e,"max",t.value)),p.getCheckRows=t=>p.checks(p.getTable(t)),p.getCheckedRows=t=>p.checked(p.getTable(t)),p.onTable=(t,e,i)=>A(p.getTable(t),e,i),p.onFindRow=(t,e)=>p.onTable(t,"find",e),p.onRemoveRow=(t,e)=>p.onTable(t,"remove",e),p.onChangeTable=(t,e)=>p.onTable(t,"change",e),p.onChangeTables=(t,e)=>w(t,r,"change",e),p.onRenderTable=(t,e)=>p.onTable(t,"render",e),p.onRenderTables=(t,e)=>w(t,r,"render",e),p.onPaginationTable=(t,e)=>p.onTable(t,"pagination",e),p.tfoot=function(t,e,i){return(t=p.getTable(t))?u(t,e,i):p},p.table=function(t,e,i,s){return c(t=p.getTable(t),e,i,s)},p.list=function(t,e,i,s){return p.apply(t,r,t=>c(t,e,i,s))},p.repaginate=function(t,e,i,s){return i.start=0,c(t=p.getTable(t),e,i,s)},p.updateTable=function(t,e,i,s){return delete i.sort,c(t=p.getTable(t),e,i,s)},p.removeRow=function(t,e,i,s){return h(t=p.getTable(t),e,i,s)},p.clearTable=function(t,e,i,s){return e.splice(0),delete i.sort,i.index=i.start=0,c(t=p.getTable(t),e,i,s)},p.renderTables=p.tables=p.list,p.renderRows=p.renderTable=p.table,p.renderTfoot=p.tFoot=p.tfoot,p.startPagination=p.repaginate,ab.each(r,e=>{const i=p.getAll(".sort",e.tHead);function s(t){p.removeClass(i,"sort-asc sort-desc").addClass(i,"sort-none").toggle(t,"sort-none sort-"+e.dataset.sortDir)}e.dataset.sortDir&&s(p.find("a[href='#"+e.dataset.sortBy+"']",i)),p.click(i,t=>{e.dataset.sortDir=p.hasClass(t,"sort-asc")?"desc":"asc",e.dataset.sortBy=t.getAttribute("href").substring(1),p.trigger(e,"sort-"+e.dataset.sortBy).trigger(e,"sort"),s(t)}),l(e)});let g=p.findIndex(".active",n),m=n.length-1,f=-1;function b(t){t=nb.range(t,0,m);let e=n[g];if(0<t||0<g){var i=p.closeAlerts().lastId(e.id);if(t>g?p.trigger(e,"next-"+i):t<g&&p.trigger(e,"prev-"+i),p.isOk()){e=n[t];i=p.get("#progressbar");if(i){const s="step-"+t;p.each(i.children,t=>p.toggle(t,"active",t.id<=s))}g=t,p.removeClass(n,"active").addClass(e,"active").setFocus(e).scroll().trigger(e,e.id)}}else p.trigger(e,"exit");return p}p.getTabs=()=>n,p.getTab=t=>n[p.findIndex("#tab-"+t,n)],p.setTabMask=t=>(f=t,p),p.lastId=(t,e)=>nb.range(sb.lastId(t)||0,0,e||99),p.onShowTab=(t,e)=>A(p.getTab(t),"tab-"+t,e),p.onChangeTab=(e,i)=>A(p.getTab(e),D,t=>p.trigger("change-"+e,i)),p.onPrevTab=(t,e)=>A(p.getTab(t),"prev-"+t,e),p.onNextTab=(t,e)=>A(p.getTab(t),"next-"+t,e),p.onExitTab=t=>A(n[0],"exit",t),p.viewTab=t=>b(p.findIndex("#tab-"+t,n)),p.lastTab=()=>b(m),p.prevTab=()=>{for(var t=g-1;!nb.mask(f,t)&&0<t;t--);return b(t)},p.nextTab=()=>{for(var t=g+1;!nb.mask(f,t)&&t<m;t++);return b(t)},p.onclick("a[href='#prev-tab']",()=>!p.prevTab()).onclick("a[href='#next-tab']",()=>!p.nextTab()).onclick("a[href='#last-tab']",()=>!p.lastTab()).onclick("a[href^='#tab-']",t=>!p.viewTab(p.lastId(t.href))),v.style.position="absolute",v.style.left="-9999px",document.body.prepend(v)})}function I18nBox(){const n=this,r=new Map,i=new Map,s="msgError",a={},o={en:{lang:"en",none:"",errForm:"Form validation failed",errRequired:"Required field!",errMinlength8:"The minimum required length is 8 characters",errMaxlength:"Max length exceded",errNif:"Wrong ID format",errCorreo:"Wrong Mail format",errDate:"Wrong date format",errDateLe:"Date must be less or equals than current",errDateGe:"Date must be greater or equals than current",errNumber:"Wrong number format",errGt0:"Price must be great than 0.00 &euro;",errRegex:"Wrong format",errReclave:"Passwords typed do not match",errRange:"Value out of allowed range",errRefCircular:"Circular reference",saveOk:"Element saved successfully!",remove:"Are you sure to delete this element?",removeAll:"Are you sure to delete all elements?",removeOk:"Element removed successfully!",cancel:"Are you sure to cancel element?",cancelOk:"Element canceled successfully!",unlink:"Are you sure to unlink those elements?",unlinkOk:"Elements unlinked successfully!",linkOk:"Elements linked successfully!",closeText:"close",prevText:"prev",nextText:"next",currentText:"current",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dateFormat:"yy-mm-dd",firstDay:0,toDate:dt.enDate,isoDate:dt.isoEnDate,isoDateTime:dt.isoEnDateTime,fmtDate:dt.fmtEnDate,acDate:dt.acEnDate,toTime:dt.toTime,minTime:dt.minTime,isoTime:dt.isoTime,acTime:dt.acTime,toInt:nb.toInt,isoInt:nb.enIsoInt,fmtInt:nb.enFmtInt,toFloat:nb.enFloat,isoFloat:nb.enIsoFloat,fmtFloat:nb.enFmtFloat,fmtBool:nb.enBool,val:sb.enVal},es:{lang:"es",none:"",errForm:"Error al validar los campos del formulario",errRequired:"¡Campo obligatorio!",errMinlength8:"La longitud mínima requerida es de 8 caracteres",errMaxlength:"Longitud máxima excedida",errNif:"Formato de NIF / CIF incorrecto",errCorreo:"Formato de E-Mail incorrecto",errDate:"Formato de fecha incorrecto",errDateLe:"La fecha debe ser menor o igual a la actual",errDateGe:"La fecha debe ser mayor o igual a la actual",errNumber:"Valor no numérico",errGt0:"El importe debe ser mayor de 0,00 &euro;",errRegex:"Formato incorrecto",errReclave:"Las claves introducidas no coinciden",errRange:"Valor fuera del rango permitido",errRefCircular:"Referencia circular",saveOk:"Registro guardado correctamente",remove:"¿Confirma que desea eliminar este registro?",removeAll:"¿Confirma que desea eliminar todos los elementos?",removeOk:"Registro eliminado correctamente.",cancel:"¿Confirma que desea cancelar este registro?",cancelOk:"Elemento cancelado correctamente.",unlink:"¿Confirma que desea desasociar estos registros?",unlinkOk:"Registros desasociados correctamente",linkOk:"Registros asociados correctamente.",closeText:"cerrar",prevText:"prev.",nextText:"sig.",currentText:"hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],dateFormat:"dd/mm/yy",firstDay:1,toDate:dt.esDate,isoDate:dt.isoEsDate,isoDateTime:dt.isoEsDateTime,fmtDate:dt.fmtEsDate,acDate:dt.acEsDate,toTime:dt.toTime,minTime:dt.minTime,isoTime:dt.isoTime,acTime:dt.acTime,toInt:nb.toInt,isoInt:nb.esIsoInt,fmtInt:nb.esFmtInt,toFloat:nb.esFloat,isoFloat:nb.esIsoFloat,fmtFloat:nb.esFmtFloat,fmtBool:nb.esBool,val:sb.val}};let l=o.es;this.getLangs=function(t){return a[t]||o},this.getLang=function(t,e){return n.getLangs(e)[t]||l},this.getI18n=function(t,e){e=n.getLangs(e);return t&&(e[t]||e[t.substr(0,2)])||l},this.setI18n=function(t,e){return l=n.getI18n(t,e),n},this.get=t=>l[t],this.tr=t=>l[t]||t,this.set=(t,e)=>(l[t]=e,n),this.msg=(t,e,i)=>sb.format(e,n.tr(t),i),this.format=(t,e)=>sb.format(l,t,e),this.addLang=function(e,i,s){if(s){let t=a[s]=a[s]||{};t[e]=Object.assign(t[e]||{},o[e],i)}else o[e]=Object.assign(o[e]||{},i);return n},this.addLangs=function(t,e){for(const i in t)n.addLang(i,t[i],e);return n},this.toInt=t=>l.toInt(t),this.isoInt=t=>l.isoInt(t),this.fmtInt=t=>l.fmtInt(t),this.toFloat=t=>l.toFloat(t),this.isoFloat1=t=>l.isoFloat(t,1),this.isoFloat=t=>l.isoFloat(t),this.isoFloat3=t=>l.isoFloat(t,3),this.fmtFloat1=t=>l.fmtFloat(t,1),this.fmtFloat=t=>l.fmtFloat(t),this.fmtFloat3=t=>l.fmtFloat(t,3),this.toDate=t=>l.toDate(t),this.isoDate=t=>l.isoDate(t),this.fmtDate=t=>l.fmtDate(t),this.acDate=t=>l.acDate(t),this.toTime=t=>l.toTime(t),this.minTime=t=>l.minTime(t),this.isoTime=t=>l.isoTime(t),this.fmtMinTime=t=>dt.fmtMinTime(t),this.fmtTime=t=>dt.fmtTime(t),this.acTime=t=>l.acTime(t),this.fmtBool=t=>l.fmtBool(t),this.confirm=t=>confirm(n.tr(t)),this.val=(t,e)=>l.val(t,e),this.arrval=function(t,e){t=l[t];return t&&t[e]||"-"},this.getMsgs=()=>i,this.getMsg=t=>i.get(t),this.setMsg=(t,e)=>(i.set(t,e),n),this.setOk=t=>n.setMsg("msgOk",n.tr(t)),this.setInfo=t=>n.setMsg("msgInfo",n.tr(t)),this.setWarn=t=>n.setMsg("msgWarn",n.tr(t)),this.getError=t=>i.get(t||s),this.setError=(t,e,i)=>n.setMsg(s,n.tr(t)).setMsg(e,n.tr(i)),this.getNumMsgs=()=>i.size,this.getData=t=>t?r.get(t):r,this.toData=()=>Object.fromEntries(r),this.toMsgs=()=>Object.fromEntries(i),this.reset=()=>(r.clear(),i.clear(),n),this.start=(t,e)=>n.reset().setI18n(t,e),this.valid=function(t,e,i,s){return sb.isset(e)?(r.set(t,e),!0):(n.setError(i,t,s),!1)},this.isOk=()=>!i.has(s),this.isError=t=>i.has(t||s),this.required=(t,e,i,s)=>n.valid(t,valid.required(e),i,s),this.size10=(t,e,i,s)=>n.valid(t,valid.size10(e),i,s),this.size50=(t,e,i,s)=>n.valid(t,valid.size50(e),i,s),this.size200=(t,e,i,s)=>n.valid(t,valid.size200(e),i,s),this.size300=(t,e,i,s)=>n.valid(t,valid.size300(e),i,s),this.text10=(t,e,i,s)=>n.valid(t,valid.text10(e),i,s),this.text50=(t,e,i,s)=>n.valid(t,valid.text50(e),i,s),this.text200=(t,e,i,s)=>n.valid(t,valid.text200(e),i,s),this.text300=(t,e,i,s)=>n.valid(t,valid.text300(e),i,s),this.text=(t,e,i,s)=>n.valid(t,valid.text(e),i,s),this.fk=(t,e,i,s)=>n.valid(t,valid.fk(e),i,s),this.intval=(t,e,i,s)=>n.valid(t,valid.intval(e),i,s),this.intval3=(t,e,i,s)=>n.valid(t,valid.intval3(e),i,s),this.iGt0=(t,e,i,s)=>n.valid(t,valid.gt0(l.toInt(e)),i,s),this.gt0=(t,e,i,s)=>n.valid(t,valid.gt0(l.toFloat(e)),i,s),this.regex=(t,e,i,s)=>n.valid(t,valid.regex(e),i,s),this.login=(t,e,i,s)=>n.valid(t,valid.login(e),i,s),this.digits=(t,e,i,s)=>n.valid(t,valid.digits(e),i,s),this.idlist=(t,e,i,s)=>n.valid(t,valid.idlist(e),i,s),this.email=(t,e,i,s)=>n.valid(t,valid.email(e),i,s),this.isDate=(t,e,i,s)=>n.valid(t,valid.isDate(e),i,s),this.past=(t,e,i,s)=>n.valid(t,valid.past(e),i,s),this.future=(t,e,i,s)=>n.valid(t,valid.future(e),i,s),this.geToday=(t,e,i,s)=>n.valid(t,valid.geToday(e),i,s),this.dni=(t,e,i,s)=>n.valid(t,valid.dni(e),i,s),this.cif=(t,e,i,s)=>n.valid(t,valid.cif(e),i,s),this.nie=(t,e,i,s)=>n.valid(t,valid.nie(e),i,s),this.idES=(t,e,i,s)=>n.valid(t,valid.idES(e),i,s),this.user=(t,e,i,s)=>n.valid(t,valid.email(e)||valid.idES(e),i,s),this.iban=(t,e,i,s)=>n.valid(t,valid.iban(e),i,s),this.swift=(t,e,i,s)=>n.valid(t,valid.swift(e),i,s),this.creditCardNumber=(t,e,i,s)=>n.valid(t,valid.creditCardNumber(e),i,s)}function NumberBox(){const n=this,r="",a=".";function o(t){return null!=t}function l(t){return t.replace(/\D+/g,r)}function u(t){return l(t).replace(/^0+(\d+)/,"$1")}function d(t){return"-"==t.charAt(0)?"-":r}function h(t,e){let i=t.length,s=2<i?t.substring(i-3,i):t;for(i-=3;3<i;i-=3)s=t.substring(i-3,i)+e+s;return 0<i?t.substring(0,i)+e+s:s}const s=(t,e,i)=>e<=t&&t<=i;function i(t,e){var i=d(t),t=u(t);return t?i+h(t,e):null}function c(e,i,s,n,r){n=isNaN(n)?2:n;var a=d(e),r=e.lastIndexOf(r);let o=0<r?e.substr(0,r):e;if(o=0==r?"0":u(o)){let t=r<0?"0":e.substr(r+1,n);return a+h(o,i)+s+(r<0?"0".repeat(n):t.padEnd(n,"0"))}return null}this.between=(t,e,i)=>s(t,e??t,i=i??t),this.in=(t,e,i)=>!t||n.between(t,e,i),this.range=(t,e,i)=>Math.min(Math.max(t,e),i),this.dec=(t,e)=>n.range(t-1,e||0,t),this.inc=(t,e)=>n.range(t+1,0,e),this.mask=(t,e)=>t>>e&1,this.round=function(t,e){return e=o(e)?e:2,+(Math.round(t+"e"+e)+"e-"+e)},this.eq2=(t,e)=>o(t)&&n.round(t)==n.round(e),this.eq3=(t,e)=>o(t)&&n.round(t,3)==n.round(e,3),this.eq01=(t,e)=>s(t-e,-.01,.01),this.lt0=t=>o(t)&&t<0,this.le0=t=>o(t)&&t<=0,this.gt0=t=>o(t)&&0<t,this.cmp=function(t,e){return o(t)&&o(e)?t-e:o(t)?-1:1},this.rand=(t,e)=>Math.random()*(e-t)+t,this.randInt=(t,e)=>Math.floor(n.rand(t,e)),this.toInt=function(t){return t?(t=parseInt(d(t)+l(t)),isNaN(t)?null:t):null},this.isoInt=(t,e)=>o(t)?i(r+t,e):null,this.enIsoInt=t=>n.isoInt(t,","),this.esIsoInt=t=>n.isoInt(t,a),this.fmtInt=(t,e)=>t&&i(t,e),this.enFmtInt=t=>n.fmtInt(t,","),this.esFmtInt=t=>n.fmtInt(t,a),this.intval=t=>parseInt(t)||0,this.toFloat=function(t,e){var i,s;return t?(i=d(t),s=(e=t.lastIndexOf(e))<0?t:t.substr(0,e),t=e<0?r:a+t.substr(e+1),e=parseFloat(i+l(s)+t),isNaN(e)?null:e):null},this.enFloat=t=>n.toFloat(t,a),this.esFloat=t=>n.toFloat(t,","),this.isoFloat=(t,e,i,s)=>o(t)?c(r+n.round(t,s),e,i,s,a):null,this.enIsoFloat=(t,e)=>n.isoFloat(t,",",a,e),this.esIsoFloat=(t,e)=>n.isoFloat(t,a,",",e),this.fmtFloat=(t,e,i,s)=>t&&c(t,e,i,s,i),this.enFmtFloat=(t,e)=>n.fmtFloat(t,",",a,e),this.esFmtFloat=(t,e)=>n.fmtFloat(t,a,",",e),this.floatval=t=>parseFloat(t)||0,this.boolval=t=>t&&"false"!==t&&"0"!==t,this.enBool=t=>n.boolval(t)?"Yes":"No",this.esBool=t=>n.boolval(t)?"Sí":"No"}function StringBox(){const l=this,u="",e=/"|'|&|<|>|\\/g,i={'"':"&#34;","'":"&#39;","&":"&#38;","<":"&#60;",">":"&#62;","\\":"&#92;"},r="àáâãäåāăąÀÁÂÃÄÅĀĂĄÆßèéêëēĕėęěÈÉĒĔĖĘĚìíîïìĩīĭÌÍÎÏÌĨĪĬòóôõöōŏőøÒÓÔÕÖŌŎŐØùúûüũūŭůÙÚÛÜŨŪŬŮçÇñÑþÐŔŕÿÝ",a="aaaaaaaaaAAAAAAAAAABeeeeeeeeeEEEEEEEiiiiiiiiIIIIIIIIoooooooooOOOOOOOOOuuuuuuuuUUUUUUUUcCnNdDRryY",s=(new Date).toISOString(),d=t=>null!=t,n=t=>"string"==typeof t||t instanceof String,o=t=>t.replace(/\W+/g,u),h=t=>t?t.length:0,c=(t,e)=>g(t).indexOf(g(e));function g(e){var i=h(e);let s=e||u;for(let t=0;t<i;t++){var n=r.indexOf(e.charAt(t));s=n<0?s:s.replaceAt(a.charAt(n),t)}return s.toLowerCase()}String.prototype.insert=function(t,e){return this.substring(0,e)+t+this.substring(e)},String.prototype.replaceAt=function(t,e){return this.substring(0,e)+t+this.substring(e+t.length)},String.prototype.wrap=function(t,e,i){var s;return t?(t=(s=c(this,t))+t.length,s<0?this:this.substring(0,s)+(e||"<u><b>")+this.substring(s,t)+(i||"</b></u>")+this.substring(t)):this},String.prototype.remove=function(t,e){return this.substring(0,t)+this.substring(t+e)},String.prototype.format=function(t){return this.replace(/@(\w+);/g,t)},String.prototype.render=function(s,n){const r=(n=n||{}).empty||u,a=n.getValue||l.val,t=n.onFinish||((t,e)=>t?e:u);let o=0;var e=this.format((t,e)=>{const i=n[e];e=i?i(s[e],s):a(s,e);return o+=d(e)?1:0,e??r});return t(o,e)},this.isset=d,this.isstr=n,this.size=h,this.trim=t=>n(t)?t.trim():t,this.eq=(t,e)=>g(t)==g(e),this.upper=t=>t&&t.toUpperCase(t),this.lower=t=>t&&t.toLowerCase(t),this.substr=(t,e,i)=>t&&t.substr(e,i),this.substring=(t,e,i)=>t&&t.substring(e,i),this.indexOf=(t,e)=>t?t.indexOf(e):-1,this.lastIndexOf=(t,e)=>t?t.lastIndexOf(e):-1,this.prevIndexOf=(t,e,i)=>t?t.substr(0,i).lastIndexOf(e):-1,this.starts=(t,e)=>t&&t.startsWith(e),this.ends=(t,e)=>t&&t.endsWith(e),this.prefix=(t,e)=>l.starts(t,e)?t:e+t,this.suffix=(t,e)=>l.ends(t,e)?t:t+e,this.trunc=(t,e)=>h(t)>e?t.substr(0,e).trim()+"...":t,this.escape=t=>t&&t.replace(e,t=>i[t]),this.unescape=t=>t&&t.replace(/&#(\d+);/g,(t,e)=>String.fromCharCode(e)),this.iwrap=(t,e,i,s)=>t&&t.wrap(e,i,s),this.rand=t=>Math.random().toString(36).substr(2,t||8),this.lopd=t=>t&&"***"+t.substr(3,4)+"**",this.test=(t,e)=>t&&e.test(t)?t:null,this.split=(t,e)=>t?t.trim().split(e):[],this.match=(t,e)=>t?t.trim().match(e):[],this.lastId=t=>+l.match(t,/\d+$/).pop(),this.chunk=(t,e)=>l.match(t,new RegExp(".{1,"+e+"}","g")),this.slices=function(e,i){const s=[];var n=h(e),r=0;for(let t=0;r<n&&t<i.length;t++){var a=i[t];s.push(e.substr(r,a)),r+=a}return r<n&&s.push(e.substr(r)),s};const m=t=>t.substring(0,10),f=t=>t.substring(8,10)+"/"+t.substring(5,7)+"/"+t.substring(0,4),b=t=>t.substring(11,19);this.sysdate=()=>s,this.toDate=t=>t?new Date(t):null,this.isDate=t=>/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d[\.\d{1,3}]?$/.test(t),this.enDate=t=>t&&m(t),this.esDate=t=>t&&f(t),this.minTime=t=>l.substring(t,11,16),this.isoTime=t=>t&&b(t),this.isoEnDateTime=t=>t&&m(t)+" "+b(t),this.isoEsDateTime=t=>t&&f(t)+" "+b(t),this.diffDate=(t,e)=>Date.parse(t)-Date.parse(e),this.toIsoDate=(t,e)=>t+"T"+l.toIsoTime(e)+".0",this.toIsoTime=t=>{var e=h(t);return 0==e?"00:00:00":e<6?t+":00":t},this.inYear=(t,e)=>l.substring(t,0,4)==l.substring(e,0,4),this.inMonth=(t,e)=>l.substring(t,0,7)==l.substring(e,0,7),this.inDay=(t,e)=>l.substring(t,0,10)==l.substring(e,0,10),this.inHour=(t,e)=>l.substring(t,0,13)==l.substring(e,0,13),this.startDay=t=>t&&m(t)+"T00:00:00.0",this.endDay=t=>t&&m(t)+"T23:59:59.999",this.getDate=t=>+l.substring(t,8,10),this.getHours=t=>+l.substring(t,14,16),this.geToday=t=>l.inDay(t,s)||t>s,this.future=t=>t>s,this.past=t=>t<s,this.minify=t=>t&&t.trim().replace(/\s+/g," "),this.toWord=t=>t&&o(t),this.toUpperWord=t=>t&&o(t).toUpperCase(),this.lines=t=>l.split(t,/[\n\r]+/),this.words=t=>l.split(t,/\s+/),this.ilike=(t,e)=>-1<c(t,e),this.olike=(e,t,i)=>t.some(t=>l.ilike(e[t],i)),this.alike=(e,i,t)=>l.words(t).some(t=>l.olike(e,i,t)),this.in=(t,e,i)=>!t||l.between(t,e,i),this.between=function(t,e,i){return i=i||t,(e=e||t)<=t&&t<=i},this.cmp=function(t,e){return d(t)&&d(e)?t<e?-1:e<t?1:0:d(t)?-1:1},this.val=(t,e)=>t[e],this.enVal=(t,e)=>t[e+"_en"]||t[e],this.format=(t,e,i)=>e.render(t,i),this.render=(t,e,i)=>e.render(t,i),this.entries=function(t,e,i){const s=(i=i||{}).getValue||l.val;let n=u;for(const a in t){const o=i[a];var r=o?o(t[a],t):s(t,a);n+=e.replace("@key;",a).replace("@value;",r)}return n}}function ValidatorBox(){const s=this,e=/"|'|&|<|>|\\/g,i={'"':"&#34;","'":"&#39;","&":"&#38;","<":"&#60;",">":"&#62;","\\":"&#92;"},n=/^\d+$/,r=/^\d+(,\d+)*$/,a=/\w+[^\s@]+@[^\s@]+\.[^\s@]+/,o=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/,l=/^[\w#@&°!§%;:=\^\/\(\)\?\*\+\~\.\,\-\$]{8,}$/;const u=/^[A-Z]{6,6}[A-Z2-9][A-NP-Z0-9]([A-Z0-9]{3,3}){0,1}$/;const d=/^(\d{8})([A-Z])$/,h=/^([ABCDEFGHJKLMNPQRSUVW])(\d{7})([0-9A-J])$/,c=/^[XYZ]\d{7,8}[A-Z]$/;const g=sb.toUpperWord;function m(t,e,i){return t=s.escape(t),nb.between(sb.size(t),e,i)?t:null}function f(t){return"TRWAGMYFPDXBNJZSQVHLCKE".charAt(parseInt(t,10)%23)==t.charAt(8)?t:null}this.range=(t,e,i)=>nb.between(+t,e,i)?t:null,this.gt0=t=>s.range(t,1e-4,1e9),this.intval=t=>s.range(nb.intval(t),1,9),this.intval3=t=>s.range(nb.intval(t),1,3),this.intval5=t=>s.range(nb.intval(t),1,5),this.fk=t=>s.range(nb.intval(t),1,1/0),this.size=function(t,e,i){return t=sb.trim(t),nb.between(sb.size(t),e,i)?t:null},this.required=t=>s.size(t,1,1e3),this.size10=t=>s.size(t,0,10),this.size50=t=>s.size(t,0,50),this.size200=t=>s.size(t,0,200),this.size300=t=>s.size(t,0,300),this.unescape=t=>t?t.replace(/&#(\d+);/g,(t,e)=>String.fromCharCode(e)):null,this.escape=t=>t?t.trim().replace(e,t=>i[t]):null,this.text10=t=>m(t,0,10),this.text50=t=>m(t,0,50),this.text200=t=>m(t,0,200),this.text300=t=>m(t,0,300),this.text=t=>m(t,0,1e3),this.regex=(t,e)=>sb.test(sb.trim(e),t),this.date=t=>s.regex(o,t),this.login=t=>s.regex(l,t),this.digits=t=>s.regex(n,t),this.idlist=t=>s.regex(r,t),this.swift=t=>s.regex(u,t),this.email=function(t){return(t=s.regex(a,t))&&t.toLowerCase()},this.isDate=function(t){t=dt.toDate(t);return isDate(t)?t:null},this.past=function(t){t=dt.toDate(t);return dt.past(t)?t:null},this.future=function(t){t=dt.toDate(t);return dt.future(t)?t:null},this.geToday=function(t){t=dt.toDate(t);return dt.geToday(t)?t:null},this.dni=function(t){return(t=sb.test(g(t),d))&&f(t)},this.cif=function(t){if(!(t=sb.test(g(t),h)))return null;for(var e=t.match(h),i=e[1],s=e[2],e=e[3],n=0,r=0;r<s.length;r++){var a=parseInt(s[r],10);n+=a=r%2==0?(a*=2)<10?a:parseInt(a/10)+a%10:a}var o=0!==(n%=10)?10-n:n,l="JABCDEFGHI".substr(o,1);return(i.match(/[ABEH]/)?e==o:!i.match(/[KPQS]/)&&e==o||e==l)?t:null},this.nie=function(t){if(!(t=sb.test(g(t),c)))return null;var e=t.charAt(0);return f(("X"==e?0:"Y"==e?1:"Z"==e?2:e)+t.substr(1))},this.idES=function(t){return s.dni(t)||s.cif(t)||s.nie(t)},this.iban=function(t){var e=(t=g(t))&&t.match(/^([A-Z]{2})(\d{2})([A-Z\d]+)$/);if(!e||sb.size(t)!=={AD:24,AE:23,AT:20,AZ:28,BA:20,BE:16,BG:22,BH:22,BR:29,CH:21,CR:22,CY:28,CZ:24,DE:22,DK:18,DO:28,EE:20,ES:24,FI:18,FO:18,FR:27,GB:22,GI:23,GL:18,GR:27,GT:28,HR:21,HU:28,IE:22,IL:23,IS:26,IT:27,JO:30,KW:30,KZ:20,LB:28,LI:21,LT:20,LU:20,LV:21,MC:27,MD:24,ME:22,MK:19,MR:27,MT:31,MU:30,NL:18,NO:15,PK:24,PL:28,PS:29,PT:25,QA:29,RO:24,RS:22,SA:24,SE:24,SI:19,SK:24,SM:27,TN:24,TR:26,AL:28,BY:28,EG:29,GE:22,IQ:23,LC:32,SC:31,ST:25,SV:28,TL:23,UA:29,VA:22,VG:24,XK:20}[e[1]])return null;let i=(e[3]+e[1]+e[2]).replace(/[A-Z]/g,t=>t.charCodeAt(0)-55),s=i.toString(),n=s.slice(0,2);for(let t=2;t<s.length;t+=7){var r=n+s.substring(t,t+7);n=parseInt(r,10)%97}return 1===n?t:null};const b={2080:"Abanca",1544:"Andbank España","0182":"BBVA",9e3:"Banco de España","0186":"Banco Mediolanum","0081":"Banco Sabadell","0049":"Banco Santander","0128":"Bankinter","0065":"Barclays Bank","0058":"BNP Paribas España",2100:"Caixabank","0122":"Citibank España","0154":"Credit Agricole","0019":"Deutsche Bank","0239":"Evo Banco","0162":"HSBC Bank",2085:"Ibercaja Banco",1465:"ING",1e3:"Instituto de crédito oficial",2095:"Kutxabank","0073":"Openbank",2103:"Unicaja Banco",3058:"Cajamar",3085:"Caja Rural",3146:"Novanca","0238":"Banco Pastor","0487":"Banco Mare Nostrum",2090:"Caja de Ahorros Mediterraneo","0030":"Banco Español de Crédito","0146":"Citibank"};this.getEntidades=()=>b,this.getIban1=t=>sb.substr(t,0,4),this.getIban2=t=>sb.substr(t,4,4),this.getEntidad=t=>b[s.getIban2(t)],this.getIban3=t=>sb.substr(t,8,4),this.getOficina=t=>sb.substr(t,8,4),this.getDC=t=>sb.substr(t,12,2),this.getIban4=t=>sb.substr(t,12,4),this.getIban5=t=>sb.substr(t,16,4),this.getIban6=t=>sb.substr(t,20,4),this.getIban7=t=>sb.substr(t,24,4),this.getIban8=t=>sb.substr(t,28,4),this.creditCardNumber=function(i){if(i=g(i),16!=sb.size(i))return null;let s=0,n=!1;for(let e=15;0<=e;e--){let t=+i[e];n&&(t=(t*=2)-(9<t?9:0)),s+=t,n=!n}return s%10==0?i:null},this.generatePassword=function(t,e){return e=e||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_#@&°!§%;:=^/()?*+~.,-$",Array.apply(null,Array(t||10)).map(()=>e.charAt(Math.random()*e.length)).join("")},this.testPassword=function(t){var e=0;return e=(e=(e=(e=(e+=/[A-Z]+/.test(t)?1:0)+(/[a-z]+/.test(t)?1:0))+(/[0-9]+/.test(t)?1:0))+(/[\W]+/.test(t)?1:0))+(2<e&&8<sb.size(t))}}const ab=new ArrayBox,dt=new DateBox,nb=new NumberBox,sb=new StringBox,valid=new ValidatorBox,i18n=new I18nBox,dom=new DomBox;function npLatin(t){return i18n.toFloat(t)}function nfLatin(t){return i18n.isoFloat(t)}function dpLatin(t){return i18n.toDate(t)}function dfLatin(t){return i18n.isoDate(t)}function handleReport(t,e,i){dom.closeAlerts().showError(i&&i.msgerr).redir(i&&i.url)}function handleMessages(t,e,i){dom.closeAlerts().showError(i&&i.msgerr).showOk(i&&i.msgok)}function fnRechazar(){return dom.closeAlerts().required("#rechazo","Debe indicar un motivo para el rechazo de la solicitud.").isOk()&&i18n.confirm("msgRechazar")}let _search=!1;function fnFalse(){return!1}function fnAcSearch(){return _search}function fnAcChange(t){_search=8==t.keyCode||sb.between(t.keyCode,46,111)||sb.between(t.keyCode,160,223)}function fnAcFilter(t,e,i){return t&&t.filter(t=>sb.olike(t,e,i)).slice(0,8)}function fnAcLoad(t,e,i){return!$(t).val(i).siblings("[type=hidden]").val(e)}function fnAcReset(){this.value||fnAcLoad(this,"","")}function fnAcRender(i,s){i.autocomplete("instance")._renderItem=function(t,e){return $("<li></li>").append("<div>"+sb.iwrap(s(e),i.val())+"</div>").appendTo(t)}}dom.ready(function(){const t=dom.getTabs(),e=dom.getInputs(),i=(dom.append('<div class="ibox"><div class="ibox-wrapper"><b class="fas fa-spinner fa-3x fa-spin"></b></div></div>'),document.body.lastElementChild),s=(window.loading=window.MostrarProgreso=()=>$(i).show(),window.unloading=()=>$(i).hide(),dom.append('<a id="back-to-top" href="#top" class="hide back-to-top"><i class="fas fa-chevron-up"></i></a>'),document.body.lastElementChild);window.onscroll=function(){dom.toggleHide(s,this.pageYOffset<80)},dom.addClick(s,t=>!dom.scroll().scroll(null,window.parent));var n=dom.get("div.alerts");const r=dom.getAll(".alert-text",n);function a(t){return dom.show(t.parentNode)}function o(t){return dom.hide(t.parentNode)}function l(t,e){return e?a(t).setHtml(t,e).scroll():dom}dom.showOk=t=>l(r[0],t),dom.showInfo=t=>l(r[1],t),dom.showWarn=t=>l(r[2],t),dom.showError=t=>l(r[3],t),dom.showAlerts=function(t){return t?dom.showOk(t.msgOk).showInfo(t.msgInfo).showWarn(t.msgWarn).showError(t.msgError):dom},dom.closeAlerts=function(){i18n.start();var t=dom.getAll(".ui-errtip");return dom.each(r,o).removeClass(e,"ui-error").html(t,"").hide(t)},dom.each(r,t=>{t.firstChild&&a(t)}).click(dom.getAll(".alert-close",n),o),dom.setError=function(t,e,i,s){t=dom.getInput(t);return!t||s&&s(t.name,t.value,e,i)||(i18n.setError(e,t.name,i),s=dom.sibling(t,".ui-errtip"),dom.showError(i18n.getError()).addClass(t,"ui-error").focus(t).setHtml(s,i18n.getMsg(t.name)).show(s)),dom},dom.each(dom.getInputs(".ui-bool"),t=>{t.value=i18n.fmtBool(t.value)}),dom.onChangeInputs(".ui-integer",t=>{t.value=i18n.fmtInt(t.value),dom.toggle(t,"texterr",sb.starts(t.value,"-"))}),dom.onChangeInputs(".ui-float",t=>{t.value=i18n.fmtFloat(t.value),dom.toggle(t,"texterr",sb.starts(t.value,"-"))}),dom.setAttrInputs(".ui-date","type","date").setAttrInputs(".disabled,.ui-state-disabled","readonly",!0);n=dom.getInputs("textarea[maxlength]");function u(t){var e=Math.abs(t.getAttribute("maxlength")-sb.size(t.value));dom.setText(dom.get(".counter",t.parentNode),e)}dom.keyup(n,u).each(n,u),dom.onChangeInput("#urgente",()=>dom.toggleHide(".grp-urgente")).setAttrInput("#fMax","min",dt.isoEnDate(dt.sysdate())),dom.addError=dom.setError,dom.required=(t,e,i)=>dom.setError(t,e,i,i18n.required),dom.login=(t,e,i)=>dom.setError(t,e,i,i18n.login),dom.email=(t,e,i)=>dom.setError(t,e,i,i18n.email),dom.user=(t,e,i)=>dom.setError(t,e,i,i18n.user),dom.intval=(t,e,i)=>dom.setError(t,e,i,i18n.intval),dom.gt0=(t,e,i)=>dom.setError(t,e,i,i18n.gt0),dom.fk=(t,e,i)=>dom.setError(t,e,i,i18n.fk),dom.past=(t,e,i)=>dom.setError(t,e,i,i18n.past),dom.geToday=(t,e,i)=>dom.setError(t,e,i,i18n.geToday),dom.onclick(".toggle-angle",t=>!dom.toggle(dom.get("i.fas",t),"fa-angle-double-down fa-angle-double-up").toggleHide(".info-"+t.id)),dom.onclick(".toggle-caret",t=>!dom.toggle(dom.get("i.fas",t),"fa-caret-right fa-caret-down").toggleHide(".info-"+t.id)),$("a.rechazar",t).click(function(){return $("input#id-rechazo",t).val(this.id),$("a.btn-rechazar",t).attr("id",this.id),!dom.setFocus("#rechazo")})});